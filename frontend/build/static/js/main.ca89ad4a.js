/*! For license information please see main.ca89ad4a.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,s)=>{e.exports=s(202)},153:(e,t,s)=>{var n=s(43),a=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,s){var n,r={},c=null,d=null;for(n in void 0!==s&&(c=""+s),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,n)&&!o.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===r[n]&&(r[n]=t[n]);return{$$typeof:a,type:e,key:c,ref:d,props:r,_owner:l.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{var s=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function g(e,t,s){this.props=e,this.context=t,this.refs=f,this.updater=s||p}function b(){}function y(e,t,s){this.props=e,this.context=t,this.refs=f,this.updater=s||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=g.prototype;var v=y.prototype=new b;v.constructor=y,x(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,n){var a,r={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,a)&&!_.hasOwnProperty(a)&&(r[a]=t[a]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===r[a]&&(r[a]=o[a]);return{$$typeof:s,type:e,key:i,ref:l,props:r,_owner:w.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function M(e,t,a,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case n:o=!0}}if(o)return i=i(o=e),e=""===r?"."+E(o,0):r,j(i)?(a="",null!=e&&(a=e.replace(C,"$&/")+"/"),M(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=""===r?".":r+":",j(e))for(var c=0;c<e.length;c++){var d=r+E(l=e[c],c);o+=M(l,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=M(l=l.value,t,a,d=r+E(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function P(e,t,s){if(null==e)return e;var n=[],a=0;return M(e,n,"","",function(e){return t.call(s,e,a++)}),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},T={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:T,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,s){P(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=a,t.Profiler=i,t.PureComponent=y,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=O,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=x({},e.props),r=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)N.call(t,c)&&!_.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:s,type:e.type,key:r,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=T.transition;T.transition={};try{e()}finally{T.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,s){return D.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,s){return D.current.useReducer(e,t,s)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return D.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var n=s-1>>>1,a=e[n];if(!(0<r(a,t)))break e;e[n]=t,e[s]=a,s=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var l=2*(n+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,s))c<a&&0>r(d,o)?(e[n]=d,e[c]=s,n=c):(e[n]=o,e[l]=s,n=l);else{if(!(c<a&&0>r(d,s)))break e;e[n]=d,e[c]=s,n=c}}}return t}function r(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,h=null,m=3,p=!1,x=!1,f=!1,g="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,s(c,t)}t=n(d)}}function j(e){if(f=!1,v(e),!x)if(null!==n(c))x=!0,T(N);else{var t=n(d);null!==t&&R(j,t.startTime-e)}}function N(e,s){x=!1,f&&(f=!1,b(S),S=-1),p=!0;var r=m;try{for(v(s),h=n(c);null!==h&&(!(h.expirationTime>s)||e&&!M());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var l=i(h.expirationTime<=s);s=t.unstable_now(),"function"===typeof l?h.callback=l:h===n(c)&&a(c),v(s)}else a(c);h=n(c)}if(null!==h)var o=!0;else{var u=n(d);null!==u&&R(j,u.startTime-s),o=!1}return o}finally{h=null,m=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,_=!1,k=null,S=-1,C=5,E=-1;function M(){return!(t.unstable_now()-E<C)}function P(){if(null!==k){var e=t.unstable_now();E=e;var s=!0;try{s=k(!0,e)}finally{s?w():(_=!1,k=null)}}else _=!1}if("function"===typeof y)w=function(){y(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,D=A.port2;A.port1.onmessage=P,w=function(){D.postMessage(null)}}else w=function(){g(P,0)};function T(e){k=e,_||(_=!0,w())}function R(e,s){S=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,T(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var s=m;m=t;try{return e()}finally{m=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=m;m=e;try{return t()}finally{m=s}},t.unstable_scheduleCallback=function(e,a,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,s(d,e),null===n(c)&&e===n(d)&&(f?(b(S),S=-1):f=!0,R(j,r-i))):(e.sortIndex=l,s(c,e),x||p||(x=!0,T(N))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=m;return function(){var s=m;m=t;try{return e.apply(this,arguments)}finally{m=s}}}},391:(e,t,s)=>{var n=s(950);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},579:(e,t,s)=>{e.exports=s(153)},730:(e,t,s)=>{var n=s(43),a=s(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function x(e,t,s,n,a,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];f[t]=new x(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,s,n){var a=f.hasOwnProperty(t)?f[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,n){if(null===t||"undefined"===typeof t||function(e,t,s,n){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,n))return!0;if(n)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,a,n)&&(s=null),n||null===a?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=null===s?3!==a.type&&"":s:(t=a.attributeName,n=a.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(a=a.type)||4===a&&!0===s?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,b);f[t]=new x(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var T=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,z=Object.assign;function I(e){if(void 0===L)try{throw Error()}catch(Fe){var t=Fe.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function $(e,t){if(!e||F)return"";F=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Oe){var n=Oe}Reflect.construct(e,[],t)}else{try{t.call()}catch(Oe){n=Oe}e.call(t.prototype)}else{try{throw Error()}catch(Oe){n=Oe}e()}}catch(Oe){if(Oe&&n&&"string"===typeof Oe.stack){for(var a=Oe.stack.split("\n"),r=n.stack.split("\n"),i=a.length-1,l=r.length-1;1<=i&&0<=l&&a[i]!==r[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==r[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==r[l]){var o="\n"+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{F=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?I(e):""}function B(e){switch(e.tag){case 5:return I(e.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case k:return"Profiler";case _:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return V(e(t))}catch(Fe){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var a=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=W(e)?e.checked?"true":"false":e.value),(e=n)!==s&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var s=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function G(e,t){var s=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){X(e,t);var s=H(t.value),n=t.type;if(null!=s)"number"===n?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Q(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,a=0;a<e.length;a++){if(e[a].value===s)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(r(92));if(te(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function re(e,t){var s=H(t.value),n=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function xe(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var n=0===s.indexOf("--"),a=pe(s,t[s],n);"float"===s&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}Object.keys(he).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var fe=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(fe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,we=null;function _e(e){if(e=Ea(e)){if("function"!==typeof je)throw Error(r(280));var t=e.stateNode;t&&(t=Pa(t),je(e.stateNode,e.type,t))}}function ke(e){Ne?we?we.push(e):we=[e]:Ne=e}function Se(){if(Ne){var e=Ne,t=we;if(we=Ne=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Me=!1;function Pe(e,t,s){if(Me)return e(t,s);Me=!0;try{return Ce(e,t,s)}finally{Me=!1,(null!==Ne||null!==we)&&(Ee(),Se())}}function Ae(e,t){var s=e.stateNode;if(null===s)return null;var n=Pa(s);if(null===n)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(r(231,t,typeof s));return s}var De=!1;if(d)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){De=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(Le){De=!1}function Ie(e,t,s,n,a,r,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(d){this.onError(d)}}var $e=!1,Be=null,Ve=!1,We=null,Ye={onError:function(e){$e=!0,Be=e}};function Qe(e,t,s,n,a,r,i,l,o){$e=!1,Be=null,Ie.apply(Ye,arguments)}function Ge(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function Xe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Ge(e)!==e)throw Error(r(188))}function Ze(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(r(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return Je(a),e;if(i===n)return Je(a),t;i=i.sibling}throw Error(r(188))}if(s.return!==n.return)s=a,n=i;else{for(var l=!1,o=a.child;o;){if(o===s){l=!0,s=a,n=i;break}if(o===n){l=!0,n=a,s=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===s){l=!0,s=i,n=a;break}if(o===n){l=!0,n=i,s=a;break}o=o.sibling}if(!l)throw Error(r(189))}}if(s.alternate!==n)throw Error(r(190))}if(3!==s.tag)throw Error(r(188));return s.stateNode.current===s?e:t}(e),null!==e?et(e):null}function et(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=et(e);if(null!==t)return t;e=e.sibling}return null}var tt=a.unstable_scheduleCallback,st=a.unstable_cancelCallback,nt=a.unstable_shouldYield,at=a.unstable_requestPaint,rt=a.unstable_now,it=a.unstable_getCurrentPriorityLevel,lt=a.unstable_ImmediatePriority,ot=a.unstable_UserBlockingPriority,ct=a.unstable_NormalPriority,dt=a.unstable_LowPriority,ht=a.unstable_IdlePriority,mt=null,pt=null;var xt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ft(e)/gt|0)|0},ft=Math.log,gt=Math.LN2;var bt=64,yt=4194304;function vt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jt(e,t){var s=e.pendingLanes;if(0===s)return 0;var n=0,a=e.suspendedLanes,r=e.pingedLanes,i=268435455&s;if(0!==i){var l=i&~a;0!==l?n=vt(l):0!==(r&=i)&&(n=vt(r))}else 0!==(i=s&~a)?n=vt(i):0!==r&&(n=vt(r));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(r=t&-t)||16===a&&0!==(4194240&r)))return t;if(0!==(4&n)&&(n|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(s=31-xt(t)),n|=e[s],t&=~a;return n}function Nt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function wt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function _t(){var e=bt;return 0===(4194240&(bt<<=1))&&(bt=64),e}function kt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function St(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-xt(t)]=s}function Ct(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-xt(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var Et=0;function Mt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Pt,At,Dt,Tt,Rt,Ot=!1,Lt=[],zt=null,It=null,Ft=null,$t=new Map,Bt=new Map,Vt=[],Ut="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ht(e,t){switch(e){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":$t.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bt.delete(t.pointerId)}}function Wt(e,t,s,n,a,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:r,targetContainers:[a]},null!==t&&(null!==(t=Ea(t))&&At(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function qt(e){var t=Ca(e.target);if(null!==t){var s=Ge(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=Xe(s)))return e.blockedOn=t,void Rt(e.priority,function(){Dt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=as(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=Ea(s))&&At(t),e.blockedOn=s,!1;var n=new(s=e.nativeEvent).constructor(s.type,s);ye=n,s.target.dispatchEvent(n),ye=null,t.shift()}return!0}function Qt(e,t,s){Yt(e)&&s.delete(t)}function Kt(){Ot=!1,null!==zt&&Yt(zt)&&(zt=null),null!==It&&Yt(It)&&(It=null),null!==Ft&&Yt(Ft)&&(Ft=null),$t.forEach(Qt),Bt.forEach(Qt)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Kt)))}function Xt(e){function t(t){return Gt(t,e)}if(0<Lt.length){Gt(Lt[0],e);for(var s=1;s<Lt.length;s++){var n=Lt[s];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==zt&&Gt(zt,e),null!==It&&Gt(It,e),null!==Ft&&Gt(Ft,e),$t.forEach(t),Bt.forEach(t),s=0;s<Vt.length;s++)(n=Vt[s]).blockedOn===e&&(n.blockedOn=null);for(;0<Vt.length&&null===(s=Vt[0]).blockedOn;)qt(s),null===s.blockedOn&&Vt.shift()}var Jt=v.ReactCurrentBatchConfig,Zt=!0;function es(e,t,s,n){var a=Et,r=Jt.transition;Jt.transition=null;try{Et=1,ss(e,t,s,n)}finally{Et=a,Jt.transition=r}}function ts(e,t,s,n){var a=Et,r=Jt.transition;Jt.transition=null;try{Et=4,ss(e,t,s,n)}finally{Et=a,Jt.transition=r}}function ss(e,t,s,n){if(Zt){var a=as(e,t,s,n);if(null===a)Zn(e,t,n,ns,s),Ht(e,n);else if(function(e,t,s,n,a){switch(t){case"focusin":return zt=Wt(zt,e,t,s,n,a),!0;case"dragenter":return It=Wt(It,e,t,s,n,a),!0;case"mouseover":return Ft=Wt(Ft,e,t,s,n,a),!0;case"pointerover":var r=a.pointerId;return $t.set(r,Wt($t.get(r)||null,e,t,s,n,a)),!0;case"gotpointercapture":return r=a.pointerId,Bt.set(r,Wt(Bt.get(r)||null,e,t,s,n,a)),!0}return!1}(a,e,t,s,n))n.stopPropagation();else if(Ht(e,n),4&t&&-1<Ut.indexOf(e)){for(;null!==a;){var r=Ea(a);if(null!==r&&Pt(r),null===(r=as(e,t,s,n))&&Zn(e,t,n,ns,s),r===a)break;a=r}null!==a&&n.stopPropagation()}else Zn(e,t,n,null,s)}}var ns=null;function as(e,t,s,n){if(ns=null,null!==(e=Ca(e=ve(n))))if(null===(t=Ge(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=Xe(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ns=e,null}function rs(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(it()){case lt:return 1;case ot:return 4;case ct:case dt:return 16;case ht:return 536870912;default:return 16}default:return 16}}var is=null,ls=null,os=null;function cs(){if(os)return os;var e,t,s=ls,n=s.length,a="value"in is?is.value:is.textContent,r=a.length;for(e=0;e<n&&s[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&s[n-t]===a[r-t];t++);return os=a.slice(e,1<t?1-t:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function us(){return!0}function hs(){return!1}function ms(e){function t(t,s,n,a,r){for(var i in this._reactName=t,this._targetInst=n,this.type=s,this.nativeEvent=a,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?us:hs,this.isPropagationStopped=hs,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=us)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=us)},persist:function(){},isPersistent:us}),t}var ps,xs,fs,gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bs=ms(gs),ys=z({},gs,{view:0,detail:0}),vs=ms(ys),js=z({},ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fs&&(fs&&"mousemove"===e.type?(ps=e.screenX-fs.screenX,xs=e.screenY-fs.screenY):xs=ps=0,fs=e),ps)},movementY:function(e){return"movementY"in e?e.movementY:xs}}),Ns=ms(js),ws=ms(z({},js,{dataTransfer:0})),_s=ms(z({},ys,{relatedTarget:0})),ks=ms(z({},gs,{animationName:0,elapsedTime:0,pseudoElement:0})),Ss=z({},gs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Cs=ms(Ss),Es=ms(z({},gs,{data:0})),Ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ps={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},As={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ds(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=As[e])&&!!t[e]}function Ts(){return Ds}var Rs=z({},ys,{key:function(e){if(e.key){var t=Ms[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ds(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ps[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(e){return"keypress"===e.type?ds(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ds(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Os=ms(Rs),Ls=ms(z({},js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),zs=ms(z({},ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts})),Is=ms(z({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fs=z({},js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$s=ms(Fs),Bs=[9,13,27,32],Vs=d&&"CompositionEvent"in window,Us=null;d&&"documentMode"in document&&(Us=document.documentMode);var Hs=d&&"TextEvent"in window&&!Us,Ws=d&&(!Vs||Us&&8<Us&&11>=Us),qs=String.fromCharCode(32),Ys=!1;function Qs(e,t){switch(e){case"keyup":return-1!==Bs.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ks(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gs=!1;var Xs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Js(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Xs[e.type]:"textarea"===t}function Zs(e,t,s,n){ke(n),0<(t=ta(t,"onChange")).length&&(s=new bs("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var en=null,tn=null;function sn(e){Yn(e,0)}function nn(e){if(Y(Ma(e)))return e}function an(e,t){if("change"===e)return t}var rn=!1;if(d){var ln;if(d){var on="oninput"in document;if(!on){var cn=document.createElement("div");cn.setAttribute("oninput","return;"),on="function"===typeof cn.oninput}ln=on}else ln=!1;rn=ln&&(!document.documentMode||9<document.documentMode)}function dn(){en&&(en.detachEvent("onpropertychange",un),tn=en=null)}function un(e){if("value"===e.propertyName&&nn(tn)){var t=[];Zs(t,tn,e,ve(e)),Pe(sn,t)}}function hn(e,t,s){"focusin"===e?(dn(),tn=s,(en=t).attachEvent("onpropertychange",un)):"focusout"===e&&dn()}function mn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nn(tn)}function pn(e,t){if("click"===e)return nn(t)}function xn(e,t){if("input"===e||"change"===e)return nn(t)}var fn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function gn(e,t){if(fn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!u.call(t,a)||!fn(e[a],t[a]))return!1}return!0}function bn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yn(e,t){var s,n=bn(e);for(e=0;n;){if(3===n.nodeType){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bn(n)}}function vn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function jn(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(Ue){s=!1}if(!s)break;t=Q((e=t.contentWindow).document)}return t}function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function wn(e){var t=jn(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&vn(s.ownerDocument.documentElement,s)){if(null!==n&&Nn(s))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=s.textContent.length,r=Math.min(n.start,a);n=void 0===n.end?r:Math.min(n.end,a),!e.extend&&r>n&&(a=n,n=r,r=a),a=yn(s,r);var i=yn(s,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),r>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _n=d&&"documentMode"in document&&11>=document.documentMode,kn=null,Sn=null,Cn=null,En=!1;function Mn(e,t,s){var n=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;En||null==kn||kn!==Q(n)||("selectionStart"in(n=kn)&&Nn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Cn&&gn(Cn,n)||(Cn=n,0<(n=ta(Sn,"onSelect")).length&&(t=new bs("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=kn)))}function Pn(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var An={animationend:Pn("Animation","AnimationEnd"),animationiteration:Pn("Animation","AnimationIteration"),animationstart:Pn("Animation","AnimationStart"),transitionend:Pn("Transition","TransitionEnd")},Dn={},Tn={};function Rn(e){if(Dn[e])return Dn[e];if(!An[e])return e;var t,s=An[e];for(t in s)if(s.hasOwnProperty(t)&&t in Tn)return Dn[e]=s[t];return e}d&&(Tn=document.createElement("div").style,"AnimationEvent"in window||(delete An.animationend.animation,delete An.animationiteration.animation,delete An.animationstart.animation),"TransitionEvent"in window||delete An.transitionend.transition);var On=Rn("animationend"),Ln=Rn("animationiteration"),zn=Rn("animationstart"),In=Rn("transitionend"),Fn=new Map,$n="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){Fn.set(e,t),o(t,[e])}for(var Vn=0;Vn<$n.length;Vn++){var Un=$n[Vn];Bn(Un.toLowerCase(),"on"+(Un[0].toUpperCase()+Un.slice(1)))}Bn(On,"onAnimationEnd"),Bn(Ln,"onAnimationIteration"),Bn(zn,"onAnimationStart"),Bn("dblclick","onDoubleClick"),Bn("focusin","onFocus"),Bn("focusout","onBlur"),Bn(In,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hn));function qn(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,n,a,i,l,o,c){if(Qe.apply(this,arguments),$e){if(!$e)throw Error(r(198));var d=Be;$e=!1,Be=null,Ve||(Ve=!0,We=d)}}(n,t,void 0,e),e.currentTarget=null}function Yn(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&a.isPropagationStopped())break e;qn(a,l,c),r=o}else for(i=0;i<n.length;i++){if(o=(l=n[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&a.isPropagationStopped())break e;qn(a,l,c),r=o}}}if(Ve)throw e=We,Ve=!1,We=null,e}function Qn(e,t){var s=t[_a];void 0===s&&(s=t[_a]=new Set);var n=e+"__bubble";s.has(n)||(Jn(t,e,2,!1),s.add(n))}function Kn(e,t,s){var n=0;t&&(n|=4),Jn(s,e,n,t)}var Gn="_reactListening"+Math.random().toString(36).slice(2);function Xn(e){if(!e[Gn]){e[Gn]=!0,i.forEach(function(t){"selectionchange"!==t&&(Wn.has(t)||Kn(t,!1,e),Kn(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gn]||(t[Gn]=!0,Kn("selectionchange",!1,t))}}function Jn(e,t,s,n){switch(rs(t)){case 1:var a=es;break;case 4:a=ts;break;default:a=ss}s=a.bind(null,t,s,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):void 0!==a?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function Zn(e,t,s,n,a){var r=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var l=n.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===a||8===o.nodeType&&o.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=Ca(l)))return;if(5===(o=i.tag)||6===o){n=r=i;continue e}l=l.parentNode}}n=n.return}Pe(function(){var n=r,a=ve(s),i=[];e:{var l=Fn.get(e);if(void 0!==l){var o=bs,c=e;switch(e){case"keypress":if(0===ds(s))break e;case"keydown":case"keyup":o=Os;break;case"focusin":c="focus",o=_s;break;case"focusout":c="blur",o=_s;break;case"beforeblur":case"afterblur":o=_s;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=Ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=ws;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=zs;break;case On:case Ln:case zn:o=ks;break;case In:o=Is;break;case"scroll":o=vs;break;case"wheel":o=$s;break;case"copy":case"cut":case"paste":o=Cs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Ls}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==l?l+"Capture":null:l;d=[];for(var m,p=n;null!==p;){var x=(m=p).stateNode;if(5===m.tag&&null!==x&&(m=x,null!==h&&(null!=(x=Ae(p,h))&&d.push(ea(p,x,m)))),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,s,a),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||s===ye||!(c=s.relatedTarget||s.fromElement)||!Ca(c)&&!c[wa])&&(o||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=n,null!==(c=(c=s.relatedTarget||s.toElement)?Ca(c):null)&&(c!==(u=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=n),o!==c)){if(d=Ns,x="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ls,x="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==o?l:Ma(o),m=null==c?l:Ma(c),(l=new d(x,p+"leave",o,s,a)).target=u,l.relatedTarget=m,x=null,Ca(a)===n&&((d=new d(h,p+"enter",c,s,a)).target=m,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(h=c,p=0,m=d=o;m;m=sa(m))p++;for(m=0,x=h;x;x=sa(x))m++;for(;0<p-m;)d=sa(d),p--;for(;0<m-p;)h=sa(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=sa(d),h=sa(h)}d=null}else d=null;null!==o&&na(i,l,o,d,!1),null!==c&&null!==u&&na(i,u,c,d,!0)}if("select"===(o=(l=n?Ma(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=an;else if(Js(l))if(rn)f=xn;else{f=mn;var g=hn}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=pn);switch(f&&(f=f(e,n))?Zs(i,f,s,a):(g&&g(e,l,n),"focusout"===e&&(g=l._wrapperState)&&g.controlled&&"number"===l.type&&ee(l,"number",l.value)),g=n?Ma(n):window,e){case"focusin":(Js(g)||"true"===g.contentEditable)&&(kn=g,Sn=n,Cn=null);break;case"focusout":Cn=Sn=kn=null;break;case"mousedown":En=!0;break;case"contextmenu":case"mouseup":case"dragend":En=!1,Mn(i,s,a);break;case"selectionchange":if(_n)break;case"keydown":case"keyup":Mn(i,s,a)}var b;if(Vs)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Gs?Qs(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(Ws&&"ko"!==s.locale&&(Gs||"onCompositionStart"!==y?"onCompositionEnd"===y&&Gs&&(b=cs()):(ls="value"in(is=a)?is.value:is.textContent,Gs=!0)),0<(g=ta(n,y)).length&&(y=new Es(y,e,null,s,a),i.push({event:y,listeners:g}),b?y.data=b:null!==(b=Ks(s))&&(y.data=b))),(b=Hs?function(e,t){switch(e){case"compositionend":return Ks(t);case"keypress":return 32!==t.which?null:(Ys=!0,qs);case"textInput":return(e=t.data)===qs&&Ys?null:e;default:return null}}(e,s):function(e,t){if(Gs)return"compositionend"===e||!Vs&&Qs(e,t)?(e=cs(),os=ls=is=null,Gs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ws&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(n=ta(n,"onBeforeInput")).length&&(a=new Es("onBeforeInput","beforeinput",null,s,a),i.push({event:a,listeners:n}),a.data=b))}Yn(i,t)})}function ea(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ta(e,t){for(var s=t+"Capture",n=[];null!==e;){var a=e,r=a.stateNode;5===a.tag&&null!==r&&(a=r,null!=(r=Ae(e,s))&&n.unshift(ea(e,r,a)),null!=(r=Ae(e,t))&&n.push(ea(e,r,a))),e=e.return}return n}function sa(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function na(e,t,s,n,a){for(var r=t._reactName,i=[];null!==s&&s!==n;){var l=s,o=l.alternate,c=l.stateNode;if(null!==o&&o===n)break;5===l.tag&&null!==c&&(l=c,a?null!=(o=Ae(s,r))&&i.unshift(ea(s,o,l)):a||null!=(o=Ae(s,r))&&i.push(ea(s,o,l))),s=s.return}0!==i.length&&e.push({event:t,listeners:i})}var aa=/\r\n?/g,ra=/\u0000|\uFFFD/g;function ia(e){return("string"===typeof e?e:""+e).replace(aa,"\n").replace(ra,"")}function la(e,t,s){if(t=ia(t),ia(e)!==t&&s)throw Error(r(425))}function oa(){}var ca=null,da=null;function ua(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ha="function"===typeof setTimeout?setTimeout:void 0,ma="function"===typeof clearTimeout?clearTimeout:void 0,pa="function"===typeof Promise?Promise:void 0,xa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof pa?function(e){return pa.resolve(null).then(e).catch(fa)}:ha;function fa(e){setTimeout(function(){throw e})}function ga(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&8===a.nodeType)if("/$"===(s=a.data)){if(0===n)return e.removeChild(a),void Xt(t);n--}else"$"!==s&&"$?"!==s&&"$!"!==s||n++;s=a}while(s);Xt(t)}function ba(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ya(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var va=Math.random().toString(36).slice(2),ja="__reactFiber$"+va,Na="__reactProps$"+va,wa="__reactContainer$"+va,_a="__reactEvents$"+va,ka="__reactListeners$"+va,Sa="__reactHandles$"+va;function Ca(e){var t=e[ja];if(t)return t;for(var s=e.parentNode;s;){if(t=s[wa]||s[ja]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=ya(e);null!==e;){if(s=e[ja])return s;e=ya(e)}return t}s=(e=s).parentNode}return null}function Ea(e){return!(e=e[ja]||e[wa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ma(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Pa(e){return e[Na]||null}var Aa=[],Da=-1;function Ta(e){return{current:e}}function Ra(e){0>Da||(e.current=Aa[Da],Aa[Da]=null,Da--)}function Oa(e,t){Da++,Aa[Da]=e.current,e.current=t}var La={},za=Ta(La),Ia=Ta(!1),Fa=La;function $a(e,t){var s=e.type.contextTypes;if(!s)return La;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,r={};for(a in s)r[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Ba(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Va(){Ra(Ia),Ra(za)}function Ua(e,t,s){if(za.current!==La)throw Error(r(168));Oa(za,t),Oa(Ia,s)}function Ha(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return s;for(var a in n=n.getChildContext())if(!(a in t))throw Error(r(108,U(e)||"Unknown",a));return z({},s,n)}function Wa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||La,Fa=za.current,Oa(za,e),Oa(Ia,Ia.current),!0}function qa(e,t,s){var n=e.stateNode;if(!n)throw Error(r(169));s?(e=Ha(e,t,Fa),n.__reactInternalMemoizedMergedChildContext=e,Ra(Ia),Ra(za),Oa(za,e)):Ra(Ia),Oa(Ia,s)}var Ya=null,Qa=!1,Ka=!1;function Ga(e){null===Ya?Ya=[e]:Ya.push(e)}function Xa(){if(!Ka&&null!==Ya){Ka=!0;var e=0,t=Et;try{var s=Ya;for(Et=1;e<s.length;e++){var n=s[e];do{n=n(!0)}while(null!==n)}Ya=null,Qa=!1}catch(Te){throw null!==Ya&&(Ya=Ya.slice(e+1)),tt(lt,Xa),Te}finally{Et=t,Ka=!1}}return null}var Ja=[],Za=0,er=null,tr=0,sr=[],nr=0,ar=null,rr=1,ir="";function lr(e,t){Ja[Za++]=tr,Ja[Za++]=er,er=e,tr=t}function or(e,t,s){sr[nr++]=rr,sr[nr++]=ir,sr[nr++]=ar,ar=e;var n=rr;e=ir;var a=32-xt(n)-1;n&=~(1<<a),s+=1;var r=32-xt(t)+a;if(30<r){var i=a-a%5;r=(n&(1<<i)-1).toString(32),n>>=i,a-=i,rr=1<<32-xt(t)+a|s<<a|n,ir=r+e}else rr=1<<r|s<<a|n,ir=e}function cr(e){null!==e.return&&(lr(e,1),or(e,1,0))}function dr(e){for(;e===er;)er=Ja[--Za],Ja[Za]=null,tr=Ja[--Za],Ja[Za]=null;for(;e===ar;)ar=sr[--nr],sr[nr]=null,ir=sr[--nr],sr[nr]=null,rr=sr[--nr],sr[nr]=null}var ur=null,hr=null,mr=!1,pr=null;function xr(e,t){var s=$c(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function fr(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ur=e,hr=ba(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ur=e,hr=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==ar?{id:rr,overflow:ir}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=$c(18,null,null,0)).stateNode=t,s.return=e,e.child=s,ur=e,hr=null,!0);default:return!1}}function gr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function br(e){if(mr){var t=hr;if(t){var s=t;if(!fr(e,t)){if(gr(e))throw Error(r(418));t=ba(s.nextSibling);var n=ur;t&&fr(e,t)?xr(n,s):(e.flags=-4097&e.flags|2,mr=!1,ur=e)}}else{if(gr(e))throw Error(r(418));e.flags=-4097&e.flags|2,mr=!1,ur=e}}}function yr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ur=e}function vr(e){if(e!==ur)return!1;if(!mr)return yr(e),mr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ua(e.type,e.memoizedProps)),t&&(t=hr)){if(gr(e))throw jr(),Error(r(418));for(;t;)xr(e,t),t=ba(t.nextSibling)}if(yr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){hr=ba(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}hr=null}}else hr=ur?ba(e.stateNode.nextSibling):null;return!0}function jr(){for(var e=hr;e;)e=ba(e.nextSibling)}function Nr(){hr=ur=null,mr=!1}function wr(e){null===pr?pr=[e]:pr.push(e)}var _r=v.ReactCurrentBatchConfig;function kr(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(r(309));var n=s.stateNode}if(!n)throw Error(r(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function Sr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Cr(e){return(0,e._init)(e._payload)}function Er(e){function t(t,s){if(e){var n=t.deletions;null===n?(t.deletions=[s],t.flags|=16):n.push(s)}}function s(s,n){if(!e)return null;for(;null!==n;)t(s,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Vc(e,t)).index=0,e.sibling=null,e}function i(t,s,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<s?(t.flags|=2,s):n:(t.flags|=2,s):(t.flags|=1048576,s)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,n){return null===t||6!==t.tag?((t=qc(s,e.mode,n)).return=e,t):((t=a(t,s)).return=e,t)}function c(e,t,s,n){var r=s.type;return r===w?u(e,t,s.props.children,n,s.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===D&&Cr(r)===t.type)?((n=a(t,s.props)).ref=kr(e,t,s),n.return=e,n):((n=Uc(s.type,s.key,s.props,null,e.mode,n)).ref=kr(e,t,s),n.return=e,n)}function d(e,t,s,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Yc(s,e.mode,n)).return=e,t):((t=a(t,s.children||[])).return=e,t)}function u(e,t,s,n,r){return null===t||7!==t.tag?((t=Hc(s,e.mode,n,r)).return=e,t):((t=a(t,s)).return=e,t)}function h(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=qc(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Uc(t.type,t.key,t.props,null,e.mode,s)).ref=kr(e,null,t),s.return=e,s;case N:return(t=Yc(t,e.mode,s)).return=e,t;case D:return h(e,(0,t._init)(t._payload),s)}if(te(t)||O(t))return(t=Hc(t,e.mode,s,null)).return=e,t;Sr(e,t)}return null}function m(e,t,s,n){var a=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==a?null:o(e,t,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===a?c(e,t,s,n):null;case N:return s.key===a?d(e,t,s,n):null;case D:return m(e,t,(a=s._init)(s._payload),n)}if(te(s)||O(s))return null!==a?null:u(e,t,s,n,null);Sr(e,s)}return null}function p(e,t,s,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return o(t,e=e.get(s)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case j:return c(t,e=e.get(null===n.key?s:n.key)||null,n,a);case N:return d(t,e=e.get(null===n.key?s:n.key)||null,n,a);case D:return p(e,t,s,(0,n._init)(n._payload),a)}if(te(n)||O(n))return u(t,e=e.get(s)||null,n,a,null);Sr(t,n)}return null}function x(a,r,l,o){for(var c=null,d=null,u=r,x=r=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var g=m(a,u,l[x],o);if(null===g){null===u&&(u=f);break}e&&u&&null===g.alternate&&t(a,u),r=i(g,r,x),null===d?c=g:d.sibling=g,d=g,u=f}if(x===l.length)return s(a,u),mr&&lr(a,x),c;if(null===u){for(;x<l.length;x++)null!==(u=h(a,l[x],o))&&(r=i(u,r,x),null===d?c=u:d.sibling=u,d=u);return mr&&lr(a,x),c}for(u=n(a,u);x<l.length;x++)null!==(f=p(u,a,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),r=i(f,r,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return t(a,e)}),mr&&lr(a,x),c}function f(a,l,o,c){var d=O(o);if("function"!==typeof d)throw Error(r(150));if(null==(o=d.call(o)))throw Error(r(151));for(var u=d=null,x=l,f=l=0,g=null,b=o.next();null!==x&&!b.done;f++,b=o.next()){x.index>f?(g=x,x=null):g=x.sibling;var y=m(a,x,b.value,c);if(null===y){null===x&&(x=g);break}e&&x&&null===y.alternate&&t(a,x),l=i(y,l,f),null===u?d=y:u.sibling=y,u=y,x=g}if(b.done)return s(a,x),mr&&lr(a,f),d;if(null===x){for(;!b.done;f++,b=o.next())null!==(b=h(a,b.value,c))&&(l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return mr&&lr(a,f),d}for(x=n(a,x);!b.done;f++,b=o.next())null!==(b=p(x,a,f,b.value,c))&&(e&&null!==b.alternate&&x.delete(null===b.key?f:b.key),l=i(b,l,f),null===u?d=b:u.sibling=b,u=b);return e&&x.forEach(function(e){return t(a,e)}),mr&&lr(a,f),d}return function e(n,r,i,o){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=r;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){s(n,d.sibling),(r=a(d,i.props.children)).return=n,n=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&Cr(c)===d.type){s(n,d.sibling),(r=a(d,i.props)).ref=kr(n,d,i),r.return=n,n=r;break e}s(n,d);break}t(n,d),d=d.sibling}i.type===w?((r=Hc(i.props.children,n.mode,o,i.key)).return=n,n=r):((o=Uc(i.type,i.key,i.props,null,n.mode,o)).ref=kr(n,r,i),o.return=n,n=o)}return l(n);case N:e:{for(d=i.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){s(n,r.sibling),(r=a(r,i.children||[])).return=n,n=r;break e}s(n,r);break}t(n,r),r=r.sibling}(r=Yc(i,n.mode,o)).return=n,n=r}return l(n);case D:return e(n,r,(d=i._init)(i._payload),o)}if(te(i))return x(n,r,i,o);if(O(i))return f(n,r,i,o);Sr(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(s(n,r.sibling),(r=a(r,i)).return=n,n=r):(s(n,r),(r=qc(i,n.mode,o)).return=n,n=r),l(n)):s(n,r)}}var Mr=Er(!0),Pr=Er(!1),Ar=Ta(null),Dr=null,Tr=null,Rr=null;function Or(){Rr=Tr=Dr=null}function Lr(e){var t=Ar.current;Ra(Ar),e._currentValue=t}function zr(e,t,s){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Ir(e,t){Dr=e,Rr=Tr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Cl=!0),e.firstContext=null)}function Fr(e){var t=e._currentValue;if(Rr!==e)if(e={context:e,memoizedValue:t,next:null},null===Tr){if(null===Dr)throw Error(r(308));Tr=e,Dr.dependencies={lanes:0,firstContext:e}}else Tr=Tr.next=e;return t}var $r=null;function Br(e){null===$r?$r=[e]:$r.push(e)}function Vr(e,t,s,n){var a=t.interleaved;return null===a?(s.next=s,Br(t)):(s.next=a.next,a.next=s),t.interleaved=s,Ur(e,n)}function Ur(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Hr=!1;function Wr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function qr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Yr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qr(e,t,s){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&zo)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ur(e,s)}return null===(a=n.interleaved)?(t.next=t,Br(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ur(e,s)}function Kr(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,Ct(e,s)}}function Gr(e,t){var s=e.updateQueue,n=e.alternate;if(null!==n&&s===(n=n.updateQueue)){var a=null,r=null;if(null!==(s=s.firstBaseUpdate)){do{var i={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===r?a=r=i:r=r.next=i,s=s.next}while(null!==s);null===r?a=r=t:r=r.next=t}else a=r=t;return s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:r,shared:n.shared,effects:n.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Xr(e,t,s,n){var a=e.updateQueue;Hr=!1;var r=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=a.baseState;for(i=0,d=c=o=null,l=r;;){var h=l.lane,m=l.eventTime;if((n&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(h=t,m=s,x.tag){case 1:if("function"===typeof(p=x.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=x.payload)?p.call(m,u,h):p)||void 0===h)break e;u=z({},u,h);break e;case 2:Hr=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=m,o=u):d=d.next=m,i|=h;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(h=l).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===d&&(o=u),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===r&&(a.shared.lanes=0);Wo|=i,e.lanes=i,e.memoizedState=u}}function Jr(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=s,"function"!==typeof a)throw Error(r(191,a));a.call(n)}}}var Zr={},ei=Ta(Zr),ti=Ta(Zr),si=Ta(Zr);function ni(e){if(e===Zr)throw Error(r(174));return e}function ai(e,t){switch(Oa(si,t),Oa(ti,e),Oa(ei,Zr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ra(ei),Oa(ei,t)}function ri(){Ra(ei),Ra(ti),Ra(si)}function ii(e){ni(si.current);var t=ni(ei.current),s=oe(t,e.type);t!==s&&(Oa(ti,e),Oa(ei,s))}function li(e){ti.current===e&&(Ra(ei),Ra(ti))}var oi=Ta(0);function ci(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var di=[];function ui(){for(var e=0;e<di.length;e++)di[e]._workInProgressVersionPrimary=null;di.length=0}var hi=v.ReactCurrentDispatcher,mi=v.ReactCurrentBatchConfig,pi=0,xi=null,fi=null,gi=null,bi=!1,yi=!1,vi=0,ji=0;function Ni(){throw Error(r(321))}function wi(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!fn(e[s],t[s]))return!1;return!0}function _i(e,t,s,n,a,i){if(pi=i,xi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hi.current=null===e||null===e.memoizedState?ll:ol,e=s(n,a),yi){i=0;do{if(yi=!1,vi=0,25<=i)throw Error(r(301));i+=1,gi=fi=null,t.updateQueue=null,hi.current=cl,e=s(n,a)}while(yi)}if(hi.current=il,t=null!==fi&&null!==fi.next,pi=0,gi=fi=xi=null,bi=!1,t)throw Error(r(300));return e}function ki(){var e=0!==vi;return vi=0,e}function Si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gi?xi.memoizedState=gi=e:gi=gi.next=e,gi}function Ci(){if(null===fi){var e=xi.alternate;e=null!==e?e.memoizedState:null}else e=fi.next;var t=null===gi?xi.memoizedState:gi.next;if(null!==t)gi=t,fi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(fi=e).memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},null===gi?xi.memoizedState=gi=e:gi=gi.next=e}return gi}function Ei(e,t){return"function"===typeof t?t(e):t}function Mi(e){var t=Ci(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var n=fi,a=n.baseQueue,i=s.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,s.pending=null}if(null!==a){i=a.next,n=n.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((pi&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=h,l=n):c=c.next=h,xi.lanes|=u,Wo|=u}d=d.next}while(null!==d&&d!==i);null===c?l=n:c.next=o,fn(n,t.memoizedState)||(Cl=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=c,s.lastRenderedState=n}if(null!==(e=s.interleaved)){a=e;do{i=a.lane,xi.lanes|=i,Wo|=i,a=a.next}while(a!==e)}else null===a&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Pi(e){var t=Ci(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(null!==a){s.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);fn(i,t.memoizedState)||(Cl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function Ai(){}function Di(e,t){var s=xi,n=Ci(),a=t(),i=!fn(n.memoizedState,a);if(i&&(n.memoizedState=a,Cl=!0),n=n.queue,Hi(Oi.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||null!==gi&&1&gi.memoizedState.tag){if(s.flags|=2048,Fi(9,Ri.bind(null,s,n,a,t),void 0,null),null===Io)throw Error(r(349));0!==(30&pi)||Ti(s,t,a)}return a}function Ti(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=xi.updateQueue)?(t={lastEffect:null,stores:null},xi.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Ri(e,t,s,n){t.value=s,t.getSnapshot=n,Li(t)&&zi(e)}function Oi(e,t,s){return s(function(){Li(t)&&zi(e)})}function Li(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!fn(e,s)}catch(Ue){return!0}}function zi(e){var t=Ur(e,1);null!==t&&uc(t,e,1,-1)}function Ii(e){var t=Si();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},t.queue=e,e=e.dispatch=sl.bind(null,xi,e),[t.memoizedState,e]}function Fi(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},null===(t=xi.updateQueue)?(t={lastEffect:null,stores:null},xi.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e),e}function $i(){return Ci().memoizedState}function Bi(e,t,s,n){var a=Si();xi.flags|=e,a.memoizedState=Fi(1|t,s,void 0,void 0===n?null:n)}function Vi(e,t,s,n){var a=Ci();n=void 0===n?null:n;var r=void 0;if(null!==fi){var i=fi.memoizedState;if(r=i.destroy,null!==n&&wi(n,i.deps))return void(a.memoizedState=Fi(t,s,r,n))}xi.flags|=e,a.memoizedState=Fi(1|t,s,r,n)}function Ui(e,t){return Bi(8390656,8,e,t)}function Hi(e,t){return Vi(2048,8,e,t)}function Wi(e,t){return Vi(4,2,e,t)}function qi(e,t){return Vi(4,4,e,t)}function Yi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qi(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Vi(4,4,Yi.bind(null,t,e),s)}function Ki(){}function Gi(e,t){var s=Ci();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&wi(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Xi(e,t){var s=Ci();t=void 0===t?null:t;var n=s.memoizedState;return null!==n&&null!==t&&wi(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Ji(e,t,s){return 0===(21&pi)?(e.baseState&&(e.baseState=!1,Cl=!0),e.memoizedState=s):(fn(s,t)||(s=_t(),xi.lanes|=s,Wo|=s,e.baseState=!0),t)}function Zi(e,t){var s=Et;Et=0!==s&&4>s?s:4,e(!0);var n=mi.transition;mi.transition={};try{e(!1),t()}finally{Et=s,mi.transition=n}}function el(){return Ci().memoizedState}function tl(e,t,s){var n=dc(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},nl(e))al(t,s);else if(null!==(s=Vr(e,t,s,n))){uc(s,e,n,cc()),rl(s,t,n)}}function sl(e,t,s){var n=dc(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(nl(e))al(t,a);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=r(i,s);if(a.hasEagerState=!0,a.eagerState=l,fn(l,i)){var o=t.interleaved;return null===o?(a.next=a,Br(t)):(a.next=o.next,o.next=a),void(t.interleaved=a)}}catch(Oe){}null!==(s=Vr(e,t,a,n))&&(uc(s,e,n,a=cc()),rl(s,t,n))}}function nl(e){var t=e.alternate;return e===xi||null!==t&&t===xi}function al(e,t){yi=bi=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function rl(e,t,s){if(0!==(4194240&s)){var n=t.lanes;s|=n&=e.pendingLanes,t.lanes=s,Ct(e,s)}}var il={readContext:Fr,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},ll={readContext:Fr,useCallback:function(e,t){return Si().memoizedState=[e,void 0===t?null:t],e},useContext:Fr,useEffect:Ui,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Bi(4194308,4,Yi.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Bi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bi(4,2,e,t)},useMemo:function(e,t){var s=Si();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Si();return t=void 0!==s?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tl.bind(null,xi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Si().memoizedState=e},useState:Ii,useDebugValue:Ki,useDeferredValue:function(e){return Si().memoizedState=e},useTransition:function(){var e=Ii(!1),t=e[0];return e=Zi.bind(null,e[1]),Si().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=xi,a=Si();if(mr){if(void 0===s)throw Error(r(407));s=s()}else{if(s=t(),null===Io)throw Error(r(349));0!==(30&pi)||Ti(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Ui(Oi.bind(null,n,i,e),[e]),n.flags|=2048,Fi(9,Ri.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=Si(),t=Io.identifierPrefix;if(mr){var s=ir;t=":"+t+"R"+(s=(rr&~(1<<32-xt(rr)-1)).toString(32)+s),0<(s=vi++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=ji++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ol={readContext:Fr,useCallback:Gi,useContext:Fr,useEffect:Hi,useImperativeHandle:Qi,useInsertionEffect:Wi,useLayoutEffect:qi,useMemo:Xi,useReducer:Mi,useRef:$i,useState:function(){return Mi(Ei)},useDebugValue:Ki,useDeferredValue:function(e){return Ji(Ci(),fi.memoizedState,e)},useTransition:function(){return[Mi(Ei)[0],Ci().memoizedState]},useMutableSource:Ai,useSyncExternalStore:Di,useId:el,unstable_isNewReconciler:!1},cl={readContext:Fr,useCallback:Gi,useContext:Fr,useEffect:Hi,useImperativeHandle:Qi,useInsertionEffect:Wi,useLayoutEffect:qi,useMemo:Xi,useReducer:Pi,useRef:$i,useState:function(){return Pi(Ei)},useDebugValue:Ki,useDeferredValue:function(e){var t=Ci();return null===fi?t.memoizedState=e:Ji(t,fi.memoizedState,e)},useTransition:function(){return[Pi(Ei)[0],Ci().memoizedState]},useMutableSource:Ai,useSyncExternalStore:Di,useId:el,unstable_isNewReconciler:!1};function dl(e,t){if(e&&e.defaultProps){for(var s in t=z({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function ul(e,t,s,n){s=null===(s=s(n,t=e.memoizedState))||void 0===s?t:z({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var hl={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=cc(),a=dc(e),r=Yr(n,a);r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=Qr(e,r,a))&&(uc(t,e,a,n),Kr(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=cc(),a=dc(e),r=Yr(n,a);r.tag=1,r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=Qr(e,r,a))&&(uc(t,e,a,n),Kr(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=cc(),n=dc(e),a=Yr(s,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Qr(e,a,n))&&(uc(t,e,n,s),Kr(t,e,n))}};function ml(e,t,s,n,a,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!gn(s,n)||!gn(a,r))}function pl(e,t,s){var n=!1,a=La,r=t.contextType;return"object"===typeof r&&null!==r?r=Fr(r):(a=Ba(t)?Fa:za.current,r=(n=null!==(n=t.contextTypes)&&void 0!==n)?$a(e,a):La),t=new t(s,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=hl,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=r),t}function xl(e,t,s,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&hl.enqueueReplaceState(t,t.state,null)}function fl(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},Wr(e);var r=t.contextType;"object"===typeof r&&null!==r?a.context=Fr(r):(r=Ba(t)?Fa:za.current,a.context=$a(e,r)),a.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(ul(e,t,r,s),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&hl.enqueueReplaceState(a,a.state,null),Xr(e,s,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function gl(e,t){try{var s="",n=t;do{s+=B(n),n=n.return}while(n);var a=s}catch(He){a="\nError generating stack: "+He.message+"\n"+He.stack}return{value:e,source:t,stack:a,digest:null}}function bl(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function yl(e,t){try{console.error(t.value)}catch(Fe){setTimeout(function(){throw Fe})}}var vl="function"===typeof WeakMap?WeakMap:Map;function jl(e,t,s){(s=Yr(-1,s)).tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Zo||(Zo=!0,ec=n),yl(0,t)},s}function Nl(e,t,s){(s=Yr(-1,s)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){yl(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(s.callback=function(){yl(0,t),"function"!==typeof n&&(null===tc?tc=new Set([this]):tc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function wl(e,t,s){var n=e.pingCache;if(null===n){n=e.pingCache=new vl;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=Rc.bind(null,e,t,s),t.then(e,e))}function _l(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function kl(e,t,s,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Yr(-1,1)).tag=2,Qr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var Sl=v.ReactCurrentOwner,Cl=!1;function El(e,t,s,n){t.child=null===e?Pr(t,null,s,n):Mr(t,e.child,s,n)}function Ml(e,t,s,n,a){s=s.render;var r=t.ref;return Ir(t,a),n=_i(e,t,s,n,r,a),s=ki(),null===e||Cl?(mr&&s&&cr(t),t.flags|=1,El(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Jl(e,t,a))}function Pl(e,t,s,n,a){if(null===e){var r=s.type;return"function"!==typeof r||Bc(r)||void 0!==r.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Uc(s.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Al(e,t,r,n,a))}if(r=e.child,0===(e.lanes&a)){var i=r.memoizedProps;if((s=null!==(s=s.compare)?s:gn)(i,n)&&e.ref===t.ref)return Jl(e,t,a)}return t.flags|=1,(e=Vc(r,n)).ref=t.ref,e.return=t,t.child=e}function Al(e,t,s,n,a){if(null!==e){var r=e.memoizedProps;if(gn(r,n)&&e.ref===t.ref){if(Cl=!1,t.pendingProps=n=r,0===(e.lanes&a))return t.lanes=e.lanes,Jl(e,t,a);0!==(131072&e.flags)&&(Cl=!0)}}return Rl(e,t,s,n,a)}function Dl(e,t,s){var n=t.pendingProps,a=n.children,r=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oa(Vo,Bo),Bo|=s;else{if(0===(1073741824&s))return e=null!==r?r.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oa(Vo,Bo),Bo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==r?r.baseLanes:s,Oa(Vo,Bo),Bo|=n}else null!==r?(n=r.baseLanes|s,t.memoizedState=null):n=s,Oa(Vo,Bo),Bo|=n;return El(e,t,a,s),t.child}function Tl(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Rl(e,t,s,n,a){var r=Ba(s)?Fa:za.current;return r=$a(t,r),Ir(t,a),s=_i(e,t,s,n,r,a),n=ki(),null===e||Cl?(mr&&n&&cr(t),t.flags|=1,El(e,t,s,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Jl(e,t,a))}function Ol(e,t,s,n,a){if(Ba(s)){var r=!0;Wa(t)}else r=!1;if(Ir(t,a),null===t.stateNode)Xl(e,t),pl(t,s,n),fl(t,s,n,a),n=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=s.contextType;"object"===typeof c&&null!==c?c=Fr(c):c=$a(t,c=Ba(s)?Fa:za.current);var d=s.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==n||o!==c)&&xl(t,i,n,c),Hr=!1;var h=t.memoizedState;i.state=h,Xr(t,n,i,a),o=t.memoizedState,l!==n||h!==o||Ia.current||Hr?("function"===typeof d&&(ul(t,s,d,n),o=t.memoizedState),(l=Hr||ml(t,s,l,n,h,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=o),i.props=n,i.state=o,i.context=c,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,qr(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:dl(t.type,l),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(o=s.contextType)&&null!==o?o=Fr(o):o=$a(t,o=Ba(s)?Fa:za.current);var m=s.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||h!==o)&&xl(t,i,n,o),Hr=!1,h=t.memoizedState,i.state=h,Xr(t,n,i,a);var p=t.memoizedState;l!==u||h!==p||Ia.current||Hr?("function"===typeof m&&(ul(t,s,m,n),p=t.memoizedState),(c=Hr||ml(t,s,c,n,h,p,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,p,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,p,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),i.props=n,i.state=p,i.context=o,n=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ll(e,t,s,n,r,a)}function Ll(e,t,s,n,a,r){Tl(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&qa(t,s,!1),Jl(e,t,r);n=t.stateNode,Sl.current=t;var l=i&&"function"!==typeof s.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=Mr(t,e.child,null,r),t.child=Mr(t,null,l,r)):El(e,t,l,r),t.memoizedState=n.state,a&&qa(t,s,!0),t.child}function zl(e){var t=e.stateNode;t.pendingContext?Ua(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ua(0,t.context,!1),ai(e,t.containerInfo)}function Il(e,t,s,n,a){return Nr(),wr(a),t.flags|=256,El(e,t,s,n),t.child}var Fl,$l,Bl,Vl,Ul={dehydrated:null,treeContext:null,retryLane:0};function Hl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wl(e,t,s){var n,a=t.pendingProps,i=oi.current,l=!1,o=0!==(128&t.flags);if((n=o)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Oa(oi,1&i),null===e)return br(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=a.children,e=a.fallback,l?(a=t.mode,l=t.child,o={mode:"hidden",children:o},0===(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Wc(o,a,0,null),e=Hc(e,a,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Hl(s),t.memoizedState=Ul,e):ql(t,o));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,s,n,a,i,l){if(s)return 256&t.flags?(t.flags&=-257,Yl(e,t,l,n=bl(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Wc({mode:"visible",children:n.children},a,0,null),(i=Hc(i,a,l,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&Mr(t,e.child,null,l),t.child.memoizedState=Hl(l),t.memoizedState=Ul,i);if(0===(1&t.mode))return Yl(e,t,l,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var o=n.dgst;return n=o,Yl(e,t,l,n=bl(i=Error(r(419)),n,void 0))}if(o=0!==(l&e.childLanes),Cl||o){if(null!==(n=Io)){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|l))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ur(e,a),uc(n,e,a,-1))}return _c(),Yl(e,t,l,n=bl(Error(r(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Lc.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,hr=ba(a.nextSibling),ur=t,mr=!0,pr=null,null!==e&&(sr[nr++]=rr,sr[nr++]=ir,sr[nr++]=ar,rr=e.id,ir=e.overflow,ar=t),t=ql(t,n.children),t.flags|=4096,t)}(e,t,o,a,n,i,s);if(l){l=a.fallback,o=t.mode,n=(i=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&o)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Vc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==n?l=Vc(n,l):(l=Hc(l,o,s,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,o=null===(o=e.child.memoizedState)?Hl(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~s,t.memoizedState=Ul,a}return e=(l=e.child).sibling,a=Vc(l,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=s),a.return=t,a.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=a,t.memoizedState=null,a}function ql(e,t){return(t=Wc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Yl(e,t,s,n){return null!==n&&wr(n),Mr(t,e.child,null,s),(e=ql(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ql(e,t,s){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),zr(e.return,t,s)}function Kl(e,t,s,n,a){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=s,r.tailMode=a)}function Gl(e,t,s){var n=t.pendingProps,a=n.revealOrder,r=n.tail;if(El(e,t,n.children,s),0!==(2&(n=oi.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ql(e,s,t);else if(19===e.tag)Ql(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Oa(oi,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;null!==s;)null!==(e=s.alternate)&&null===ci(e)&&(a=s),s=s.sibling;null===(s=a)?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Kl(t,!1,a,s,r);break;case"backwards":for(s=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ci(e)){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Kl(t,!0,s,null,r);break;case"together":Kl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jl(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Wo|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(s=Vc(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Vc(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Zl(e,t){if(!mr)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;null!==s;)null!==s.alternate&&(n=s),s=s.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function eo(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;null!==a;)s|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function to(e,t,s){var n=t.pendingProps;switch(dr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eo(t),null;case 1:case 17:return Ba(t.type)&&Va(),eo(t),null;case 3:return n=t.stateNode,ri(),Ra(Ia),Ra(za),ui(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==pr&&(xc(pr),pr=null))),$l(e,t),eo(t),null;case 5:li(t);var a=ni(si.current);if(s=t.type,null!==e&&null!=t.stateNode)Bl(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(r(166));return eo(t),null}if(e=ni(ei.current),vr(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[ja]=t,n[Na]=i,e=0!==(1&t.mode),s){case"dialog":Qn("cancel",n),Qn("close",n);break;case"iframe":case"object":case"embed":Qn("load",n);break;case"video":case"audio":for(a=0;a<Hn.length;a++)Qn(Hn[a],n);break;case"source":Qn("error",n);break;case"img":case"image":case"link":Qn("error",n),Qn("load",n);break;case"details":Qn("toggle",n);break;case"input":G(n,i),Qn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Qn("invalid",n);break;case"textarea":ae(n,i),Qn("invalid",n)}for(var o in ge(s,i),a=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?n.textContent!==c&&(!0!==i.suppressHydrationWarning&&la(n.textContent,c,e),a=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&la(n.textContent,c,e),a=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Qn("scroll",n)}switch(s){case"input":q(n),Z(n,i,!0);break;case"textarea":q(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=oa)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{o=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),"select"===s&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[ja]=t,e[Na]=n,Fl(e,t,!1,!1),t.stateNode=e;e:{switch(o=be(s,n),s){case"dialog":Qn("cancel",e),Qn("close",e),a=n;break;case"iframe":case"object":case"embed":Qn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Hn.length;a++)Qn(Hn[a],e);a=n;break;case"source":Qn("error",e),a=n;break;case"img":case"image":case"link":Qn("error",e),Qn("load",e),a=n;break;case"details":Qn("toggle",e),a=n;break;case"input":G(e,n),a=K(e,n),Qn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=z({},n,{value:void 0}),Qn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Qn("invalid",e)}for(i in ge(s,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&de(e,d):"children"===i?"string"===typeof d?("textarea"!==s||""!==d)&&ue(e,d):"number"===typeof d&&ue(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Qn("scroll",e):null!=d&&y(e,i,d,o))}switch(s){case"input":q(e),Z(e,n,!1);break;case"textarea":q(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+H(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?se(e,!!n.multiple,i,!1):null!=n.defaultValue&&se(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=oa)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return eo(t),null;case 6:if(e&&null!=t.stateNode)Vl(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(r(166));if(s=ni(si.current),ni(ei.current),vr(t)){if(n=t.stateNode,s=t.memoizedProps,n[ja]=t,(i=n.nodeValue!==s)&&null!==(e=ur))switch(e.tag){case 3:la(n.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&la(n.nodeValue,s,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===s.nodeType?s:s.ownerDocument).createTextNode(n))[ja]=t,t.stateNode=n}return eo(t),null;case 13:if(Ra(oi),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(mr&&null!==hr&&0!==(1&t.mode)&&0===(128&t.flags))jr(),Nr(),t.flags|=98560,i=!1;else if(i=vr(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[ja]=t}else Nr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;eo(t),i=!1}else null!==pr&&(xc(pr),pr=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&oi.current)?0===Uo&&(Uo=3):_c())),null!==t.updateQueue&&(t.flags|=4),eo(t),null);case 4:return ri(),$l(e,t),null===e&&Xn(t.stateNode.containerInfo),eo(t),null;case 10:return Lr(t.type._context),eo(t),null;case 19:if(Ra(oi),null===(i=t.memoizedState))return eo(t),null;if(n=0!==(128&t.flags),null===(o=i.rendering))if(n)Zl(i,!1);else{if(0!==Uo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ci(e))){for(t.flags|=128,Zl(i,!1),null!==(n=o.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;null!==s;)e=n,(i=s).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Oa(oi,1&oi.current|2),t.child}e=e.sibling}null!==i.tail&&rt()>Xo&&(t.flags|=128,n=!0,Zl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ci(o))){if(t.flags|=128,n=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Zl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!mr)return eo(t),null}else 2*rt()-i.renderingStartTime>Xo&&1073741824!==s&&(t.flags|=128,n=!0,Zl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=i.last)?s.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,s=oi.current,Oa(oi,n?1&s|2:1&s),t):(eo(t),null);case 22:case 23:return vc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Bo)&&(eo(t),6&t.subtreeFlags&&(t.flags|=8192)):eo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function so(e,t){switch(dr(t),t.tag){case 1:return Ba(t.type)&&Va(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ri(),Ra(Ia),Ra(za),ui(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return li(t),null;case 13:if(Ra(oi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));Nr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ra(oi),null;case 4:return ri(),null;case 10:return Lr(t.type._context),null;case 22:case 23:return vc(),null;default:return null}}Fl=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},$l=function(){},Bl=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ni(ei.current);var r,i=null;switch(s){case"input":a=K(e,a),n=K(e,n),i=[];break;case"select":a=z({},a,{value:void 0}),n=z({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=oa)}for(d in ge(s,n),s=null,a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var o=a[d];for(r in o)o.hasOwnProperty(r)&&(s||(s={}),s[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(o=null!=a?a[d]:void 0,n.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(r in o)!o.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(s||(s={}),s[r]="");for(r in c)c.hasOwnProperty(r)&&o[r]!==c[r]&&(s||(s={}),s[r]=c[r])}else s||(i||(i=[]),i.push(d,s)),s=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Qn("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Vl=function(e,t,s,n){s!==n&&(t.flags|=4)};var no=!1,ao=!1,ro="function"===typeof WeakSet?WeakSet:Set,io=null;function lo(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(Ue){Tc(e,t,Ue)}else s.current=null}function oo(e,t,s){try{s()}catch(Ue){Tc(e,t,Ue)}}var co=!1;function uo(e,t,s){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var r=a.destroy;a.destroy=void 0,void 0!==r&&oo(t,s,r)}a=a.next}while(a!==n)}}function ho(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function mo(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function po(e){var t=e.alternate;null!==t&&(e.alternate=null,po(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ja],delete t[Na],delete t[_a],delete t[ka],delete t[Sa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xo(e){return 5===e.tag||3===e.tag||4===e.tag}function fo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function go(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=oa));else if(4!==n&&null!==(e=e.child))for(go(e,t,s),e=e.sibling;null!==e;)go(e,t,s),e=e.sibling}function bo(e,t,s){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==n&&null!==(e=e.child))for(bo(e,t,s),e=e.sibling;null!==e;)bo(e,t,s),e=e.sibling}var yo=null,vo=!1;function jo(e,t,s){for(s=s.child;null!==s;)No(e,t,s),s=s.sibling}function No(e,t,s){if(pt&&"function"===typeof pt.onCommitFiberUnmount)try{pt.onCommitFiberUnmount(mt,s)}catch(qe){}switch(s.tag){case 5:ao||lo(s,t);case 6:var n=yo,a=vo;yo=null,jo(e,t,s),vo=a,null!==(yo=n)&&(vo?(e=yo,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):yo.removeChild(s.stateNode));break;case 18:null!==yo&&(vo?(e=yo,s=s.stateNode,8===e.nodeType?ga(e.parentNode,s):1===e.nodeType&&ga(e,s),Xt(e)):ga(yo,s.stateNode));break;case 4:n=yo,a=vo,yo=s.stateNode.containerInfo,vo=!0,jo(e,t,s),yo=n,vo=a;break;case 0:case 11:case 14:case 15:if(!ao&&(null!==(n=s.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var r=a,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&oo(s,t,i),a=a.next}while(a!==n)}jo(e,t,s);break;case 1:if(!ao&&(lo(s,t),"function"===typeof(n=s.stateNode).componentWillUnmount))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(qe){Tc(s,t,qe)}jo(e,t,s);break;case 21:jo(e,t,s);break;case 22:1&s.mode?(ao=(n=ao)||null!==s.memoizedState,jo(e,t,s),ao=n):jo(e,t,s);break;default:jo(e,t,s)}}function wo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new ro),t.forEach(function(t){var n=zc.bind(null,e,t);s.has(t)||(s.add(t),t.then(n,n))})}}function _o(e,t){var s=t.deletions;if(null!==s)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:yo=o.stateNode,vo=!1;break e;case 3:case 4:yo=o.stateNode.containerInfo,vo=!0;break e}o=o.return}if(null===yo)throw Error(r(160));No(i,l,a),yo=null,vo=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(Oe){Tc(a,t,Oe)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ko(t,e),t=t.sibling}function ko(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_o(t,e),So(e),4&n){try{uo(3,e,e.return),ho(3,e)}catch(Re){Tc(e,e.return,Re)}try{uo(5,e,e.return)}catch(Re){Tc(e,e.return,Re)}}break;case 1:_o(t,e),So(e),512&n&&null!==s&&lo(s,s.return);break;case 5:if(_o(t,e),So(e),512&n&&null!==s&&lo(s,s.return),32&e.flags){var a=e.stateNode;try{ue(a,"")}catch(Re){Tc(e,e.return,Re)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,l=null!==s?s.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&X(a,i),be(o,l);var d=be(o,i);for(l=0;l<c.length;l+=2){var u=c[l],h=c[l+1];"style"===u?xe(a,h):"dangerouslySetInnerHTML"===u?de(a,h):"children"===u?ue(a,h):y(a,u,h,d)}switch(o){case"input":J(a,i);break;case"textarea":re(a,i);break;case"select":var m=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?se(a,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?se(a,!!i.multiple,i.defaultValue,!0):se(a,!!i.multiple,i.multiple?[]:"",!1))}a[Na]=i}catch(Re){Tc(e,e.return,Re)}}break;case 6:if(_o(t,e),So(e),4&n){if(null===e.stateNode)throw Error(r(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(Re){Tc(e,e.return,Re)}}break;case 3:if(_o(t,e),So(e),4&n&&null!==s&&s.memoizedState.isDehydrated)try{Xt(t.containerInfo)}catch(Re){Tc(e,e.return,Re)}break;case 4:default:_o(t,e),So(e);break;case 13:_o(t,e),So(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Go=rt())),4&n&&wo(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(ao=(d=ao)||u,_o(t,e),ao=d):_o(t,e),So(e),8192&n){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(io=e,u=e.child;null!==u;){for(h=io=u;null!==io;){switch(p=(m=io).child,m.tag){case 0:case 11:case 14:case 15:uo(4,m,m.return);break;case 1:lo(m,m.return);var x=m.stateNode;if("function"===typeof x.componentWillUnmount){n=m,s=m.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(Re){Tc(n,s,Re)}}break;case 5:lo(m,m.return);break;case 22:if(null!==m.memoizedState){Po(h);continue}}null!==p?(p.return=m,io=p):Po(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{a=h.stateNode,d?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=h.stateNode,l=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=pe("display",l))}catch(Re){Tc(e,e.return,Re)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(Re){Tc(e,e.return,Re)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_o(t,e),So(e),4&n&&wo(e);case 21:}}function So(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(xo(s)){var n=s;break e}s=s.return}throw Error(r(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(ue(a,""),n.flags&=-33),bo(e,fo(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;go(e,fo(e),i);break;default:throw Error(r(161))}}catch(ut){Tc(e,e.return,ut)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Co(e,t,s){io=e,Eo(e,t,s)}function Eo(e,t,s){for(var n=0!==(1&e.mode);null!==io;){var a=io,r=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||no;if(!i){var l=a.alternate,o=null!==l&&null!==l.memoizedState||ao;l=no;var c=ao;if(no=i,(ao=o)&&!c)for(io=a;null!==io;)o=(i=io).child,22===i.tag&&null!==i.memoizedState?Ao(a):null!==o?(o.return=i,io=o):Ao(a);for(;null!==r;)io=r,Eo(r,t,s),r=r.sibling;io=a,no=l,ao=c}Mo(e)}else 0!==(8772&a.subtreeFlags)&&null!==r?(r.return=a,io=r):Mo(e)}}function Mo(e){for(;null!==io;){var t=io;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ao||ho(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!ao)if(null===s)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:dl(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Jr(t,i,n);break;case 3:var l=t.updateQueue;if(null!==l){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}Jr(t,l,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Xt(h)}}}break;default:throw Error(r(163))}ao||512&t.flags&&mo(t)}catch(m){Tc(t,t.return,m)}}if(t===e){io=null;break}if(null!==(s=t.sibling)){s.return=t.return,io=s;break}io=t.return}}function Po(e){for(;null!==io;){var t=io;if(t===e){io=null;break}var s=t.sibling;if(null!==s){s.return=t.return,io=s;break}io=t.return}}function Ao(e){for(;null!==io;){var t=io;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{ho(4,t)}catch(ut){Tc(t,s,ut)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(ut){Tc(t,a,ut)}}var r=t.return;try{mo(t)}catch(ut){Tc(t,r,ut)}break;case 5:var i=t.return;try{mo(t)}catch(ut){Tc(t,i,ut)}}}catch(ut){Tc(t,t.return,ut)}if(t===e){io=null;break}var l=t.sibling;if(null!==l){l.return=t.return,io=l;break}io=t.return}}var Do,To=Math.ceil,Ro=v.ReactCurrentDispatcher,Oo=v.ReactCurrentOwner,Lo=v.ReactCurrentBatchConfig,zo=0,Io=null,Fo=null,$o=0,Bo=0,Vo=Ta(0),Uo=0,Ho=null,Wo=0,qo=0,Yo=0,Qo=null,Ko=null,Go=0,Xo=1/0,Jo=null,Zo=!1,ec=null,tc=null,sc=!1,nc=null,ac=0,rc=0,ic=null,lc=-1,oc=0;function cc(){return 0!==(6&zo)?rt():-1!==lc?lc:lc=rt()}function dc(e){return 0===(1&e.mode)?1:0!==(2&zo)&&0!==$o?$o&-$o:null!==_r.transition?(0===oc&&(oc=_t()),oc):0!==(e=Et)?e:e=void 0===(e=window.event)?16:rs(e.type)}function uc(e,t,s,n){if(50<rc)throw rc=0,ic=null,Error(r(185));St(e,s,n),0!==(2&zo)&&e===Io||(e===Io&&(0===(2&zo)&&(qo|=s),4===Uo&&fc(e,$o)),hc(e,n),1===s&&0===zo&&0===(1&t.mode)&&(Xo=rt()+500,Qa&&Xa()))}function hc(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-xt(r),l=1<<i,o=a[i];-1===o?0!==(l&s)&&0===(l&n)||(a[i]=Nt(l,t)):o<=t&&(e.expiredLanes|=l),r&=~l}}(e,t);var n=jt(e,e===Io?$o:0);if(0===n)null!==s&&st(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=s&&st(s),1===t)0===e.tag?function(e){Qa=!0,Ga(e)}(gc.bind(null,e)):Ga(gc.bind(null,e)),xa(function(){0===(6&zo)&&Xa()}),s=null;else{switch(Mt(n)){case 1:s=lt;break;case 4:s=ot;break;case 16:default:s=ct;break;case 536870912:s=ht}s=Ic(s,mc.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function mc(e,t){if(lc=-1,oc=0,0!==(6&zo))throw Error(r(327));var s=e.callbackNode;if(Ac()&&e.callbackNode!==s)return null;var n=jt(e,e===Io?$o:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=kc(e,n);else{t=n;var a=zo;zo|=2;var i=wc();for(Io===e&&$o===t||(Jo=null,Xo=rt()+500,jc(e,t));;)try{Cc();break}catch(qe){Nc(e,qe)}Or(),Ro.current=i,zo=a,null!==Fo?t=0:(Io=null,$o=0,t=Uo)}if(0!==t){if(2===t&&(0!==(a=wt(e))&&(n=a,t=pc(e,a))),1===t)throw s=Ho,jc(e,0),fc(e,n),hc(e,rt()),s;if(6===t)fc(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var n=0;n<s.length;n++){var a=s[n],r=a.getSnapshot;a=a.value;try{if(!fn(r(),a))return!1}catch(l){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=kc(e,n))&&(0!==(i=wt(e))&&(n=i,t=pc(e,i))),1===t))throw s=Ho,jc(e,0),fc(e,n),hc(e,rt()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(r(345));case 2:case 5:Pc(e,Ko,Jo);break;case 3:if(fc(e,n),(130023424&n)===n&&10<(t=Go+500-rt())){if(0!==jt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){cc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ha(Pc.bind(null,e,Ko,Jo),t);break}Pc(e,Ko,Jo);break;case 4:if(fc(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-xt(n);i=1<<l,(l=t[l])>a&&(a=l),n&=~i}if(n=a,10<(n=(120>(n=rt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*To(n/1960))-n)){e.timeoutHandle=ha(Pc.bind(null,e,Ko,Jo),n);break}Pc(e,Ko,Jo);break;default:throw Error(r(329))}}}return hc(e,rt()),e.callbackNode===s?mc.bind(null,e):null}function pc(e,t){var s=Qo;return e.current.memoizedState.isDehydrated&&(jc(e,t).flags|=256),2!==(e=kc(e,t))&&(t=Ko,Ko=s,null!==t&&xc(t)),e}function xc(e){null===Ko?Ko=e:Ko.push.apply(Ko,e)}function fc(e,t){for(t&=~Yo,t&=~qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-xt(t),n=1<<s;e[s]=-1,t&=~n}}function gc(e){if(0!==(6&zo))throw Error(r(327));Ac();var t=jt(e,0);if(0===(1&t))return hc(e,rt()),null;var s=kc(e,t);if(0!==e.tag&&2===s){var n=wt(e);0!==n&&(t=n,s=pc(e,n))}if(1===s)throw s=Ho,jc(e,0),fc(e,t),hc(e,rt()),s;if(6===s)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pc(e,Ko,Jo),hc(e,rt()),null}function bc(e,t){var s=zo;zo|=1;try{return e(t)}finally{0===(zo=s)&&(Xo=rt()+500,Qa&&Xa())}}function yc(e){null!==nc&&0===nc.tag&&0===(6&zo)&&Ac();var t=zo;zo|=1;var s=Lo.transition,n=Et;try{if(Lo.transition=null,Et=1,e)return e()}finally{Et=n,Lo.transition=s,0===(6&(zo=t))&&Xa()}}function vc(){Bo=Vo.current,Ra(Vo)}function jc(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,ma(s)),null!==Fo)for(s=Fo.return;null!==s;){var n=s;switch(dr(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Va();break;case 3:ri(),Ra(Ia),Ra(za),ui();break;case 5:li(n);break;case 4:ri();break;case 13:case 19:Ra(oi);break;case 10:Lr(n.type._context);break;case 22:case 23:vc()}s=s.return}if(Io=e,Fo=e=Vc(e.current,null),$o=Bo=t,Uo=0,Ho=null,Yo=qo=Wo=0,Ko=Qo=null,null!==$r){for(t=0;t<$r.length;t++)if(null!==(n=(s=$r[t]).interleaved)){s.interleaved=null;var a=n.next,r=s.pending;if(null!==r){var i=r.next;r.next=a,n.next=i}s.pending=n}$r=null}return e}function Nc(e,t){for(;;){var s=Fo;try{if(Or(),hi.current=il,bi){for(var n=xi.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}bi=!1}if(pi=0,gi=fi=xi=null,yi=!1,vi=0,Oo.current=null,null===s||null===s.return){Uo=1,Ho=t,Fo=null;break}e:{var i=e,l=s.return,o=s,c=t;if(t=$o,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=_l(l);if(null!==p){p.flags&=-257,kl(p,l,o,0,t),1&p.mode&&wl(i,d,t),c=d;var x=(t=p).updateQueue;if(null===x){var f=new Set;f.add(c),t.updateQueue=f}else x.add(c);break e}if(0===(1&t)){wl(i,d,t),_c();break e}c=Error(r(426))}else if(mr&&1&o.mode){var g=_l(l);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),kl(g,l,o,0,t),wr(gl(c,o));break e}}i=c=gl(c,o),4!==Uo&&(Uo=2),null===Qo?Qo=[i]:Qo.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Gr(i,jl(0,c,t));break e;case 1:o=c;var b=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===tc||!tc.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,Gr(i,Nl(i,o,t));break e}}i=i.return}while(null!==i)}Mc(s)}catch(v){t=v,Fo===s&&null!==s&&(Fo=s=s.return);continue}break}}function wc(){var e=Ro.current;return Ro.current=il,null===e?il:e}function _c(){0!==Uo&&3!==Uo&&2!==Uo||(Uo=4),null===Io||0===(268435455&Wo)&&0===(268435455&qo)||fc(Io,$o)}function kc(e,t){var s=zo;zo|=2;var n=wc();for(Io===e&&$o===t||(Jo=null,jc(e,t));;)try{Sc();break}catch(Te){Nc(e,Te)}if(Or(),zo=s,Ro.current=n,null!==Fo)throw Error(r(261));return Io=null,$o=0,Uo}function Sc(){for(;null!==Fo;)Ec(Fo)}function Cc(){for(;null!==Fo&&!nt();)Ec(Fo)}function Ec(e){var t=Do(e.alternate,e,Bo);e.memoizedProps=e.pendingProps,null===t?Mc(e):Fo=t,Oo.current=null}function Mc(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=to(s,t,Bo)))return void(Fo=s)}else{if(null!==(s=so(s,t)))return s.flags&=32767,void(Fo=s);if(null===e)return Uo=6,void(Fo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Fo=t);Fo=t=e}while(null!==t);0===Uo&&(Uo=5)}function Pc(e,t,s){var n=Et,a=Lo.transition;try{Lo.transition=null,Et=1,function(e,t,s,n){do{Ac()}while(null!==nc);if(0!==(6&zo))throw Error(r(327));s=e.finishedWork;var a=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-xt(s),r=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~r}}(e,i),e===Io&&(Fo=Io=null,$o=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||sc||(sc=!0,Ic(ct,function(){return Ac(),null})),i=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||i){i=Lo.transition,Lo.transition=null;var l=Et;Et=1;var o=zo;zo|=4,Oo.current=null,function(e,t){if(ca=Zt,Nn(e=jn())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(n&&0!==n.rangeCount){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch(Ke){s=null;break e}var l=0,o=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==s||0!==a&&3!==h.nodeType||(o=l+a),h!==i||0!==n&&3!==h.nodeType||(c=l+n),3===h.nodeType&&(l+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===s&&++d===a&&(o=l),m===i&&++u===n&&(c=l),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}s=-1===o||-1===c?null:{start:o,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(da={focusedElem:e,selectionRange:s},Zt=!1,io=t;null!==io;)if(e=(t=io).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,io=e;else for(;null!==io;){t=io;try{var x=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,g=x.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?f:dl(t.type,f),g);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(r(163))}}catch(Ke){Tc(t,t.return,Ke)}if(null!==(e=t.sibling)){e.return=t.return,io=e;break}io=t.return}x=co,co=!1}(e,s),ko(s,e),wn(da),Zt=!!ca,da=ca=null,e.current=s,Co(s,e,a),at(),zo=o,Et=l,Lo.transition=i}else e.current=s;if(sc&&(sc=!1,nc=e,ac=a),i=e.pendingLanes,0===i&&(tc=null),function(e){if(pt&&"function"===typeof pt.onCommitFiberRoot)try{pt.onCommitFiberRoot(mt,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),hc(e,rt()),null!==t)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Zo)throw Zo=!1,e=ec,ec=null,e;0!==(1&ac)&&0!==e.tag&&Ac(),i=e.pendingLanes,0!==(1&i)?e===ic?rc++:(rc=0,ic=e):rc=0,Xa()}(e,t,s,n)}finally{Lo.transition=a,Et=n}return null}function Ac(){if(null!==nc){var e=Mt(ac),t=Lo.transition,s=Et;try{if(Lo.transition=null,Et=16>e?16:e,null===nc)var n=!1;else{if(e=nc,nc=null,ac=0,0!==(6&zo))throw Error(r(331));var a=zo;for(zo|=4,io=e.current;null!==io;){var i=io,l=i.child;if(0!==(16&io.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(io=d;null!==io;){var u=io;switch(u.tag){case 0:case 11:case 15:uo(8,u,i)}var h=u.child;if(null!==h)h.return=u,io=h;else for(;null!==io;){var m=(u=io).sibling,p=u.return;if(po(u),u===d){io=null;break}if(null!==m){m.return=p,io=m;break}io=p}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(null!==f)}}io=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,io=l;else e:for(;null!==io;){if(0!==(2048&(i=io).flags))switch(i.tag){case 0:case 11:case 15:uo(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,io=b;break e}io=i.return}}var y=e.current;for(io=y;null!==io;){var v=(l=io).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,io=v;else e:for(l=y;null!==io;){if(0!==(2048&(o=io).flags))try{switch(o.tag){case 0:case 11:case 15:ho(9,o)}}catch(N){Tc(o,o.return,N)}if(o===l){io=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,io=j;break e}io=o.return}}if(zo=a,Xa(),pt&&"function"===typeof pt.onPostCommitFiberRoot)try{pt.onPostCommitFiberRoot(mt,e)}catch(N){}n=!0}return n}finally{Et=s,Lo.transition=t}}return!1}function Dc(e,t,s){e=Qr(e,t=jl(0,t=gl(s,t),1),1),t=cc(),null!==e&&(St(e,1,t),hc(e,t))}function Tc(e,t,s){if(3===e.tag)Dc(e,e,s);else for(;null!==t;){if(3===t.tag){Dc(t,e,s);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===tc||!tc.has(n))){t=Qr(t,e=Nl(t,e=gl(s,e),1),1),e=cc(),null!==t&&(St(t,1,e),hc(t,e));break}}t=t.return}}function Rc(e,t,s){var n=e.pingCache;null!==n&&n.delete(t),t=cc(),e.pingedLanes|=e.suspendedLanes&s,Io===e&&($o&s)===s&&(4===Uo||3===Uo&&(130023424&$o)===$o&&500>rt()-Go?jc(e,0):Yo|=s),hc(e,t)}function Oc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=yt,0===(130023424&(yt<<=1))&&(yt=4194304)));var s=cc();null!==(e=Ur(e,t))&&(St(e,t,s),hc(e,s))}function Lc(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Oc(e,s)}function zc(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(r(314))}null!==n&&n.delete(t),Oc(e,s)}function Ic(e,t){return tt(e,t)}function Fc(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(e,t,s,n){return new Fc(e,t,s,n)}function Bc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vc(e,t){var s=e.alternate;return null===s?((s=$c(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Uc(e,t,s,n,a,i){var l=2;if(n=e,"function"===typeof e)Bc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Hc(s.children,a,i,t);case _:l=8,a|=8;break;case k:return(e=$c(12,s,t,2|a)).elementType=k,e.lanes=i,e;case M:return(e=$c(13,s,t,a)).elementType=M,e.lanes=i,e;case P:return(e=$c(19,s,t,a)).elementType=P,e.lanes=i,e;case T:return Wc(s,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:l=10;break e;case C:l=9;break e;case E:l=11;break e;case A:l=14;break e;case D:l=16,n=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=$c(l,s,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Hc(e,t,s,n){return(e=$c(7,e,n,t)).lanes=s,e}function Wc(e,t,s,n){return(e=$c(22,e,n,t)).elementType=T,e.lanes=s,e.stateNode={isHidden:!1},e}function qc(e,t,s){return(e=$c(6,e,null,t)).lanes=s,e}function Yc(e,t,s){return(t=$c(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qc(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kt(0),this.expirationTimes=kt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Kc(e,t,s,n,a,r,i,l,o){return e=new Qc(e,t,s,l,o),1===t?(t=1,!0===r&&(t|=8)):t=0,r=$c(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wr(r),e}function Gc(e){if(!e)return La;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ba(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var s=e.type;if(Ba(s))return Ha(e,s,t)}return t}function Xc(e,t,s,n,a,r,i,l,o){return(e=Kc(s,n,!0,e,0,r,0,l,o)).context=Gc(null),s=e.current,(r=Yr(n=cc(),a=dc(s))).callback=void 0!==t&&null!==t?t:null,Qr(s,r,a),e.current.lanes=a,St(e,a,n),hc(e,n),e}function Jc(e,t,s,n){var a=t.current,r=cc(),i=dc(a);return s=Gc(s),null===t.context?t.context=s:t.pendingContext=s,(t=Yr(r,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Qr(a,t,i))&&(uc(e,a,i,r),Kr(e,a,i)),i}function Zc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ed(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function td(e,t){ed(e,t),(e=e.alternate)&&ed(e,t)}Do=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)Cl=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return Cl=!1,function(e,t,s){switch(t.tag){case 3:zl(t),Nr();break;case 5:ii(t);break;case 1:Ba(t.type)&&Wa(t);break;case 4:ai(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Oa(Ar,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Oa(oi,1&oi.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Wl(e,t,s):(Oa(oi,1&oi.current),null!==(e=Jl(e,t,s))?e.sibling:null);Oa(oi,1&oi.current);break;case 19:if(n=0!==(s&t.childLanes),0!==(128&e.flags)){if(n)return Gl(e,t,s);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oa(oi,oi.current),n)break;return null;case 22:case 23:return t.lanes=0,Dl(e,t,s)}return Jl(e,t,s)}(e,t,s);Cl=0!==(131072&e.flags)}else Cl=!1,mr&&0!==(1048576&t.flags)&&or(t,tr,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Xl(e,t),e=t.pendingProps;var a=$a(t,za.current);Ir(t,s),a=_i(null,t,n,e,a,s);var i=ki();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ba(n)?(i=!0,Wa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Wr(t),a.updater=hl,t.stateNode=a,a._reactInternals=t,fl(t,n,e,s),t=Ll(null,t,n,!0,i,s)):(t.tag=0,mr&&i&&cr(t),El(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Xl(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return Bc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===A)return 14}return 2}(n),e=dl(n,e),a){case 0:t=Rl(null,t,n,e,s);break e;case 1:t=Ol(null,t,n,e,s);break e;case 11:t=Ml(null,t,n,e,s);break e;case 14:t=Pl(null,t,n,dl(n.type,e),s);break e}throw Error(r(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Rl(e,t,n,a=t.elementType===n?a:dl(n,a),s);case 1:return n=t.type,a=t.pendingProps,Ol(e,t,n,a=t.elementType===n?a:dl(n,a),s);case 3:e:{if(zl(t),null===e)throw Error(r(387));n=t.pendingProps,a=(i=t.memoizedState).element,qr(e,t),Xr(t,n,null,s);var l=t.memoizedState;if(n=l.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Il(e,t,n,s,a=gl(Error(r(423)),t));break e}if(n!==a){t=Il(e,t,n,s,a=gl(Error(r(424)),t));break e}for(hr=ba(t.stateNode.containerInfo.firstChild),ur=t,mr=!0,pr=null,s=Pr(t,null,n,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(Nr(),n===a){t=Jl(e,t,s);break e}El(e,t,n,s)}t=t.child}return t;case 5:return ii(t),null===e&&br(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,l=a.children,ua(n,a)?l=null:null!==i&&ua(n,i)&&(t.flags|=32),Tl(e,t),El(e,t,l,s),t.child;case 6:return null===e&&br(t),null;case 13:return Wl(e,t,s);case 4:return ai(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Mr(t,null,n,s):El(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,Ml(e,t,n,a=t.elementType===n?a:dl(n,a),s);case 7:return El(e,t,t.pendingProps,s),t.child;case 8:case 12:return El(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Oa(Ar,n._currentValue),n._currentValue=l,null!==i)if(fn(i.value,l)){if(i.children===a.children&&!Ia.current){t=Jl(e,t,s);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===n){if(1===i.tag){(c=Yr(-1,s&-s)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,null!==(c=i.alternate)&&(c.lanes|=s),zr(i.return,s,t),o.lanes|=s;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(r(341));l.lanes|=s,null!==(o=l.alternate)&&(o.lanes|=s),zr(l,s,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}El(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ir(t,s),n=n(a=Fr(a)),t.flags|=1,El(e,t,n,s),t.child;case 14:return a=dl(n=t.type,t.pendingProps),Pl(e,t,n,a=dl(n.type,a),s);case 15:return Al(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:dl(n,a),Xl(e,t),t.tag=1,Ba(n)?(e=!0,Wa(t)):e=!1,Ir(t,s),pl(t,n,a),fl(t,n,a,s),Ll(null,t,n,!0,e,s);case 19:return Gl(e,t,s);case 22:return Dl(e,t,s)}throw Error(r(156,t.tag))};var sd="function"===typeof reportError?reportError:function(e){console.error(e)};function nd(e){this._internalRoot=e}function ad(e){this._internalRoot=e}function rd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function id(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ld(){}function od(e,t,s,n,a){var r=s._reactRootContainer;if(r){var i=r;if("function"===typeof a){var l=a;a=function(){var e=Zc(i);l.call(e)}}Jc(t,i,e,a)}else i=function(e,t,s,n,a){if(a){if("function"===typeof n){var r=n;n=function(){var e=Zc(i);r.call(e)}}var i=Xc(t,n,e,0,null,!1,0,"",ld);return e._reactRootContainer=i,e[wa]=i.current,Xn(8===e.nodeType?e.parentNode:e),yc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var l=n;n=function(){var e=Zc(o);l.call(e)}}var o=Kc(e,0,!1,null,0,!1,0,"",ld);return e._reactRootContainer=o,e[wa]=o.current,Xn(8===e.nodeType?e.parentNode:e),yc(function(){Jc(t,o,s,n)}),o}(s,t,e,a,n);return Zc(i)}ad.prototype.render=nd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Jc(e,t,null,null)},ad.prototype.unmount=nd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yc(function(){Jc(null,e,null,null)}),t[wa]=null}},ad.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Vt.length&&0!==t&&t<Vt[s].priority;s++);Vt.splice(s,0,e),0===s&&qt(e)}},Pt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=vt(t.pendingLanes);0!==s&&(Ct(t,1|s),hc(t,rt()),0===(6&zo)&&(Xo=rt()+500,Xa()))}break;case 13:yc(function(){var t=Ur(e,1);if(null!==t){var s=cc();uc(t,e,1,s)}}),td(e,1)}},At=function(e){if(13===e.tag){var t=Ur(e,134217728);if(null!==t)uc(t,e,134217728,cc());td(e,134217728)}},Dt=function(e){if(13===e.tag){var t=dc(e),s=Ur(e,t);if(null!==s)uc(s,e,t,cc());td(e,t)}},Tt=function(){return Et},Rt=function(e,t){var s=Et;try{return Et=e,t()}finally{Et=s}},je=function(e,t,s){switch(t){case"input":if(J(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Pa(n);if(!a)throw Error(r(90));Y(n),J(n,a)}}}break;case"textarea":re(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ce=bc,Ee=yc;var cd={usingClientEntryPoint:!1,Events:[Ea,Ma,Pa,ke,Se,bc]},dd={findFiberByHostInstance:Ca,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ud={bundleType:dd.bundleType,version:dd.version,rendererPackageName:dd.rendererPackageName,rendererConfig:dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:dd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{mt=hd.inject(ud),pt=hd}catch(Le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cd,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rd(t))throw Error(r(200));return function(e,t,s){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==n?null:""+n,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!rd(e))throw Error(r(299));var s=!1,n="",a=sd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Kc(e,1,!1,null,0,s,0,n,a),e[wa]=t.current,Xn(8===e.nodeType?e.parentNode:e),new nd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e){return yc(e)},t.hydrate=function(e,t,s){if(!id(t))throw Error(r(200));return od(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!rd(e))throw Error(r(405));var n=null!=s&&s.hydratedSources||null,a=!1,i="",l=sd;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(a=!0),void 0!==s.identifierPrefix&&(i=s.identifierPrefix),void 0!==s.onRecoverableError&&(l=s.onRecoverableError)),t=Xc(t,null,e,1,null!=s?s:null,a,0,i,l),e[wa]=t.current,Xn(e),n)for(e=0;e<n.length;e++)a=(a=(s=n[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new ad(t)},t.render=function(e,t,s){if(!id(t))throw Error(r(200));return od(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!id(e))throw Error(r(40));return!!e._reactRootContainer&&(yc(function(){od(null,null,e,!1,function(){e._reactRootContainer=null,e[wa]=null})}),!0)},t.unstable_batchedUpdates=bc,t.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!id(s))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return od(e,t,s,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,s)=>{e.exports=s(234)},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)}},t={};function s(n){var a=t[n];if(void 0!==a)return a.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,s),r.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var r=Object.create(null);s.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&n;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,s.d(r,i),r}})(),s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};s.r(n),s.d(n,{hasBrowserEnv:()=>Os,hasStandardBrowserEnv:()=>zs,hasStandardBrowserWebWorkerEnv:()=>Is,navigator:()=>Ls,origin:()=>Fs});var a,r=s(43),i=s.t(r,2),l=s(391),o=s(950),c=s.t(o,2);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(a||(a={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Te){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t,s,n){return void 0===s&&(s=null),d({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:s,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function g(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function b(e,t,s,n){void 0===n&&(n={});let{window:r=document.defaultView,v5Compat:i=!1}=n,l=r.history,o=a.Pop,c=null,m=g();function g(){return(l.state||{idx:null}).idx}function b(){o=a.Pop;let e=g(),t=null==e?null:e-m;m=e,c&&c({action:o,location:v.location,delta:t})}function y(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,s="string"===typeof e?e:f(e);return s=s.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+s),new URL(s,t)}null==m&&(m=0,l.replaceState(d({},l.state,{idx:m}),""));let v={get action(){return o},get location(){return e(r,l)},listen(e){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(u,b),c=e,()=>{r.removeEventListener(u,b),c=null}},createHref:e=>t(r,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=a.Push;let n=x(v.location,e,t);s&&s(n,e),m=g()+1;let d=p(n,m),u=v.createHref(n);try{l.pushState(d,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;r.location.assign(u)}i&&c&&c({action:o,location:v.location,delta:1})},replace:function(e,t){o=a.Replace;let n=x(v.location,e,t);s&&s(n,e),m=g();let r=p(n,m),d=v.createHref(n);l.replaceState(r,"",d),i&&c&&c({action:o,location:v.location,delta:0})},go:e=>l.go(e)};return v}var y;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(y||(y={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,s){return void 0===s&&(s="/"),j(e,t,s,!1)}function j(e,t,s,n){let a=O(("string"===typeof t?g(t):t).pathname||"/",s);if(null==a)return null;let r=N(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=R(a);i=D(r[l],e,n)}return i}function N(e,t,s,n){void 0===t&&(t=[]),void 0===s&&(s=[]),void 0===n&&(n="");let a=(e,a,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(h(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));let l=$([n,i.relativePath]),o=s.concat(i);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),N(e.children,t,o,l)),(null!=e.path||e.index)&&t.push({path:l,score:A(l,e.index),routesMeta:o})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!=(s=e.path)&&s.includes("?"))for(let n of w(e.path))a(e,t,n);else a(e,t)}),t}function w(e){let t=e.split("/");if(0===t.length)return[];let[s,...n]=t,a=s.endsWith("?"),r=s.replace(/\?$/,"");if(0===n.length)return a?[r,""]:[r];let i=w(n.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),a&&l.push(...i),l.map(t=>e.startsWith("/")&&""===t?"/":t)}const _=/^:[\w-]+$/,k=3,S=2,C=1,E=10,M=-2,P=e=>"*"===e;function A(e,t){let s=e.split("/"),n=s.length;return s.some(P)&&(n+=M),t&&(n+=S),s.filter(e=>!P(e)).reduce((e,t)=>e+(_.test(t)?k:""===t?C:E),n)}function D(e,t,s){void 0===s&&(s=!1);let{routesMeta:n}=e,a={},r="/",i=[];for(let l=0;l<n.length;++l){let e=n[l],o=l===n.length-1,c="/"===r?t:t.slice(r.length)||"/",d=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&s&&!n[n.length-1].route.index&&(d=T({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:$([r,d.pathname]),pathnameBase:B($([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=$([r,d.pathnameBase]))}return i}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=function(e,t,s){void 0===t&&(t=!1);void 0===s&&(s=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(n.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(n.push({paramName:"*"}),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");let r=new RegExp(a,t?void 0:"i");return[r,n]}(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let r=a[0],i=r.replace(/(.)\/+$/,"$1"),l=a.slice(1),o=n.reduce((e,t,s)=>{let{paramName:n,isOptional:a}=t;if("*"===n){let e=l[s]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[s];return e[n]=a&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:r,pathnameBase:i,pattern:e}}function R(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function O(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&"/"!==n?null:e.slice(s)||"/"}function L(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+s+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function I(e,t){let s=z(e);return t?s.map((e,t)=>t===s.length-1?e.pathname:e.pathnameBase):s.map(e=>e.pathnameBase)}function F(e,t,s,n){let a;void 0===n&&(n=!1),"string"===typeof e?a=g(e):(a=d({},e),h(!a.pathname||!a.pathname.includes("?"),L("?","pathname","search",a)),h(!a.pathname||!a.pathname.includes("#"),L("#","pathname","hash",a)),h(!a.search||!a.search.includes("#"),L("#","search","hash",a)));let r,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(null==l)r=s;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let o=function(e,t){void 0===t&&(t="/");let{pathname:s,search:n="",hash:a=""}="string"===typeof e?g(e):e,r=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:r,search:V(n),hash:U(a)}}(a,r),c=l&&"/"!==l&&l.endsWith("/"),u=(i||"."===l)&&s.endsWith("/");return o.pathname.endsWith("/")||!c&&!u||(o.pathname+="/"),o}const $=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",U=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],q=(new Set(W),["get",...W]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Y.apply(this,arguments)}const Q=r.createContext(null);const K=r.createContext(null);const G=r.createContext(null);const X=r.createContext(null);const J=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=r.createContext(null);function ee(){return null!=r.useContext(X)}function te(){return ee()||h(!1),r.useContext(X).location}function se(e){r.useContext(G).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext(J);return e?function(){let{router:e}=me(ue.UseNavigateStable),t=xe(he.UseNavigateStable),s=r.useRef(!1);se(()=>{s.current=!0});let n=r.useCallback(function(n,a){void 0===a&&(a={}),s.current&&("number"===typeof n?e.navigate(n):e.navigate(n,Y({fromRouteId:t},a)))},[e,t]);return n}():function(){ee()||h(!1);let e=r.useContext(Q),{basename:t,future:s,navigator:n}=r.useContext(G),{matches:a}=r.useContext(J),{pathname:i}=te(),l=JSON.stringify(I(a,s.v7_relativeSplatPath)),o=r.useRef(!1);se(()=>{o.current=!0});let c=r.useCallback(function(s,a){if(void 0===a&&(a={}),!o.current)return;if("number"===typeof s)return void n.go(s);let r=F(s,JSON.parse(l),i,"path"===a.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:$([t,r.pathname])),(a.replace?n.replace:n.push)(r,a.state,a)},[t,n,l,i,e]);return c}()}function ae(e,t){let{relative:s}=void 0===t?{}:t,{future:n}=r.useContext(G),{matches:a}=r.useContext(J),{pathname:i}=te(),l=JSON.stringify(I(a,n.v7_relativeSplatPath));return r.useMemo(()=>F(e,JSON.parse(l),i,"path"===s),[e,l,i,s])}function re(e,t,s,n){ee()||h(!1);let{navigator:i}=r.useContext(G),{matches:l}=r.useContext(J),o=l[l.length-1],c=o?o.params:{},d=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,m=te();if(t){var p;let e="string"===typeof t?g(t):t;"/"===d||(null==(p=e.pathname)?void 0:p.startsWith(d))||h(!1),u=e}else u=m;let x=u.pathname||"/",f=x;if("/"!==d){let e=d.replace(/^\//,"").split("/");f="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(e,{pathname:f});let y=de(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:$([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:$([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,s,n);return t&&y?r.createElement(X.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:a.Pop}},y):y}function ie(){let e=function(){var e;let t=r.useContext(Z),s=pe(he.UseRouteError),n=xe(he.UseRouteError);if(void 0!==t)return t;return null==(e=s.errors)?void 0:e[n]}(),t=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:n};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),s?r.createElement("pre",{style:a},s):null,null)}const le=r.createElement(ie,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(J.Provider,{value:this.props.routeContext},r.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:s,children:n}=e,a=r.useContext(Q);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),r.createElement(J.Provider,{value:t},n)}function de(e,t,s,n){var a;if(void 0===t&&(t=[]),void 0===s&&(s=null),void 0===n&&(n=null),null==e){var i;if(!s)return null;if(s.errors)e=s.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!s.initialized&&s.matches.length>0))return null;e=s.matches}}let l=e,o=null==(a=s)?void 0:a.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||h(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:n}=s,a=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||a){c=!0,l=d>=0?l.slice(0,d+1):[l[0]];break}}}return l.reduceRight((e,n,a)=>{let i,u=!1,h=null,m=null;var p;s&&(i=o&&n.route.id?o[n.route.id]:void 0,h=n.route.errorElement||le,c&&(d<0&&0===a?(p="route-fallback",!1||fe[p]||(fe[p]=!0),u=!0,m=null):d===a&&(u=!0,m=n.route.hydrateFallbackElement||null)));let x=t.concat(l.slice(0,a+1)),f=()=>{let t;return t=i?h:u?m:n.route.Component?r.createElement(n.route.Component,null):n.route.element?n.route.element:e,r.createElement(ce,{match:n,routeContext:{outlet:e,matches:x,isDataRoute:null!=s},children:t})};return s&&(n.route.ErrorBoundary||n.route.errorElement||0===a)?r.createElement(oe,{location:s.location,revalidation:s.revalidation,component:h,error:i,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function me(e){let t=r.useContext(Q);return t||h(!1),t}function pe(e){let t=r.useContext(K);return t||h(!1),t}function xe(e){let t=function(){let e=r.useContext(J);return e||h(!1),e}(),s=t.matches[t.matches.length-1];return s.route.id||h(!1),s.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function be(e){let{to:t,replace:s,state:n,relative:a}=e;ee()||h(!1);let{future:i,static:l}=r.useContext(G),{matches:o}=r.useContext(J),{pathname:c}=te(),d=ne(),u=F(t,I(o,i.v7_relativeSplatPath),c,"path"===a),m=JSON.stringify(u);return r.useEffect(()=>d(JSON.parse(m),{replace:s,state:n,relative:a}),[d,m,a,s,n]),null}function ye(e){h(!1)}function ve(e){let{basename:t="/",children:s=null,location:n,navigationType:i=a.Pop,navigator:l,static:o=!1,future:c}=e;ee()&&h(!1);let d=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:d,navigator:l,static:o,future:Y({v7_relativeSplatPath:!1},c)}),[d,c,l,o]);"string"===typeof n&&(n=g(n));let{pathname:m="/",search:p="",hash:x="",state:f=null,key:b="default"}=n,y=r.useMemo(()=>{let e=O(m,d);return null==e?null:{location:{pathname:e,search:p,hash:x,state:f,key:b},navigationType:i}},[d,m,p,x,f,b,i]);return null==y?null:r.createElement(G.Provider,{value:u},r.createElement(X.Provider,{children:s,value:y}))}function je(e){let{children:t,location:s}=e;return re(Ne(t),s)}new Promise(()=>{});r.Component;function Ne(e,t){void 0===t&&(t=[]);let s=[];return r.Children.forEach(e,(e,n)=>{if(!r.isValidElement(e))return;let a=[...t,n];if(e.type===r.Fragment)return void s.push.apply(s,Ne(e.props.children,a));e.type!==ye&&h(!1),e.props.index&&e.props.children&&h(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=Ne(e.props.children,a)),s.push(i)}),s}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},we.apply(this,arguments)}function _e(e,t){if(null==e)return{};var s,n,a={},r=Object.keys(e);for(n=0;n<r.length;n++)s=r[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Te){}new Map;const Se=i.startTransition;c.flushSync,i.useId;function Ce(e){let{basename:t,children:s,future:n,window:a}=e,i=r.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:a,v5Compat:!0})&&(l={}),b(function(e,t){let{pathname:s,search:n,hash:a}=e.location;return x("",{pathname:s,search:n,hash:a},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:f(t)},null,l)));let o=i.current,[c,d]=r.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=r.useCallback(e=>{u&&Se?Se(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>o.listen(h),[o,h]),r.useEffect(()=>ge(n),[n]),r.createElement(ve,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:o,future:n})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=r.forwardRef(function(e,t){let s,{onClick:n,relative:a,reloadDocument:i,replace:l,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=e,p=_e(e,ke),{basename:x}=r.useContext(G),g=!1;if("string"===typeof d&&Me.test(d)&&(s=d,Ee))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),s=O(t.pathname,x);t.origin===e.origin&&null!=s?d=s+t.search+t.hash:g=!0}catch(Te){}let b=function(e,t){let{relative:s}=void 0===t?{}:t;ee()||h(!1);let{basename:n,navigator:a}=r.useContext(G),{hash:i,pathname:l,search:o}=ae(e,{relative:s}),c=l;return"/"!==n&&(c="/"===l?n:$([n,l])),a.createHref({pathname:c,search:o,hash:i})}(d,{relative:a}),y=function(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:l,viewTransition:o}=void 0===t?{}:t,c=ne(),d=te(),u=ae(e,{relative:l});return r.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,s)){t.preventDefault();let s=void 0!==n?n:f(d)===f(u);c(e,{replace:s,state:a,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,n,a,s,e,i,l,o])}(d,{replace:l,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});return r.createElement("a",we({},p,{href:s||b,onClick:g||i?n:function(e){n&&n(e),e.defaultPrevented||y(e)},ref:t,target:c}))});var Ae,De;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(De||(De={}));let Te={data:""},Re=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Te,Oe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Le=/\/\*[^]*?\*\/|  +/g,ze=/\n+/g,Ie=(e,t)=>{let s="",n="",a="";for(let r in e){let i=e[r];"@"==r[0]?"i"==r[1]?s=r+" "+i+";":n+="f"==r[1]?Ie(i,r):r+"{"+Ie(i,"k"==r[1]?"":t)+"}":"object"==typeof i?n+=Ie(i,t?t.replace(/([^,])+/g,e=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):r):null!=i&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Ie.p?Ie.p(r,i):r+":"+i+";")}return s+(t&&a?t+"{"+a+"}":a)+n},Fe={},$e=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+$e(e[s]);return t}return e},Be=(e,t,s,n,a)=>{let r=$e(e),i=Fe[r]||(Fe[r]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(r));if(!Fe[i]){let t=r!==e?e:(e=>{let t,s,n=[{}];for(;t=Oe.exec(e.replace(Le,""));)t[4]?n.shift():t[3]?(s=t[3].replace(ze," ").trim(),n.unshift(n[0][s]=n[0][s]||{})):n[0][t[1]]=t[2].replace(ze," ").trim();return n[0]})(e);Fe[i]=Ie(a?{["@keyframes "+i]:t}:t,s?"":"."+i)}let l=s&&Fe.g?Fe.g:null;return s&&(Fe.g=Fe[i]),((e,t,s,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(Fe[i],t,n,l),i};function Ve(e){let t=this||{},s=e.call?e(t.p):e;return Be(s.unshift?s.raw?((e,t,s)=>e.reduce((e,n,a)=>{let r=t[a];if(r&&r.call){let e=r(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":Ie(e,""):!1===e?"":e}return e+n+(null==r?"":r)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,Re(t.target),t.g,t.o,t.k)}Ve.bind({g:1});let Ue,He,We,qe=Ve.bind({k:1});function Ye(e,t){let s=this||{};return function(){let n=arguments;function a(r,i){let l=Object.assign({},r),o=l.className||a.className;s.p=Object.assign({theme:He&&He()},l),s.o=/ *go\d+/.test(o),l.className=Ve.apply(s,n)+(o?" "+o:""),t&&(l.ref=i);let c=e;return e[0]&&(c=l.as||e,delete l.as),We&&c[0]&&We(l),Ue(c,l)}return t?t(a):a}}var Qe=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ke=(()=>{let e=0;return()=>(++e).toString()})(),Ge=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Xe=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:s}=t;return Xe(e,{type:e.toasts.find(e=>e.id===s.id)?1:0,toast:s});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+a}))}}},Je=[],Ze={toasts:[],pausedAt:void 0},et=e=>{Ze=Xe(Ze,e),Je.forEach(e=>{e(Ze)})},tt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},st=e=>(t,s)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||Ke()}}(t,e,s);return et({type:2,toast:n}),n.id},nt=(e,t)=>st("blank")(e,t);nt.error=st("error"),nt.success=st("success"),nt.loading=st("loading"),nt.custom=st("custom"),nt.dismiss=e=>{et({type:3,toastId:e})},nt.remove=e=>et({type:4,toastId:e}),nt.promise=(e,t,s)=>{let n=nt.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let a=t.success?Qe(t.success,e):void 0;return a?nt.success(a,{id:n,...s,...null==s?void 0:s.success}):nt.dismiss(n),e}).catch(e=>{let a=t.error?Qe(t.error,e):void 0;a?nt.error(a,{id:n,...s,...null==s?void 0:s.error}):nt.dismiss(n)}),e};var at=(e,t)=>{et({type:1,toast:{id:e,height:t}})},rt=()=>{et({type:5,time:Date.now()})},it=new Map,lt=e=>{let{toasts:t,pausedAt:s}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,r.useState)(Ze),n=(0,r.useRef)(Ze);(0,r.useEffect)(()=>(n.current!==Ze&&s(Ze),Je.push(s),()=>{let e=Je.indexOf(s);e>-1&&Je.splice(e,1)}),[]);let a=t.toasts.map(t=>{var s,n,a;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||tt[t.type],style:{...e.style,...null==(a=e[t.type])?void 0:a.style,...t.style}}});return{...t,toasts:a}}(e);(0,r.useEffect)(()=>{if(s)return;let e=Date.now(),n=t.map(t=>{if(t.duration===1/0)return;let s=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(s<0))return setTimeout(()=>nt.dismiss(t.id),s);t.visible&&nt.dismiss(t.id)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[t,s]);let n=(0,r.useCallback)(()=>{s&&et({type:6,time:Date.now()})},[s]),a=(0,r.useCallback)((e,s)=>{let{reverseOrder:n=!1,gutter:a=8,defaultPosition:r}=s||{},i=t.filter(t=>(t.position||r)===(e.position||r)&&t.height),l=i.findIndex(t=>t.id===e.id),o=i.filter((e,t)=>t<l&&e.visible).length;return i.filter(e=>e.visible).slice(...n?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+a,0)},[t]);return(0,r.useEffect)(()=>{t.forEach(e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(it.has(e))return;let s=setTimeout(()=>{it.delete(e),et({type:4,toastId:e})},t);it.set(e,s)}(e.id,e.removeDelay);else{let t=it.get(e.id);t&&(clearTimeout(t),it.delete(e.id))}})},[t]),{toasts:t,handlers:{updateHeight:at,startPause:rt,endPause:n,calculateOffset:a}}},ot=qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ct=qe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dt=qe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,ut=Ye("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ot} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ct} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dt} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ht=qe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mt=Ye("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${ht} 1s linear infinite;
`,pt=qe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,xt=qe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,ft=Ye("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${xt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,gt=Ye("div")`
  position: absolute;
`,bt=Ye("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,yt=qe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vt=Ye("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${yt} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,jt=e=>{let{toast:t}=e,{icon:s,type:n,iconTheme:a}=t;return void 0!==s?"string"==typeof s?r.createElement(vt,null,s):s:"blank"===n?null:r.createElement(bt,null,r.createElement(mt,{...a}),"loading"!==n&&r.createElement(gt,null,"error"===n?r.createElement(ut,{...a}):r.createElement(ft,{...a})))},Nt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,wt=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,_t=Ye("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,kt=Ye("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,St=r.memo(e=>{let{toast:t,position:s,style:n,children:a}=e,i=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[n,a]=Ge()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Nt(s),wt(s)];return{animation:t?`${qe(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${qe(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(t.position||s||"top-center",t.visible):{opacity:0},l=r.createElement(jt,{toast:t}),o=r.createElement(kt,{...t.ariaProps},Qe(t.message,t));return r.createElement(_t,{className:t.className,style:{...i,...n,...t.style}},"function"==typeof a?a({icon:l,message:o}):r.createElement(r.Fragment,null,l,o))});!function(e,t,s,n){Ie.p=t,Ue=e,He=s,We=n}(r.createElement);var Ct=e=>{let{id:t,className:s,style:n,onHeightUpdate:a,children:i}=e,l=r.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;a(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,a]);return r.createElement("div",{ref:l,className:s,style:n},i)},Et=Ve`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Mt=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:n,gutter:a,children:i,containerStyle:l,containerClassName:o}=e,{toasts:c,handlers:d}=lt(n);return r.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...l},className:o,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(e=>{let n=e.position||s,l=((e,t)=>{let s=e.includes("top"),n=s?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ge()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...n,...a}})(n,d.calculateOffset(e,{reverseOrder:t,gutter:a,defaultPosition:s}));return r.createElement(Ct,{id:e.id,key:e.id,onHeightUpdate:d.updateHeight,className:e.visible?Et:"",style:l},"custom"===e.type?Qe(e.message,e):i?i(e):r.createElement(St,{toast:e,position:n}))}))},Pt=nt;function At(e,t){return function(){return e.apply(t,arguments)}}const{toString:Dt}=Object.prototype,{getPrototypeOf:Tt}=Object,{iterator:Rt,toStringTag:Ot}=Symbol,Lt=(zt=Object.create(null),e=>{const t=Dt.call(e);return zt[t]||(zt[t]=t.slice(8,-1).toLowerCase())});var zt;const It=e=>(e=e.toLowerCase(),t=>Lt(t)===e),Ft=e=>t=>typeof t===e,{isArray:$t}=Array,Bt=Ft("undefined");const Vt=It("ArrayBuffer");const Ut=Ft("string"),Ht=Ft("function"),Wt=Ft("number"),qt=e=>null!==e&&"object"===typeof e,Yt=e=>{if("object"!==Lt(e))return!1;const t=Tt(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Ot in e)&&!(Rt in e)},Qt=It("Date"),Kt=It("File"),Gt=It("Blob"),Xt=It("FileList"),Jt=It("URLSearchParams"),[Zt,es,ts,ss]=["ReadableStream","Request","Response","Headers"].map(It);function ns(e,t){let s,n,{allOwnKeys:a=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),$t(e))for(s=0,n=e.length;s<n;s++)t.call(null,e[s],s,e);else{const n=a?Object.getOwnPropertyNames(e):Object.keys(e),r=n.length;let i;for(s=0;s<r;s++)i=n[s],t.call(null,e[i],i,e)}}function as(e,t){t=t.toLowerCase();const s=Object.keys(e);let n,a=s.length;for(;a-- >0;)if(n=s[a],t===n.toLowerCase())return n;return null}const rs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,is=e=>!Bt(e)&&e!==rs;const ls=(os="undefined"!==typeof Uint8Array&&Tt(Uint8Array),e=>os&&e instanceof os);var os;const cs=It("HTMLFormElement"),ds=(e=>{let{hasOwnProperty:t}=e;return(e,s)=>t.call(e,s)})(Object.prototype),us=It("RegExp"),hs=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};ns(s,(s,a)=>{let r;!1!==(r=t(s,a,e))&&(n[a]=r||s)}),Object.defineProperties(e,n)};const ms=It("AsyncFunction"),ps=((e,t)=>{return e?setImmediate:t?(s=`axios@${Math.random()}`,n=[],rs.addEventListener("message",e=>{let{source:t,data:a}=e;t===rs&&a===s&&n.length&&n.shift()()},!1),e=>{n.push(e),rs.postMessage(s,"*")}):e=>setTimeout(e);var s,n})("function"===typeof setImmediate,Ht(rs.postMessage)),xs="undefined"!==typeof queueMicrotask?queueMicrotask.bind(rs):"undefined"!==typeof process&&process.nextTick||ps,fs={isArray:$t,isArrayBuffer:Vt,isBuffer:function(e){return null!==e&&!Bt(e)&&null!==e.constructor&&!Bt(e.constructor)&&Ht(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ht(e.append)&&("formdata"===(t=Lt(e))||"object"===t&&Ht(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Vt(e.buffer),t},isString:Ut,isNumber:Wt,isBoolean:e=>!0===e||!1===e,isObject:qt,isPlainObject:Yt,isReadableStream:Zt,isRequest:es,isResponse:ts,isHeaders:ss,isUndefined:Bt,isDate:Qt,isFile:Kt,isBlob:Gt,isRegExp:us,isFunction:Ht,isStream:e=>qt(e)&&Ht(e.pipe),isURLSearchParams:Jt,isTypedArray:ls,isFileList:Xt,forEach:ns,merge:function e(){const{caseless:t}=is(this)&&this||{},s={},n=(n,a)=>{const r=t&&as(s,a)||a;Yt(s[r])&&Yt(n)?s[r]=e(s[r],n):Yt(n)?s[r]=e({},n):$t(n)?s[r]=n.slice():s[r]=n};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&ns(arguments[a],n);return s},extend:function(e,t,s){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return ns(t,(t,n)=>{s&&Ht(t)?e[n]=At(t,s):e[n]=t},{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,n)=>{let a,r,i;const l={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)i=a[r],n&&!n(i,e,t)||l[i]||(t[i]=e[i],l[i]=!0);e=!1!==s&&Tt(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:Lt,kindOfTest:It,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return-1!==n&&n===s},toArray:e=>{if(!e)return null;if($t(e))return e;let t=e.length;if(!Wt(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Rt]).call(e);let n;for(;(n=s.next())&&!n.done;){const s=n.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const n=[];for(;null!==(s=e.exec(t));)n.push(s);return n},isHTMLForm:cs,hasOwnProperty:ds,hasOwnProp:ds,reduceDescriptors:hs,freezeMethods:e=>{hs(e,(t,s)=>{if(Ht(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const n=e[s];Ht(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},n=e=>{e.forEach(e=>{s[e]=!0})};return $t(e)?n(e):n(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:as,global:rs,isContextDefined:is,isSpecCompliantForm:function(e){return!!(e&&Ht(e.append)&&"FormData"===e[Ot]&&e[Rt])},toJSONObject:e=>{const t=new Array(10),s=(e,n)=>{if(qt(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const a=$t(e)?[]:{};return ns(e,(e,t)=>{const r=s(e,n+1);!Bt(r)&&(a[t]=r)}),t[n]=void 0,a}}return e};return s(e,0)},isAsyncFn:ms,isThenable:e=>e&&(qt(e)||Ht(e))&&Ht(e.then)&&Ht(e.catch),setImmediate:ps,asap:xs,isIterable:e=>null!=e&&Ht(e[Rt])};function gs(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}fs.inherits(gs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:fs.toJSONObject(this.config),code:this.code,status:this.status}}});const bs=gs.prototype,ys={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ys[e]={value:e}}),Object.defineProperties(gs,ys),Object.defineProperty(bs,"isAxiosError",{value:!0}),gs.from=(e,t,s,n,a,r)=>{const i=Object.create(bs);return fs.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),gs.call(i,e.message,t,s,n,a),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const vs=gs;function js(e){return fs.isPlainObject(e)||fs.isArray(e)}function Ns(e){return fs.endsWith(e,"[]")?e.slice(0,-2):e}function ws(e,t,s){return e?e.concat(t).map(function(e,t){return e=Ns(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const _s=fs.toFlatObject(fs,{},null,function(e){return/^is[A-Z]/.test(e)});const ks=function(e,t,s){if(!fs.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(s=fs.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!fs.isUndefined(t[e])})).metaTokens,a=s.visitor||c,r=s.dots,i=s.indexes,l=(s.Blob||"undefined"!==typeof Blob&&Blob)&&fs.isSpecCompliantForm(t);if(!fs.isFunction(a))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(fs.isDate(e))return e.toISOString();if(fs.isBoolean(e))return e.toString();if(!l&&fs.isBlob(e))throw new vs("Blob is not supported. Use a Buffer instead.");return fs.isArrayBuffer(e)||fs.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,a){let l=e;if(e&&!a&&"object"===typeof e)if(fs.endsWith(s,"{}"))s=n?s:s.slice(0,-2),e=JSON.stringify(e);else if(fs.isArray(e)&&function(e){return fs.isArray(e)&&!e.some(js)}(e)||(fs.isFileList(e)||fs.endsWith(s,"[]"))&&(l=fs.toArray(e)))return s=Ns(s),l.forEach(function(e,n){!fs.isUndefined(e)&&null!==e&&t.append(!0===i?ws([s],n,r):null===i?s:s+"[]",o(e))}),!1;return!!js(e)||(t.append(ws(a,s,r),o(e)),!1)}const d=[],u=Object.assign(_s,{defaultVisitor:c,convertValue:o,isVisitable:js});if(!fs.isObject(e))throw new TypeError("data must be an object");return function e(s,n){if(!fs.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+n.join("."));d.push(s),fs.forEach(s,function(s,r){!0===(!(fs.isUndefined(s)||null===s)&&a.call(t,s,fs.isString(r)?r.trim():r,n,u))&&e(s,n?n.concat(r):[r])}),d.pop()}}(e),t};function Ss(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Cs(e,t){this._pairs=[],e&&ks(e,this,t)}const Es=Cs.prototype;Es.append=function(e,t){this._pairs.push([e,t])},Es.toString=function(e){const t=e?function(t){return e.call(this,t,Ss)}:Ss;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Ms=Cs;function Ps(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function As(e,t,s){if(!t)return e;const n=s&&s.encode||Ps;fs.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let r;if(r=a?a(t,s):fs.isURLSearchParams(t)?t.toString():new Ms(t,s).toString(n),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Ds=class{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){fs.forEach(this.handlers,function(t){null!==t&&e(t)})}},Ts={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rs={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Ms,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Os="undefined"!==typeof window&&"undefined"!==typeof document,Ls="object"===typeof navigator&&navigator||void 0,zs=Os&&(!Ls||["ReactNative","NativeScript","NS"].indexOf(Ls.product)<0),Is="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Fs=Os&&window.location.href||"http://localhost",$s={...n,...Rs};const Bs=function(e){function t(e,s,n,a){let r=e[a++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),l=a>=e.length;if(r=!r&&fs.isArray(n)?n.length:r,l)return fs.hasOwnProp(n,r)?n[r]=[n[r],s]:n[r]=s,!i;n[r]&&fs.isObject(n[r])||(n[r]=[]);return t(e,s,n[r],a)&&fs.isArray(n[r])&&(n[r]=function(e){const t={},s=Object.keys(e);let n;const a=s.length;let r;for(n=0;n<a;n++)r=s[n],t[r]=e[r];return t}(n[r])),!i}if(fs.isFormData(e)&&fs.isFunction(e.entries)){const s={};return fs.forEachEntry(e,(e,n)=>{t(function(e){return fs.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,s,0)}),s}return null};const Vs={transitional:Ts,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",n=s.indexOf("application/json")>-1,a=fs.isObject(e);a&&fs.isHTMLForm(e)&&(e=new FormData(e));if(fs.isFormData(e))return n?JSON.stringify(Bs(e)):e;if(fs.isArrayBuffer(e)||fs.isBuffer(e)||fs.isStream(e)||fs.isFile(e)||fs.isBlob(e)||fs.isReadableStream(e))return e;if(fs.isArrayBufferView(e))return e.buffer;if(fs.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ks(e,new $s.classes.URLSearchParams,Object.assign({visitor:function(e,t,s,n){return $s.isNode&&fs.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=fs.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ks(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,s){if(fs.isString(e))try{return(t||JSON.parse)(e),fs.trim(e)}catch(Te){if("SyntaxError"!==Te.name)throw Te}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Vs.transitional,s=t&&t.forcedJSONParsing,n="json"===this.responseType;if(fs.isResponse(e)||fs.isReadableStream(e))return e;if(e&&fs.isString(e)&&(s&&!this.responseType||n)){const s=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(Te){if(s){if("SyntaxError"===Te.name)throw vs.from(Te,vs.ERR_BAD_RESPONSE,this,null,this.response);throw Te}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$s.classes.FormData,Blob:$s.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};fs.forEach(["delete","get","head","post","put","patch"],e=>{Vs.headers[e]={}});const Us=Vs,Hs=fs.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ws=Symbol("internals");function qs(e){return e&&String(e).trim().toLowerCase()}function Ys(e){return!1===e||null==e?e:fs.isArray(e)?e.map(Ys):String(e)}function Qs(e,t,s,n,a){return fs.isFunction(n)?n.call(this,t,s):(a&&(t=s),fs.isString(t)?fs.isString(n)?-1!==t.indexOf(n):fs.isRegExp(n)?n.test(t):void 0:void 0)}class Ks{constructor(e){e&&this.set(e)}set(e,t,s){const n=this;function a(e,t,s){const a=qs(t);if(!a)throw new Error("header name must be a non-empty string");const r=fs.findKey(n,a);(!r||void 0===n[r]||!0===s||void 0===s&&!1!==n[r])&&(n[r||t]=Ys(e))}const r=(e,t)=>fs.forEach(e,(e,s)=>a(e,s,t));if(fs.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(fs.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let s,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),s=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!s||t[s]&&Hs[s]||("set-cookie"===s?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t})(e),t);else if(fs.isObject(e)&&fs.isIterable(e)){let s,n,a={};for(const t of e){if(!fs.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(s=a[n])?fs.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}r(a,t)}else null!=e&&a(t,e,s);return this}get(e,t){if(e=qs(e)){const s=fs.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}(e);if(fs.isFunction(t))return t.call(this,e,s);if(fs.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=qs(e)){const s=fs.findKey(this,e);return!(!s||void 0===this[s]||t&&!Qs(0,this[s],s,t))}return!1}delete(e,t){const s=this;let n=!1;function a(e){if(e=qs(e)){const a=fs.findKey(s,e);!a||t&&!Qs(0,s[a],a,t)||(delete s[a],n=!0)}}return fs.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let s=t.length,n=!1;for(;s--;){const a=t[s];e&&!Qs(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,s={};return fs.forEach(this,(n,a)=>{const r=fs.findKey(s,a);if(r)return t[r]=Ys(n),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(a):String(a).trim();i!==a&&delete t[a],t[i]=Ys(n),s[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return fs.forEach(this,(s,n)=>{null!=s&&!1!==s&&(t[n]=e&&fs.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,s]=e;return t+": "+s}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];return n.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Ws]=this[Ws]={accessors:{}}).accessors,s=this.prototype;function n(e){const n=qs(e);t[n]||(!function(e,t){const s=fs.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(e,s,a){return this[n].call(this,t,e,s,a)},configurable:!0})})}(s,e),t[n]=!0)}return fs.isArray(e)?e.forEach(n):n(e),this}}Ks.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),fs.reduceDescriptors(Ks.prototype,(e,t)=>{let{value:s}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(e){this[n]=e}}}),fs.freezeMethods(Ks);const Gs=Ks;function Xs(e,t){const s=this||Us,n=t||s,a=Gs.from(n.headers);let r=n.data;return fs.forEach(e,function(e){r=e.call(s,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function Js(e){return!(!e||!e.__CANCEL__)}function Zs(e,t,s){vs.call(this,null==e?"canceled":e,vs.ERR_CANCELED,t,s),this.name="CanceledError"}fs.inherits(Zs,vs,{__CANCEL__:!0});const en=Zs;function tn(e,t,s){const n=s.config.validateStatus;s.status&&n&&!n(s.status)?t(new vs("Request failed with status code "+s.status,[vs.ERR_BAD_REQUEST,vs.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}const sn=function(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a,r=0,i=0;return t=void 0!==t?t:1e3,function(l){const o=Date.now(),c=n[i];a||(a=o),s[r]=l,n[r]=o;let d=i,u=0;for(;d!==r;)u+=s[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),o-a<t)return;const h=c&&o-c;return h?Math.round(1e3*u/h):void 0}};const nn=function(e,t){let s,n,a=0,r=1e3/t;const i=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();a=r,s=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-a;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];t>=r?i(o,e):(s=o,n||(n=setTimeout(()=>{n=null,i(s)},r-t)))},()=>s&&i(s)]},an=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const a=sn(50,250);return nn(s=>{const r=s.loaded,i=s.lengthComputable?s.total:void 0,l=r-n,o=a(l);n=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&r<=i?(i-r)/o:void 0,event:s,lengthComputable:null!=i,[t?"download":"upload"]:!0})},s)},rn=(e,t)=>{const s=null!=e;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},ln=e=>function(){for(var t=arguments.length,s=new Array(t),n=0;n<t;n++)s[n]=arguments[n];return fs.asap(()=>e(...s))},on=$s.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,$s.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL($s.origin),$s.navigator&&/(msie|trident)/i.test($s.navigator.userAgent)):()=>!0,cn=$s.hasStandardBrowserEnv?{write(e,t,s,n,a,r){const i=[e+"="+encodeURIComponent(t)];fs.isNumber(s)&&i.push("expires="+new Date(s).toGMTString()),fs.isString(n)&&i.push("path="+n),fs.isString(a)&&i.push("domain="+a),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function dn(e,t,s){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const un=e=>e instanceof Gs?{...e}:e;function hn(e,t){t=t||{};const s={};function n(e,t,s,n){return fs.isPlainObject(e)&&fs.isPlainObject(t)?fs.merge.call({caseless:n},e,t):fs.isPlainObject(t)?fs.merge({},t):fs.isArray(t)?t.slice():t}function a(e,t,s,a){return fs.isUndefined(t)?fs.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function r(e,t){if(!fs.isUndefined(t))return n(void 0,t)}function i(e,t){return fs.isUndefined(t)?fs.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function l(s,a,r){return r in t?n(s,a):r in e?n(void 0,s):void 0}const o={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,t,s)=>a(un(e),un(t),0,!0)};return fs.forEach(Object.keys(Object.assign({},e,t)),function(n){const r=o[n]||a,i=r(e[n],t[n],n);fs.isUndefined(i)&&r!==l||(s[n]=i)}),s}const mn=e=>{const t=hn({},e);let s,{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:o}=t;if(t.headers=l=Gs.from(l),t.url=As(dn(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),fs.isFormData(n))if($s.hasStandardBrowserEnv||$s.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(s=l.getContentType())){const[e,...t]=s?s.split(";").map(e=>e.trim()).filter(Boolean):[];l.setContentType([e||"multipart/form-data",...t].join("; "))}if($s.hasStandardBrowserEnv&&(a&&fs.isFunction(a)&&(a=a(t)),a||!1!==a&&on(t.url))){const e=r&&i&&cn.read(i);e&&l.set(r,e)}return t},pn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const n=mn(e);let a=n.data;const r=Gs.from(n.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=n;function p(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(i),n.signal&&n.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const n=Gs.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());tn(function(e){t(e),p()},function(e){s(e),p()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:n,config:e,request:x}),x=null}x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(s(new vs("Request aborted",vs.ECONNABORTED,e,x)),x=null)},x.onerror=function(){s(new vs("Network Error",vs.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||Ts;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),s(new vs(t,a.clarifyTimeoutError?vs.ETIMEDOUT:vs.ECONNABORTED,e,x)),x=null},void 0===a&&r.setContentType(null),"setRequestHeader"in x&&fs.forEach(r.toJSON(),function(e,t){x.setRequestHeader(t,e)}),fs.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),u&&"json"!==u&&(x.responseType=n.responseType),m&&([o,d]=an(m,!0),x.addEventListener("progress",o)),h&&x.upload&&([l,c]=an(h),x.upload.addEventListener("progress",l),x.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(i=t=>{x&&(s(!t||t.type?new en(null,e,x):t),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(i),n.signal&&(n.signal.aborted?i():n.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);g&&-1===$s.protocols.indexOf(g)?s(new vs("Unsupported protocol "+g+":",vs.ERR_BAD_REQUEST,e)):x.send(a||null)})},xn=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,n=new AbortController;const a=function(e){if(!s){s=!0,i();const t=e instanceof Error?e:this.reason;n.abort(t instanceof vs?t:new en(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,a(new vs(`timeout ${t} of ms exceeded`,vs.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:l}=n;return l.unsubscribe=()=>fs.asap(i),l}},fn=function*(e,t){let s=e.byteLength;if(!t||s<t)return void(yield e);let n,a=0;for(;a<s;)n=a+t,yield e.slice(a,n),a=n},gn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},bn=(e,t,s,n)=>{const a=async function*(e,t){for await(const s of gn(e))yield*fn(s,t)}(e,t);let r,i=0,l=e=>{r||(r=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return l(),void e.close();let r=n.byteLength;if(s){let e=i+=r;s(e)}e.enqueue(new Uint8Array(n))}catch(t){throw l(t),t}},cancel:e=>(l(e),a.return())},{highWaterMark:2})},yn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,vn=yn&&"function"===typeof ReadableStream,jn=yn&&("function"===typeof TextEncoder?(Nn=new TextEncoder,e=>Nn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Nn;const wn=function(e){try{for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];return!!e(...s)}catch(Te){return!1}},_n=vn&&wn(()=>{let e=!1;const t=new Request($s.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),kn=vn&&wn(()=>fs.isReadableStream(new Response("").body)),Sn={stream:kn&&(e=>e.body)};var Cn;yn&&(Cn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Sn[e]&&(Sn[e]=fs.isFunction(Cn[e])?t=>t[e]():(t,s)=>{throw new vs(`Response type '${e}' is not supported`,vs.ERR_NOT_SUPPORT,s)})}));const En=async(e,t)=>{const s=fs.toFiniteNumber(e.getContentLength());return null==s?(async e=>{if(null==e)return 0;if(fs.isBlob(e))return e.size;if(fs.isSpecCompliantForm(e)){const t=new Request($s.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return fs.isArrayBufferView(e)||fs.isArrayBuffer(e)?e.byteLength:(fs.isURLSearchParams(e)&&(e+=""),fs.isString(e)?(await jn(e)).byteLength:void 0)})(t):s},Mn=yn&&(async e=>{let{url:t,method:s,data:n,signal:a,cancelToken:r,timeout:i,onDownloadProgress:l,onUploadProgress:o,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=mn(e);c=c?(c+"").toLowerCase():"text";let m,p=xn([a,r&&r.toAbortSignal()],i);const x=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let f;try{if(o&&_n&&"get"!==s&&"head"!==s&&0!==(f=await En(d,n))){let e,s=new Request(t,{method:"POST",body:n,duplex:"half"});if(fs.isFormData(n)&&(e=s.headers.get("content-type"))&&d.setContentType(e),s.body){const[e,t]=rn(f,an(ln(o)));n=bn(s.body,65536,e,t)}}fs.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;m=new Request(t,{...h,signal:p,method:s.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:a?u:void 0});let r=await fetch(m,h);const i=kn&&("stream"===c||"response"===c);if(kn&&(l||i&&x)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=r[t]});const t=fs.toFiniteNumber(r.headers.get("content-length")),[s,n]=l&&rn(t,an(ln(l),!0))||[];r=new Response(bn(r.body,65536,s,()=>{n&&n(),x&&x()}),e)}c=c||"text";let g=await Sn[fs.findKey(Sn,c)||"text"](r,e);return!i&&x&&x(),await new Promise((t,s)=>{tn(t,s,{data:g,headers:Gs.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:m})})}catch(g){if(x&&x(),g&&"TypeError"===g.name&&/Load failed|fetch/i.test(g.message))throw Object.assign(new vs("Network Error",vs.ERR_NETWORK,e,m),{cause:g.cause||g});throw vs.from(g,g&&g.code,e,m)}}),Pn={http:null,xhr:pn,fetch:Mn};fs.forEach(Pn,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Te){}Object.defineProperty(e,"adapterName",{value:t})}});const An=e=>`- ${e}`,Dn=e=>fs.isFunction(e)||null===e||!1===e,Tn=e=>{e=fs.isArray(e)?e:[e];const{length:t}=e;let s,n;const a={};for(let r=0;r<t;r++){let t;if(s=e[r],n=s,!Dn(s)&&(n=Pn[(t=String(s)).toLowerCase()],void 0===n))throw new vs(`Unknown adapter '${t}'`);if(n)break;a[t||"#"+r]=n}if(!n){const e=Object.entries(a).map(e=>{let[t,s]=e;return`adapter ${t} `+(!1===s?"is not supported by the environment":"is not available in the build")});let s=t?e.length>1?"since :\n"+e.map(An).join("\n"):" "+An(e[0]):"as no adapter specified";throw new vs("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return n};function Rn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new en(null,e)}function On(e){Rn(e),e.headers=Gs.from(e.headers),e.data=Xs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Tn(e.adapter||Us.adapter)(e).then(function(t){return Rn(e),t.data=Xs.call(e,e.transformResponse,t),t.headers=Gs.from(t.headers),t},function(t){return Js(t)||(Rn(e),t&&t.response&&(t.response.data=Xs.call(e,e.transformResponse,t.response),t.response.headers=Gs.from(t.response.headers))),Promise.reject(t)})}const Ln="1.10.0",zn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zn[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const In={};zn.transitional=function(e,t,s){function n(e,t){return"[Axios v"+Ln+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}return(s,a,r)=>{if(!1===e)throw new vs(n(a," has been removed"+(t?" in "+t:"")),vs.ERR_DEPRECATED);return t&&!In[a]&&(In[a]=!0,console.warn(n(a," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(s,a,r)}},zn.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};const Fn={assertOptions:function(e,t,s){if("object"!==typeof e)throw new vs("options must be an object",vs.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const r=n[a],i=t[r];if(i){const t=e[r],s=void 0===t||i(t,r,e);if(!0!==s)throw new vs("option "+r+" must be "+s,vs.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new vs("Unknown option "+r,vs.ERR_BAD_OPTION)}},validators:zn},$n=Fn.validators;class Bn{constructor(e){this.defaults=e||{},this.interceptors={request:new Ds,response:new Ds}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{s.stack?t&&!String(s.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(s.stack+="\n"+t):s.stack=t}catch(Te){}}throw s}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=hn(this.defaults,t);const{transitional:s,paramsSerializer:n,headers:a}=t;void 0!==s&&Fn.assertOptions(s,{silentJSONParsing:$n.transitional($n.boolean),forcedJSONParsing:$n.transitional($n.boolean),clarifyTimeoutError:$n.transitional($n.boolean)},!1),null!=n&&(fs.isFunction(n)?t.paramsSerializer={serialize:n}:Fn.assertOptions(n,{encode:$n.function,serialize:$n.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fn.assertOptions(t,{baseUrl:$n.spelling("baseURL"),withXsrfToken:$n.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=a&&fs.merge(a.common,a[t.method]);a&&fs.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Gs.concat(r,a);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[On.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,o),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=On.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return As(dn((e=hn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}fs.forEach(["delete","get","head","options"],function(e){Bn.prototype[e]=function(t,s){return this.request(hn(s||{},{method:e,url:t,data:(s||{}).data}))}}),fs.forEach(["post","put","patch"],function(e){function t(t){return function(s,n,a){return this.request(hn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:n}))}}Bn.prototype[e]=t(),Bn.prototype[e+"Form"]=t(!0)});const Vn=Bn;class Un{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{s.subscribe(e),t=e}).then(e);return n.cancel=function(){s.unsubscribe(t)},n},e(function(e,n,a){s.reason||(s.reason=new en(e,n,a),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Un(function(t){e=t});return{token:t,cancel:e}}}const Hn=Un;const Wn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Wn).forEach(e=>{let[t,s]=e;Wn[s]=t});const qn=Wn;const Yn=function e(t){const s=new Vn(t),n=At(Vn.prototype.request,s);return fs.extend(n,Vn.prototype,s,{allOwnKeys:!0}),fs.extend(n,s,null,{allOwnKeys:!0}),n.create=function(s){return e(hn(t,s))},n}(Us);Yn.Axios=Vn,Yn.CanceledError=en,Yn.CancelToken=Hn,Yn.isCancel=Js,Yn.VERSION=Ln,Yn.toFormData=ks,Yn.AxiosError=vs,Yn.Cancel=Yn.CanceledError,Yn.all=function(e){return Promise.all(e)},Yn.spread=function(e){return function(t){return e.apply(null,t)}},Yn.isAxiosError=function(e){return fs.isObject(e)&&!0===e.isAxiosError},Yn.mergeConfig=hn,Yn.AxiosHeaders=Gs,Yn.formToJSON=e=>Bs(fs.isHTMLForm(e)?new FormData(e):e),Yn.getAdapter=Tn,Yn.HttpStatusCode=qn,Yn.default=Yn;const Qn=Yn;var Kn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Gn=(e,t)=>{const s=(0,r.forwardRef)((s,n)=>{let{color:a="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...u}=s;return(0,r.createElement)("svg",{ref:n,...Kn,width:i,height:i,stroke:a,strokeWidth:o?24*Number(l)/Number(i):l,className:["lucide",`lucide-${h=e,h.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,c].join(" "),...u},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]]);var h});return s.displayName=`${e}`,s},Xn=Gn("Stethoscope",[["path",{d:"M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3",key:"1jd90r"}],["path",{d:"M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4",key:"126ukv"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),Jn=Gn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Zn=Gn("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ea=Gn("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ta=Gn("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var sa=s(579);const na=e=>{let{onLogin:t}=e;const s=ne(),[n,a]=(0,r.useState)({username:"",password:""}),[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),d=e=>{a({...n,[e.target.name]:e.target.value})};return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,sa.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-md",children:[(0,sa.jsxs)("div",{className:"text-center mb-8",children:[(0,sa.jsx)("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,sa.jsx)(Xn,{className:"w-8 h-8 text-white"})}),(0,sa.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Cabinet M\xe9dical"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Connectez-vous \xe0 votre compte"})]}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{const e=await Qn.post("/api/auth/login",{username:n.username,password:n.password}),{access_token:a,user:r}=e.data;localStorage.setItem("token",a),localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("userRole",r.role),t&&t(r,a),Pt.success("Connexion r\xe9ussie !"),s("/dashboard")}catch(i){var a,r;console.error("Login error:",i);const e=(null===(a=i.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.detail)||"Erreur de connexion. V\xe9rifiez vos identifiants.";Pt.error(e)}finally{l(!1)}},className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom d'utilisateur"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sa.jsx)(Jn,{className:"h-5 w-5 text-gray-400"})}),(0,sa.jsx)("input",{id:"username",name:"username",type:"text",required:!0,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Entrez votre nom d'utilisateur",value:n.username,onChange:d})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sa.jsx)(Zn,{className:"h-5 w-5 text-gray-400"})}),(0,sa.jsx)("input",{id:"password",name:"password",type:o?"text":"password",required:!0,className:"block w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Entrez votre mot de passe",value:n.password,onChange:d}),(0,sa.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>c(!o),children:o?(0,sa.jsx)(ea,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):(0,sa.jsx)(ta,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),(0,sa.jsx)("button",{type:"submit",disabled:i,className:"w-full flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,sa.jsx)("span",{children:"Connexion..."})]}):(0,sa.jsx)("span",{children:"Se connecter"})})]}),(0,sa.jsx)("div",{className:"mt-8 text-center",children:(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Contactez l'administrateur si vous avez oubli\xe9 vos identifiants"})})]})})},aa=Gn("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),ra=Gn("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ia=Gn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),la=Gn("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),oa=Gn("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),ca=Gn("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),da=Gn("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]),ua=Gn("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),ha=Gn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const ma=new class{constructor(){this.ws=null,this.isConnecting=!1,this.listeners=new Set,this.isFirstConnection=!0}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}broadcast(e){this.listeners.forEach(t=>{try{t(e)}catch(s){console.error("Error in WebSocket listener:",s)}})}connect(e){if(this.ws&&this.ws.readyState===WebSocket.OPEN)return console.log("\ud83d\udd17 WebSocket already connected, using existing connection"),this.ws;if(this.isConnecting)return console.log("\ud83d\udd17 WebSocket already connecting, waiting for connection"),null;try{return console.log("\ud83d\udd17 Creating new WebSocket connection to:",e),this.isConnecting=!0,this.ws=new WebSocket(e),this.ws.onopen=()=>{console.log("\u2705 WebSocket connected successfully (singleton)"),this.isConnecting=!1,this.isFirstConnection&&(Pt.success("Messagerie temps r\xe9el activ\xe9e"),this.isFirstConnection=!1)},this.ws.onmessage=e=>{try{const t=JSON.parse(e.data);console.log("\ud83d\udce8 WebSocket message received (singleton):",t),this.broadcast(t)}catch(t){console.error("Error parsing WebSocket message:",t)}},this.ws.onerror=e=>{console.error("\u274c WebSocket error (singleton):",e),this.isConnecting=!1,this.isFirstConnection&&Pt.error("Erreur de connexion messagerie temps r\xe9el")},this.ws.onclose=t=>{console.log("WebSocket disconnected (singleton). Code:",t.code,"Reason:",t.reason),this.isConnecting=!1,this.ws=null,!t.wasClean&&this.listeners.size>0&&setTimeout(()=>{console.log("\ud83d\udd04 Attempting WebSocket reconnection (singleton)..."),this.connect(e)},3e3)},this.ws}catch(t){return console.error("Failed to create WebSocket (singleton):",t),this.isConnecting=!1,this.isFirstConnection&&Pt.error("Impossible d'initialiser la messagerie temps r\xe9el"),null}}disconnect(){this.ws&&(console.log("\ud83d\udd0c Closing WebSocket connection (singleton)"),this.ws.close(),this.ws=null),this.isConnecting=!1,this.listeners.clear()}},pa=e=>{var t,s,n,a,i,l,o,c,d,u,h,m,p,x,f;let{user:g}=e;const b=ne(),[y,v]=(0,r.useState)({total_rdv:0,rdv_restants:0,rdv_attente:0,rdv_en_cours:0,rdv_termines:0,recette_jour:0,total_patients:0,duree_attente_moyenne:0}),[j,N]=(0,r.useState)(!0),[w,_]=(0,r.useState)(null),[k,S]=(0,r.useState)(!1),[C,E]=(0,r.useState)(null),[M,P]=(0,r.useState)(!1),[A,D]=(0,r.useState)([]),[T,R]=(0,r.useState)([]),[O,L]=(0,r.useState)([]),[z,I]=(0,r.useState)([]),[F,$]=(0,r.useState)(""),[B,V]=(0,r.useState)(null),[U,H]=(0,r.useState)(null),[W,q]=(0,r.useState)(""),[Y,Q]=(0,r.useState)({show:!1,messageId:null,messageContent:""}),K=(0,r.useRef)(null),G="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com";(0,r.useEffect)(()=>{te(),se(),ae(),re(),ce(),J();const e=()=>{console.log("\ud83d\udd04 Patient data updated, refreshing dashboard reminders..."),ae(),re()},t=e=>{console.log("\ud83d\udd04 Consultation data updated, refreshing dashboard reminders...",e.detail),ae(),re()};return window.addEventListener("patientDataUpdated",e),window.addEventListener("consultationDataUpdated",t),()=>{console.log("\ud83e\uddf9 Dashboard cleanup - removing WebSocket listener"),ma.removeListener(Z),window.removeEventListener("patientDataUpdated",e),window.removeEventListener("consultationDataUpdated",t)}},[]),(0,r.useEffect)(()=>{if(z.length>0){const e=setTimeout(()=>{var e;const t=null===(e=K.current)||void 0===e?void 0:e.parentElement;if(t){t.scrollTop+t.clientHeight>=t.scrollHeight-100&&X()}},100);return()=>clearTimeout(e)}},[z]);const X=()=>{var e;null===(e=K.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},J=()=>{let e;if(ma.addListener(Z),G.startsWith("http://")||G.startsWith("https://")){const t=new URL(G);e=`${"https:"===t.protocol?"wss:":"ws:"}//${t.host}/api/ws`}else{e=`${"https:"===window.location.protocol?"wss:":"ws:"}//${window.location.host}/api/ws`}ma.connect(e)},Z=e=>{switch(e.type){case"new_message":e.data.sender_type===g.role&&e.data.sender_name===g.full_name||(I(t=>[...t,e.data]),ee());break;case"message_updated":I(t=>t.map(t=>t.id===e.data.id?e.data:t));break;case"message_deleted":I(t=>t.filter(t=>t.id!==e.data.id));break;case"message_read":I(t=>t.map(t=>t.id===e.data.id?{...t,is_read:!0}:t));break;case"messages_cleared":I([]),Pt.success(`${e.deleted_count} message(s) supprim\xe9(s)`)}},ee=()=>{try{const e=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBz2YuO7AaBUOSLjk1pE7BBKM1/j5oU0GEYTQt2YaDk+a6NKgSgwOVp3o25dHCC6Ky+6xZCEFMH3I7bBrJQU2jdXz4I44DRKHz/LNfSgIJHfH8N+QQAoTXbPn66hVFApGn+DyvmwhBz2YuO7AaBUOSLjn1pE7BBKM1/j5oU0GEYTQt2YaDk+a6NKgSgwOVp3o25dHCC6Ky+6xZCEFMH3I7bBrJQU2jdXz4I44DRKHz/LNfSgIJHfH8N+QQAoTXbPn66hVFApGn+DyvmwhBz2YuO7AaBUOSLjn1pE7BBKM1/j5oU0GEYTQt2YaDk+a6NKgSgwOVp3o25dHCC6Ky+6xZCEFMH3I7bBrJQU2jdXz4I44DRKHz/LNfSgIJHfH8N+QQAoTXbPn66hVFApGn+DyvmwhBz2YuO7AaBUOSLjn1pE7BBKM1/j5oU0GEYTQt2YaDk+a6NKgSgwOVp3o25dHCC6Ky+6xZCEFMH3I7bBrJQU2jdXz4I44DRKHz/LNfSgIJHfH8N+QQAoTXbPn66hVFApGn+DyvmwhBz2YuO7AaBUOSLjn1pE7BBKM1/j5oU0GEYTQt2YaDk+a6NKgSgwOVp3o25dHCC6Ky+6xZCEFMH3I7bBrJQU2jdXz4I44DRKHz/LNfSgIJHfH8N+QQAoTXbPn66hVFApGn+DyvmwhBz2YuO7AaBUOSLjn1pE7BBKM1/j5oU0GEYTQt2YaDk+a6NKgSgwOVp3o25dHCC6Ky+6xZCEFMH3I7bBrJQU2jdXz4I44DRKHz/LNfSgIJHfH8N+QQAoTXbPn66hVFApGn+DyvmwhBz2YuO7AaBUONjIRgAA");e.volume=.3,e.play().catch(e=>console.log("Notification sound failed:",e))}catch(e){console.log("Could not play notification sound:",e)}},te=async()=>{try{const e=await Qn.get(`${G}/api/dashboard`);v(e.data)}catch(e){console.error("Error fetching dashboard data:",e),Pt.error("Erreur lors du chargement des donn\xe9es")}finally{N(!1)}},se=async()=>{try{const e=await Qn.get(`${G}/api/dashboard/birthdays`);D(e.data.birthdays||[])}catch(e){console.error("Error fetching birthdays:",e)}},ae=async()=>{try{const e=await Qn.get(`${G}/api/dashboard/phone-reminders`);R(e.data.reminders||[])}catch(e){console.error("Error fetching phone reminders:",e)}},re=async()=>{try{const e=await Qn.get(`${G}/api/dashboard/vaccine-reminders`);L(e.data.vaccine_reminders||[])}catch(e){console.error("Error fetching vaccine reminders:",e)}},ie=async e=>{try{const t=await Qn.get(`${G}/api/patients/${e}`);_(t.data),S(!0)}catch(t){console.error("Error fetching patient details:",t),Pt.error("Erreur lors du chargement des d\xe9tails du patient")}},le=async e=>{try{const t=await Qn.get(`${G}/api/consultations/${e}`);E(t.data),P(!0)}catch(t){console.error("Error fetching consultation details:",t),Pt.error("Erreur lors du chargement des d\xe9tails de la consultation")}},oe=(e,t)=>"medecin"===t?"\ud83e\ude7a":"secretaire"===t?"\ud83d\udc69\u200d\ud83d\udcbc":"\ud83d\udc64",ce=async()=>{try{const e=await Qn.get(`${G}/api/messages`),t=(e.data.messages||[]).filter((e,t,s)=>t===s.findIndex(t=>t.id===e.id)).sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp));I(t)}catch(e){console.error("Error fetching messages:",e)}},de=async()=>{if(!F.trim())return;const e={content:F.trim(),reply_to:(null===B||void 0===B?void 0:B.id)||null};try{const t=F.trim(),s=B;$(""),V(null);const n={id:`temp_${Date.now()}`,sender_type:g.role,sender_name:g.full_name,content:t,timestamp:(new Date).toISOString(),is_read:!1,is_edited:!1,original_content:"",reply_to:(null===s||void 0===s?void 0:s.id)||null,reply_content:(null===s||void 0===s?void 0:s.content)||"",created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};I(e=>[...e,n]);const a=await Qn.post(`${G}/api/messages`,e,{params:{sender_type:g.role,sender_name:g.full_name}}),r=a.data;I(e=>e.map(e=>e.id===n.id?{...n,id:r.id}:e)),console.log("\u2705 Message sent successfully:",a.data)}catch(t){console.error("Error sending message:",t),Pt.error("Erreur lors de l'envoi du message"),I(e=>e.filter(e=>!e.id.startsWith("temp_"))),$(e.content),V(e.reply_to?B:null)}},ue=async()=>{if(W.trim())try{await Qn.put(`${G}/api/messages/${U.id}`,{content:W.trim()},{params:{user_type:g.role}}),H(null),q(""),ma.ws&&ma.ws.readyState===WebSocket.OPEN||(console.log("WebSocket not connected, fetching messages manually after edit"),await ce())}catch(e){console.error("Error editing message:",e),Pt.error("Erreur lors de la modification du message")}},he=async e=>{try{await Qn.put(`${G}/api/messages/${e}/read`)}catch(t){console.error("Error marking message as read:",t)}};(0,r.useEffect)(()=>{z.filter(e=>!e.is_read&&e.sender_type!==g.role).forEach(e=>{setTimeout(()=>{he(e.id)},2e3)})},[z,g.role]);const me=e=>{let{icon:t,title:s,value:n,color:a,subtitle:r,gradientColors:i,iconBg:l}=e;return(0,sa.jsx)("div",{className:`bg-gradient-to-r ${i} rounded-xl p-6 text-white shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 group`,children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("p",{className:"text-white/80 text-sm font-medium",children:s}),(0,sa.jsx)("p",{className:"text-2xl font-bold mt-1",children:n}),r&&(0,sa.jsx)("p",{className:"text-white/70 text-xs mt-1",children:r})]}),(0,sa.jsx)("div",{className:`${l} bg-opacity-30 rounded-full p-3 group-hover:scale-110 transition-transform duration-300`,children:(0,sa.jsx)(t,{className:"w-6 h-6 text-white"})})]})})};return j?(0,sa.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-6",children:(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"responsive-title font-bold text-gray-900",children:["Bonjour ",g.full_name," \ud83d\udc4b"]}),(0,sa.jsx)("p",{className:"text-primary-100 responsive-text",children:"Voici un aper\xe7u de votre journ\xe9e"})]})}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6 mb-6",children:[(0,sa.jsx)(me,{icon:aa,title:"RDV Aujourd'hui",value:y.total_rdv,color:"text-blue-600",subtitle:"Total des rendez-vous",gradientColors:"from-blue-500 to-blue-600",iconBg:"bg-blue-400"}),(0,sa.jsx)(me,{icon:ra,title:"Salle attente",value:y.rdv_attente,color:"text-yellow-600",subtitle:"Patients en salle d'attente",gradientColors:"from-amber-500 to-orange-600",iconBg:"bg-orange-400"}),(0,sa.jsx)(me,{icon:ia,title:"Patients Restants",value:y.rdv_restants,color:"text-orange-600",subtitle:"Non encore arriv\xe9s",gradientColors:"from-orange-500 to-red-600",iconBg:"bg-red-400"}),(0,sa.jsx)(me,{icon:ra,title:"Temps d'attente",value:`${y.duree_attente_moyenne} min`,color:"text-teal-600",subtitle:"Temps d'attente moyen",gradientColors:"from-teal-500 to-cyan-600",iconBg:"bg-cyan-400"}),(0,sa.jsx)(me,{icon:la,title:"Recette du jour",value:`${y.recette_jour} TND`,color:"text-purple-600",subtitle:"Paiements encaiss\xe9s",gradientColors:"from-purple-500 to-indigo-600",iconBg:"bg-indigo-400"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6 mb-4 sm:mb-6",children:[(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 responsive-padding",children:[(0,sa.jsx)("div",{className:"flex items-center justify-between mb-3 sm:mb-4",children:(0,sa.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Rappels et alertes"})}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(oa,{className:"w-4 h-4 text-pink-500"}),(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:"Anniversaires du jour"}),(0,sa.jsx)("span",{className:"bg-pink-100 text-pink-600 text-xs px-2 py-1 rounded-full",children:A.length})]}),A.length>0?(0,sa.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,sa.jsx)("div",{className:"p-3 bg-pink-50 border-l-4 border-pink-400 rounded-lg",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("button",{onClick:()=>ie(e.id),className:"font-medium text-primary-600 hover:text-primary-800 underline cursor-pointer",children:[e.prenom," ",e.nom]}),(0,sa.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["- ",e.age," ans"]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{if(e.numero_whatsapp){const t=`Joyeux anniversaire ${e.prenom} ! \ud83c\udf89 Nous vous souhaitons une merveilleuse journ\xe9e pour vos ${e.age} ans. L'\xe9quipe du cabinet vous adresse ses meilleurs v\u0153ux ! \ud83c\udf82`,s=`https://wa.me/${e.numero_whatsapp}?text=${encodeURIComponent(t)}`;window.open(s,"_blank")}else Pt.error("Num\xe9ro WhatsApp non disponible pour ce patient")})(e),className:"text-green-600 hover:text-green-700 p-1",title:"Envoyer message WhatsApp",children:(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.515z"})})}),(0,sa.jsx)("button",{className:"text-blue-600 hover:text-blue-700 p-1",title:"Envoyer SMS (\xe0 venir)",children:(0,sa.jsx)(ca,{className:"w-4 h-4"})})]})]})},e.id))}):(0,sa.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Aucun anniversaire aujourd'hui"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(da,{className:"w-4 h-4 text-blue-500"}),(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:"Relances t\xe9l\xe9phoniques"}),(0,sa.jsx)("span",{className:"bg-blue-100 text-blue-600 text-xs px-2 py-1 rounded-full",children:T.length})]}),T.length>0?(0,sa.jsx)("div",{className:"space-y-2",children:T.map(e=>(0,sa.jsx)("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-400 rounded-lg",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("button",{onClick:()=>ie(e.patient_id),className:"font-medium text-primary-600 hover:text-primary-800 underline cursor-pointer",children:[e.patient_prenom," ",e.patient_nom]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-600",children:[e.raison_relance," - RDV du ",new Date(e.date_rdv).toLocaleDateString("fr-FR")]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[e.consultation_id&&(0,sa.jsx)("button",{onClick:()=>le(e.consultation_id),className:"text-indigo-600 hover:text-indigo-700 p-1",title:"Voir la consultation",children:(0,sa.jsx)(ta,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>(async e=>{try{const t=(await Qn.get(`${G}/api/patients/${e.patient_id}`)).data.numero_whatsapp;if(t){console.log(`\ud83d\udcf1 Using FRESH WhatsApp number for ${e.patient_prenom}: ${t}`);const s=`Bonjour ${e.patient_prenom}, nous vous contactons pour le suivi de votre consultation du ${new Date(e.date_rdv).toLocaleDateString("fr-FR")}. Merci de nous rappeler pour planifier votre prochain rendez-vous si n\xe9cessaire.`,n=`https://wa.me/${t}?text=${encodeURIComponent(s)}`;window.open(n,"_blank"),Pt.success(`\u2705 WhatsApp ouvert avec le num\xe9ro ${t}`)}else Pt.error("Num\xe9ro WhatsApp non disponible pour ce patient")}catch(t){if(console.error("Error fetching fresh patient data:",t),e.numero_whatsapp){console.log(`\u26a0\ufe0f Using CACHED WhatsApp number as fallback: ${e.numero_whatsapp}`);const t=`Bonjour ${e.patient_prenom}, nous vous contactons pour le suivi de votre consultation du ${new Date(e.date_rdv).toLocaleDateString("fr-FR")}. Merci de nous rappeler pour planifier votre prochain rendez-vous si n\xe9cessaire.`,s=`https://wa.me/${e.numero_whatsapp}?text=${encodeURIComponent(t)}`;window.open(s,"_blank"),Pt.warning("\u26a0\ufe0f Utilisation du num\xe9ro en cache (donn\xe9es peut-\xeatre obsol\xe8tes)")}else Pt.error("Impossible de r\xe9cup\xe9rer le num\xe9ro WhatsApp du patient")}})(e),className:"text-green-600 hover:text-green-700 p-1",title:"Envoyer rappel WhatsApp",children:(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.515z"})})})]})]})},e.id))}):(0,sa.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Aucune relance programm\xe9e"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)("span",{className:"text-green-500",children:"\ud83d\udc89"}),(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:"Rappels vaccins"}),(0,sa.jsx)("span",{className:"bg-green-100 text-green-600 text-xs px-2 py-1 rounded-full",children:O.length})]}),O.length>0?(0,sa.jsx)("div",{className:"space-y-2",children:O.map(e=>(0,sa.jsx)("div",{className:"p-3 bg-green-50 border-l-4 border-green-400 rounded-lg",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("button",{onClick:()=>ie(e.patient_id),className:"font-medium text-primary-600 hover:text-primary-800 underline cursor-pointer",children:[e.patient_prenom," ",e.patient_nom]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-600",children:["\ud83d\udc89 ",e.nom_vaccin," - Pr\xe9vu le ",new Date(e.date_vaccin).toLocaleDateString("fr-FR")]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[e.consultation_id&&(0,sa.jsx)("button",{onClick:()=>le(e.consultation_id),className:"text-indigo-600 hover:text-indigo-700 p-1",title:"Voir la consultation",children:(0,sa.jsx)(ta,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>(async e=>{try{const t=(await Qn.get(`${G}/api/patients/${e.patient_id}`)).data.numero_whatsapp;if(t){console.log(`\ud83d\udcf1 Using FRESH WhatsApp number for ${e.patient_prenom}: ${t}`);const s=`\ud83e\ude7a Rappel Vaccin - Cabinet M\xe9dical\n\nBonjour ${e.patient_prenom},\n\nNous vous rappelons que le vaccin ${e.nom_vaccin} est pr\xe9vu pour le ${new Date(e.date_vaccin).toLocaleDateString("fr-FR")}.\n\nMerci de prendre rendez-vous si ce n'est pas encore fait.\n\n\xc9quipe du cabinet`,n=`https://wa.me/${t}?text=${encodeURIComponent(s)}`;window.open(n,"_blank"),Pt.success(`\u2705 WhatsApp ouvert avec le num\xe9ro ${t}`)}else Pt.error("Num\xe9ro WhatsApp non disponible pour ce patient")}catch(t){if(console.error("Error fetching fresh patient data:",t),e.numero_whatsapp){console.log(`\u26a0\ufe0f Using CACHED WhatsApp number as fallback: ${e.numero_whatsapp}`);const t=`\ud83e\ude7a Rappel Vaccin - Cabinet M\xe9dical\n\nBonjour ${e.patient_prenom},\n\nNous vous rappelons que le vaccin ${e.nom_vaccin} est pr\xe9vu pour le ${new Date(e.date_vaccin).toLocaleDateString("fr-FR")}.\n\nMerci de prendre rendez-vous si ce n'est pas encore fait.\n\n\xc9quipe du cabinet`,s=`https://wa.me/${e.numero_whatsapp}?text=${encodeURIComponent(t)}`;window.open(s,"_blank"),Pt.warning("\u26a0\ufe0f Utilisation du num\xe9ro en cache (donn\xe9es peut-\xeatre obsol\xe8tes)")}else Pt.error("Impossible de r\xe9cup\xe9rer le num\xe9ro WhatsApp du patient")}})(e),className:"text-green-600 hover:text-green-700 p-1",title:"Envoyer rappel vaccin WhatsApp",children:(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.515z"})})})]})]})},e.id))}):(0,sa.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Aucun rappel vaccin aujourd'hui"})]})]})]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 responsive-padding",children:[(0,sa.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4",children:"Actions Rapides"}),(0,sa.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,sa.jsxs)("button",{onClick:()=>{try{b("/patients?action=add")}catch(e){console.error("Navigation error:",e),Pt.error("Erreur lors de l'ouverture de la page patients")}},className:"w-full flex items-center justify-between p-2 sm:p-3 bg-primary-50 hover:bg-primary-100 rounded-lg transition-colors",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,sa.jsx)(ia,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-600"}),(0,sa.jsx)("span",{className:"font-medium text-primary-900 responsive-text",children:"Ajouter un patient"})]}),(0,sa.jsx)("div",{className:"text-primary-600",children:"\u2192"})]}),(0,sa.jsxs)("button",{onClick:()=>{b("/calendar?action=add")},className:"w-full flex items-center justify-between p-2 sm:p-3 bg-secondary-50 hover:bg-secondary-100 rounded-lg transition-colors",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 sm:w-5 sm:h-5 text-secondary-600"}),(0,sa.jsx)("span",{className:"font-medium text-secondary-900 responsive-text",children:"Nouveau RDV"})]}),(0,sa.jsx)("div",{className:"text-secondary-600",children:"\u2192"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,sa.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:(0,sa.jsx)(ua,{className:"w-4 h-4 text-gray-600"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Messagerie Interne"}),(0,sa.jsx)("p",{className:"text-sm text-gray-500",children:"Communication \xe9quipe"})]})]}),(0,sa.jsx)("button",{onClick:async()=>{if(window.confirm("\ud83d\uddd1\ufe0f VIDER LE CHAT\n\n\xcates-vous s\xfbr de vouloir supprimer TOUS les messages ?\n\nCette action est IRR\xc9VERSIBLE.\n\n\u26a0\ufe0f Cliquez OK pour confirmer la suppression."))try{await Qn.delete(`${G}/api/messages`),I([])}catch(e){console.error("Error clearing messages:",e),Pt.error("\u274c Erreur lors de la suppression des messages")}},className:"px-3 py-1 text-xs text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Vider la conversation",children:"Vider"})]})}),(0,sa.jsxs)("div",{className:"flex flex-col h-80",children:[(0,sa.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[z.length>0?z.map(e=>(0,sa.jsx)("div",{className:"flex "+(e.sender_type===g.role?"justify-end":"justify-start"),children:(0,sa.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-3 rounded-2xl shadow-sm "+(e.sender_type===g.role?"bg-gradient-to-r from-blue-100 to-indigo-100 text-slate-700 border border-blue-200":"bg-gradient-to-r from-rose-50 to-pink-50 text-slate-700 border border-rose-200"),children:[e.reply_to&&(0,sa.jsxs)("div",{className:"text-xs mb-3 p-3 rounded-xl border-l-3 "+(e.sender_type===g.role?"bg-white bg-opacity-60 border-indigo-300 text-slate-600":"bg-white bg-opacity-80 border-rose-300 text-slate-600"),children:[(0,sa.jsx)("div",{className:"font-medium text-xs text-slate-500",children:"\u21b3 R\xe9ponse \xe0"}),(0,sa.jsxs)("div",{className:"italic text-xs text-slate-600 mt-1",children:[e.reply_content.substring(0,40),"..."]})]}),(0,sa.jsx)("div",{className:"text-sm leading-relaxed font-medium",children:e.content}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-3 text-xs",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("span",{className:"font-semibold text-xs text-slate-600",children:oe(e.sender_name,e.sender_type)}),(0,sa.jsx)("span",{className:"text-xs text-slate-500 font-medium",children:new Date(e.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),e.is_edited&&(0,sa.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(e.sender_type===g.role?"bg-indigo-200 bg-opacity-60 text-indigo-700":"bg-rose-200 bg-opacity-60 text-rose-700"),children:"modifi\xe9"}),e.sender_type===g.role&&(0,sa.jsx)("span",{className:"text-xs font-medium "+(e.is_read?"text-blue-600":"text-slate-400"),children:e.is_read?"\u2713\u2713 VU":"\u2713 ENVOY\xc9"})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-1",children:[e.sender_type===g.role&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{H(e),q(e.content)})(e)},className:"p-1.5 rounded-full hover:bg-white hover:bg-opacity-50 transition-all duration-200 hover:shadow-sm",title:"Modifier",children:(0,sa.jsx)("svg",{className:"w-3 h-3 text-slate-500 hover:text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,sa.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(async e=>{console.log("\ud83d\uddd1\ufe0f Delete button clicked for message:",e);const t=z.find(t=>t.id===e);if(!t)return console.log("\u274c Message not found in current messages"),void Pt.error("Message introuvable");Q({show:!0,messageId:e,messageContent:t.content})})(e.id)},className:"p-1.5 rounded-full hover:bg-red-100 hover:bg-opacity-50 transition-all duration-200 hover:shadow-sm",title:"Supprimer",children:(0,sa.jsx)("svg",{className:"w-3 h-3 text-slate-500 hover:text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,sa.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(e=>{V(e),he(e.id)})(e)},className:"p-1.5 rounded-full hover:bg-white hover:bg-opacity-50 transition-all duration-200 hover:shadow-sm",title:"R\xe9pondre",children:(0,sa.jsx)("svg",{className:"w-3 h-3 text-slate-500 hover:text-slate-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})})]})]})]})},e.id)):(0,sa.jsxs)("div",{className:"text-center text-gray-400 py-12",children:[(0,sa.jsx)(ua,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),(0,sa.jsx)("p",{className:"text-sm font-medium",children:"Aucun message"}),(0,sa.jsx)("p",{className:"text-xs mt-1",children:"Commencez une conversation"})]}),(0,sa.jsx)("div",{ref:K})]}),B&&(0,sa.jsx)("div",{className:"mx-4 mb-3 p-3 bg-gray-50 border-l-4 border-gray-400 rounded",children:(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"text-xs font-medium text-gray-700 mb-1",children:["R\xe9ponse \xe0 ",oe(B.sender_name,B.sender_type)]}),(0,sa.jsxs)("span",{className:"text-sm text-gray-600 italic",children:['"',B.content.substring(0,60),'..."']})]}),(0,sa.jsx)("button",{onClick:()=>V(null),className:"text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100 transition-colors",children:(0,sa.jsx)(ha,{className:"w-4 h-4"})})]})}),(0,sa.jsx)("div",{className:"border-t border-gray-200 p-4",children:U?(0,sa.jsxs)("div",{className:"flex space-x-2",children:[(0,sa.jsx)("input",{type:"text",value:W,onChange:e=>q(e.target.value),className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:"Modifier le message...",onKeyPress:e=>{"Enter"===e.key&&ue()}}),(0,sa.jsx)("button",{onClick:ue,className:"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Sauvegarder",children:"\u2713"}),(0,sa.jsx)("button",{onClick:()=>{H(null),q("")},className:"px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",title:"Annuler",children:"\u2715"})]}):(0,sa.jsxs)("div",{className:"flex space-x-2",children:[(0,sa.jsx)("input",{type:"text",value:F,onChange:e=>$(e.target.value),className:"flex-1 px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:border-transparent",placeholder:B?`R\xe9pondre \xe0 ${oe(B.sender_name,B.sender_type)}...`:"Tapez votre message...",onKeyPress:e=>{"Enter"===e.key&&de()}}),(0,sa.jsx)("button",{onClick:de,disabled:!F.trim(),className:"px-4 py-2 rounded-lg transition-colors "+(F.trim()?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-500 cursor-not-allowed"),title:"Envoyer message",children:(0,sa.jsx)(ca,{className:"w-4 h-4"})})]})})]})]}),M&&C&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Consultation - ",null===(t=C.patient)||void 0===t?void 0:t.prenom," ",null===(s=C.patient)||void 0===s?void 0:s.nom]}),(0,sa.jsx)("button",{onClick:()=>P(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations g\xe9n\xe9rales"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:null!==(n=C.appointment)&&void 0!==n&&n.date?new Date(C.appointment.date).toLocaleDateString("fr-FR"):new Date(C.date).toLocaleDateString("fr-FR")})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Heure:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(a=C.appointment)||void 0===a?void 0:a.heure)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Type:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(i=C.appointment)||void 0===i?void 0:i.type_rdv)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Motif:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(l=C.appointment)||void 0===l?void 0:l.motif)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Dur\xe9e:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[C.duree||0," minutes"]})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nom:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[null===(o=C.patient)||void 0===o?void 0:o.prenom," ",null===(c=C.patient)||void 0===c?void 0:c.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xc2ge:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(d=C.patient)||void 0===d?void 0:d.age)||"N/A"})]})]})]}),(C.poids||C.taille)&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mesures"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[C.poids&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Poids:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[C.poids," kg"]})]}),C.taille&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Taille:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[C.taille," cm"]})]})]})]}),(0,sa.jsxs)("div",{className:"lg:col-span-2",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Consultation"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Observations:"}),(0,sa.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:C.observations||"Aucune observation"})})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Bilan/Traitement:"}),(0,sa.jsx)("div",{className:"mt-1 p-3 bg-gray-50 rounded-lg",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:C.bilan||C.traitement||"Aucun bilan"})})]})]})]})]}),(0,sa.jsx)("div",{className:"flex justify-end mt-6",children:(0,sa.jsx)("button",{onClick:()=>P(!1),className:"btn-outline",children:"Fermer"})})]})})}),k&&w&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Fiche Patient - ",w.prenom," ",w.nom]}),(0,sa.jsxs)("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600",children:[(0,sa.jsx)("span",{className:"sr-only",children:"Fermer"}),"\xd7"]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations personnelles"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nom complet:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[w.prenom," ",w.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xc2ge:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:w.age||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date de naissance:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:w.date_naissance||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Adresse:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:w.adresse||"N/A"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Parents"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-700",children:"P\xe8re"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(u=w.pere)||void 0===u?void 0:u.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(h=w.pere)||void 0===h?void 0:h.telephone)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(m=w.pere)||void 0===m?void 0:m.fonction)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-700",children:"M\xe8re"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(p=w.mere)||void 0===p?void 0:p.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(x=w.mere)||void 0===x?void 0:x.telephone)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(f=w.mere)||void 0===f?void 0:f.fonction)||"N/A"})]})]})]}),(0,sa.jsxs)("div",{className:"md:col-span-2",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations m\xe9dicales"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Notes:"}),(0,sa.jsx)("p",{className:"text-gray-900 mt-1",children:w.notes||"Aucune note"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ant\xe9c\xe9dents:"}),(0,sa.jsx)("p",{className:"text-gray-900 mt-1",children:w.antecedents||"Aucun ant\xe9c\xe9dent"})]})]})]})]}),(0,sa.jsx)("div",{className:"flex justify-end mt-6",children:(0,sa.jsx)("button",{onClick:()=>S(!1),className:"btn-outline",children:"Fermer"})})]})})})]})},xa=Gn("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),fa=Gn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ga=Gn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ba=Gn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ya=Gn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),va=Gn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ja=Gn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Na=Gn("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),wa=e=>{let{isOpen:t,onClose:s,appointment:n,patients:a,formData:i,setFormData:l,onSave:o,onRefresh:c}=e;const[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(!1),[p,x]=(0,r.useState)({nom:"",prenom:"",telephone:""}),f="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com",g=async(e,t)=>{if(null!==t&&void 0!==t&&t.numero_whatsapp)try{const s=await Qn.post(`${f}/api/whatsapp-hub/send-confirmation`,{patient_id:t.id||e.patient_id,appointment_id:e.id,appointment_data:e});s.data.whatsapp_link&&Pt.success((0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{children:"RDV cr\xe9\xe9 avec succ\xe8s !"}),(0,sa.jsx)("button",{onClick:()=>window.open(s.data.whatsapp_link,"_blank"),className:"mt-2 text-green-600 underline hover:text-green-700",children:"\ud83d\udcf1 Ouvrir WhatsApp pour confirmer"})]}),{duration:5e3})}catch(s){console.error("Error sending auto-confirmation:",s),console.log("Auto-confirmation failed, but appointment was created successfully")}else console.log("Patient has no WhatsApp number, skipping auto-confirmation")};(0,r.useEffect)(()=>{if(t&&i.patient_id&&a.length>0){const e=a.find(e=>e.id===i.patient_id);e&&u(`${e.prenom} ${e.nom}`)}else t||u("")},[t,i.patient_id,a]);const b=a.filter(e=>`${e.prenom} ${e.nom}`.toLowerCase().includes(d.toLowerCase()));return t?(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:n?"Modifier le rendez-vous":"Nouveau rendez-vous"}),(0,sa.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-6 h-6"})})]}),(0,sa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i.date&&i.heure)if(h){if(!p.nom||!p.prenom)return void Pt.error("Veuillez remplir le nom et le pr\xe9nom du patient");try{const e=await fetch(`${f}/api/patients`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(e.ok){const t=await e.json();console.log("Patient created:",t);const s={patient_id:t.patient_id,date:i.date,heure:i.heure,type_rdv:i.type_rdv,motif:i.motif,notes:i.notes,statut:"programme"};console.log("Creating appointment with data:",s);const n=await o(s);n&&n.success?(m(!1),x({nom:"",prenom:"",telephone:""}),Pt.success("Patient cr\xe9\xe9 et rendez-vous programm\xe9 avec succ\xe8s"),await g(n.appointment||s,t)):Pt.error("Erreur lors de la cr\xe9ation du rendez-vous: "+((null===n||void 0===n?void 0:n.error)||"Erreur inconnue"))}else Pt.error("Erreur lors de la cr\xe9ation du patient")}catch(t){console.error("Error creating patient:",t),Pt.error("Erreur lors de la cr\xe9ation du patient")}}else{if(!i.patient_id)return void Pt.error("Veuillez s\xe9lectionner un patient");const e=await o(i);if(e&&e.success){const t=a.find(e=>e.id===i.patient_id);t&&await g(e.appointment||i,t)}}else Pt.error("Veuillez remplir la date et l'heure")},className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"Tapez le nom du patient - \xc9criture manuscrite support\xe9e",className:"search-stylus w-full pr-10",inputMode:"text",autoCapitalize:"words",autoComplete:"off"}),(0,sa.jsx)(va,{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400"})]}),d&&b.length>0&&(0,sa.jsx)("div",{className:"mt-2 border border-gray-200 rounded-lg max-h-40 overflow-y-auto",children:b.slice(0,5).map(e=>(0,sa.jsxs)("button",{type:"button",onClick:()=>(e=>{l(t=>({...t,patient_id:e.id})),u(`${e.prenom} ${e.nom}`)})(e),className:"w-full text-left px-3 py-2 hover:bg-gray-100 border-b border-gray-100 last:border-b-0",children:[e.prenom," ",e.nom]},e.id))}),(0,sa.jsx)("div",{className:"mt-3",children:(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked),className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Nouveau patient"})]})}),h&&(0,sa.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Cr\xe9er un nouveau patient"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,sa.jsx)("input",{type:"text",placeholder:"Nom - \xc9criture manuscrite support\xe9e",value:p.nom,onChange:e=>x(t=>({...t,nom:e.target.value})),className:"input-stylus",inputMode:"text",autoCapitalize:"words",autoComplete:"family-name"}),(0,sa.jsx)("input",{type:"text",placeholder:"Pr\xe9nom - \xc9criture manuscrite support\xe9e",value:p.prenom,onChange:e=>x(t=>({...t,prenom:e.target.value})),className:"input-stylus",inputMode:"text",autoCapitalize:"words",autoComplete:"given-name"}),(0,sa.jsx)("input",{type:"text",placeholder:"T\xe9l\xe9phone - \xc9criture manuscrite support\xe9e",value:p.telephone,onChange:e=>x(t=>({...t,telephone:e.target.value})),className:"input-stylus",inputMode:"tel",autoComplete:"tel"})]}),(0,sa.jsx)("p",{className:"mt-3 text-sm text-gray-600",children:'Utilisez le bouton "Cr\xe9er patient + RDV" ci-dessous pour cr\xe9er le patient et le rendez-vous en une seule action.'})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,sa.jsx)("input",{type:"date",value:i.date,onChange:e=>l(t=>({...t,date:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Heure"}),(0,sa.jsx)("input",{type:"time",value:i.heure,onChange:e=>l(t=>({...t,heure:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",required:!0})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de RDV"}),(0,sa.jsxs)("select",{value:i.type_rdv,onChange:e=>l(t=>({...t,type_rdv:e.target.value})),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[(0,sa.jsx)("option",{value:"visite",children:"Visite"}),(0,sa.jsx)("option",{value:"controle",children:"Contr\xf4le"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motif"}),(0,sa.jsx)("input",{type:"text",value:i.motif,onChange:e=>l(t=>({...t,motif:e.target.value})),placeholder:"Motif de la consultation - \xc9criture manuscrite support\xe9e",className:"input-stylus",inputMode:"text",autoCapitalize:"sentences",autoComplete:"off"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,sa.jsx)("textarea",{value:i.notes,onChange:e=>l(t=>({...t,notes:e.target.value})),placeholder:"Notes additionnelles - Optimis\xe9 pour Apple Pencil",rows:3,className:"textarea-stylus",inputMode:"text",autoCapitalize:"sentences"})]}),(0,sa.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,sa.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition-colors",children:"Annuler"}),(0,sa.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",children:n?"Modifier":h?"Cr\xe9er patient + RDV":"Cr\xe9er RDV"})]})]})]})})}):null},_a=e=>{var t,s,n,a,i,l;let{user:o}=e;const c=te(),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(0),[p,x]=(0,r.useState)(1),[f,g]=(0,r.useState)(0),[b,y]=(0,r.useState)(!0),[v,j]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(null),[E,M]=(0,r.useState)(!1),[P,A]=(0,r.useState)(!1),[D,T]=(0,r.useState)(!1),[R,O]=(0,r.useState)({patient_id:"",date:"",heure:"",type_rdv:"visite",motif:"",notes:"",statut:"programme"}),L=(0,r.useRef)(null),[z,I]=(0,r.useState)({nom:"",prenom:"",date_naissance:"",adresse:"",pere:{nom:"",telephone:"",fonction:""},mere:{nom:"",telephone:"",fonction:""},numero_whatsapp:"",notes:"",antecedents:"",sexe:"M",telephone:"",nom_parent:"",telephone_parent:"",assurance:"",numero_assurance:"",allergies:""}),F=()=>{I({nom:"",prenom:"",date_naissance:"",adresse:"",pere:{nom:"",telephone:"",fonction:""},mere:{nom:"",telephone:"",fonction:""},numero_whatsapp:"",notes:"",antecedents:"",sexe:"M",telephone:"",nom_parent:"",telephone_parent:"",assurance:"",numero_assurance:"",allergies:""}),C(null)},$=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;var t,s,n,a,r,i;e?(C(e),I({nom:e.nom||"",prenom:e.prenom||"",date_naissance:e.date_naissance||"",adresse:e.adresse||"",pere:{nom:(null===(t=e.pere)||void 0===t?void 0:t.nom)||"",telephone:(null===(s=e.pere)||void 0===s?void 0:s.telephone)||"",fonction:(null===(n=e.pere)||void 0===n?void 0:n.fonction)||""},mere:{nom:(null===(a=e.mere)||void 0===a?void 0:a.nom)||"",telephone:(null===(r=e.mere)||void 0===r?void 0:r.telephone)||"",fonction:(null===(i=e.mere)||void 0===i?void 0:i.fonction)||""},numero_whatsapp:e.numero_whatsapp||"",notes:e.notes||"",antecedents:e.antecedents||"",sexe:e.sexe||"M",telephone:e.telephone||"",nom_parent:e.nom_parent||"",telephone_parent:e.telephone_parent||"",assurance:e.assurance||"",numero_assurance:e.numero_assurance||"",allergies:e.allergies||""})):F();M(!0)},B=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{j(Boolean(t));const s=(e=>!!e.trim()&&!(e.includes("/")&&!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e))&&(!!/^\d+$/.test(e)||!!/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)||e.length>=2))(t)?(e=>{const t=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(t){const[,e,s,n]=t;return`${n}-${s.padStart(2,"0")}-${e.padStart(2,"0")}`}return e})(t):t,n=Date.now(),a=await Qn.get("https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/patients",{params:{page:e,limit:10,search:s||void 0,_t:n}}),{patients:r,total_count:i,total_pages:l}=a.data;u(r||[]),m(i||0),g(l||0),x(e)}catch(s){console.error("Error fetching patients:",s),Pt.error("Erreur lors du chargement des patients"),u([]),m(0),g(0)}finally{y(!1),j(!1)}},[]);(0,r.useEffect)(()=>{const e=new URLSearchParams(c.search),t=e.get("patient"),s=e.get("action");t&&(w(t),k(t)),"add"===s&&$()},[c.search]),(0,r.useEffect)(()=>{B(1,_)},[B,_]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{k(N)},300);return()=>clearTimeout(e)},[N]),(0,r.useEffect)(()=>{const e=()=>{document.hidden||(console.log("\ud83d\udd04 Page visible again, refreshing patient data..."),B(p,_))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[p,_,B]),(0,r.useEffect)(()=>{_===N&&B(1,_)},[_,B]),(0,r.useEffect)(()=>{p>1&&B(p,_)},[p,B,_]);const V=e=>e?new Date(e).toLocaleDateString("fr-FR"):"N/A",U=(0,r.useCallback)(e=>{w(e.target.value),x(1)},[]),H=(0,r.useMemo)(()=>({ref:L,type:"text",placeholder:"Rechercher par nom, pr\xe9nom ou date de naissance (dd/mm/yyyy) - \xc9criture manuscrite support\xe9e",defaultValue:N,onChange:U,className:"search-stylus w-full pl-8 sm:pl-10 pr-4",inputMode:"text",autoCapitalize:"words",autoComplete:"off",key:"search-input"}),[U,N]),W=(0,r.useCallback)(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce patient ?"))try{await Qn.delete(`https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/patients/${e}`),Pt.success("Patient supprim\xe9 avec succ\xe8s"),B()}catch(t){console.error("Error deleting patient:",t),Pt.error("Erreur lors de la suppression du patient")}},[B]),q=e=>{O({patient_id:e.id,date:"",heure:"",type_rdv:"visite",motif:"",notes:"",statut:"programme"}),C(e),T(!0)},Y=async e=>{try{const t=await Qn.get(`https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/patients/${e}`);C(t.data),A(!0)}catch(t){console.error("Error fetching patient details:",t),Pt.error("Erreur lors du chargement des d\xe9tails du patient")}},Q=(0,r.useMemo)(()=>d.map(e=>{var t,s,n,a;return(0,sa.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:[(0,sa.jsx)("div",{className:"hidden md:block p-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-11 gap-4 items-center",children:[(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("button",{onClick:()=>Y(e.id),className:"text-left hover:text-primary-600 transition-colors",children:(0,sa.jsxs)("div",{className:"font-semibold text-gray-900",children:[e.prenom," ",e.nom]})})}),(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("span",{className:"text-sm text-gray-600",children:V(e.date_naissance)})}),(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("span",{className:"text-sm text-gray-600",children:(null===(t=e.mere)||void 0===t?void 0:t.nom)||"N/A"})}),(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("span",{className:"text-sm text-gray-600",children:(null===(s=e.mere)||void 0===s?void 0:s.telephone)||"N/A"})}),(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("span",{className:"text-sm text-gray-600 truncate block",children:e.adresse||"N/A"})}),(0,sa.jsx)("div",{className:"col-span-1",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-1",children:[e.lien_whatsapp?(0,sa.jsx)("a",{href:e.lien_whatsapp,target:"_blank",rel:"noopener noreferrer",className:"p-2 text-gray-400 hover:text-green-600 rounded-lg hover:bg-green-50 transition-colors",title:"Envoyer WhatsApp",children:(0,sa.jsx)(ua,{className:"w-4 h-4"})}):(0,sa.jsx)("span",{className:"p-2 text-gray-300",title:"WhatsApp non disponible",children:(0,sa.jsx)(ua,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>q(e),className:"p-2 text-gray-400 hover:text-blue-600 rounded-lg hover:bg-blue-50",title:"Ajouter RDV",children:(0,sa.jsx)(aa,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>$(e),className:"p-2 text-gray-400 hover:text-primary-600 rounded-lg hover:bg-primary-50",title:"Modifier patient",children:(0,sa.jsx)(xa,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>W(e.id),className:"p-2 text-gray-400 hover:text-red-600 rounded-lg hover:bg-red-50",title:"Supprimer patient",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})})]})})]})}),(0,sa.jsxs)("div",{className:"md:hidden p-4",children:[(0,sa.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("button",{onClick:()=>Y(e.id),className:"text-left hover:text-primary-600 transition-colors",children:(0,sa.jsxs)("h3",{className:"font-semibold text-gray-900",children:[e.prenom," ",e.nom]})}),(0,sa.jsx)("p",{className:"text-sm text-gray-500",children:V(e.date_naissance)})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-1",children:[e.lien_whatsapp?(0,sa.jsx)("a",{href:e.lien_whatsapp,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 text-gray-400 hover:text-green-600 rounded-lg hover:bg-green-50 transition-colors",title:"Envoyer WhatsApp",children:(0,sa.jsx)(ua,{className:"w-4 h-4"})}):(0,sa.jsx)("span",{className:"p-1.5 text-gray-300",title:"WhatsApp non disponible",children:(0,sa.jsx)(ua,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>q(e),className:"p-1.5 text-gray-400 hover:text-blue-600 rounded-lg hover:bg-blue-50",title:"Ajouter RDV",children:(0,sa.jsx)(aa,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>$(e),className:"p-1.5 text-gray-400 hover:text-primary-600 rounded-lg hover:bg-primary-50",title:"Modifier patient",children:(0,sa.jsx)(xa,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>W(e.id),className:"p-1.5 text-gray-400 hover:text-red-600 rounded-lg hover:bg-red-50",title:"Supprimer patient",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})})]})]}),(0,sa.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,sa.jsx)(Jn,{className:"w-4 h-4 text-gray-400"}),(0,sa.jsxs)("span",{children:["M\xe8re: ",(null===(n=e.mere)||void 0===n?void 0:n.nom)||"N/A"]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,sa.jsx)(ga,{className:"w-4 h-4 text-gray-400"}),(0,sa.jsxs)("span",{children:["Tel m\xe8re: ",(null===(a=e.mere)||void 0===a?void 0:a.telephone)||"N/A"]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,sa.jsx)(ba,{className:"w-4 h-4 text-gray-400"}),(0,sa.jsx)("span",{className:"truncate",children:e.adresse||"N/A"})]})]})]})]},e.id)}),[d,W,q]);return b?(0,sa.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-4 mb-4 sm:mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("h1",{className:"responsive-title font-bold text-gray-900",children:"Patients"}),(0,sa.jsxs)("span",{className:"bg-primary-100 text-primary-800 text-sm font-medium px-3 py-1 rounded-full",children:["Total: ",h]})]}),(0,sa.jsx)("p",{className:"text-gray-600 responsive-text",children:"Gestion des fiches patients"})]}),(0,sa.jsxs)("button",{onClick:()=>$(),className:"btn-primary flex items-center justify-center space-x-2 responsive-button",children:[(0,sa.jsx)(ya,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,sa.jsx)("span",{children:"Nouveau Patient"})]})]}),(0,sa.jsxs)("div",{className:"relative mb-4 sm:mb-6",children:[(0,sa.jsx)(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 sm:w-5 sm:h-5"}),(0,sa.jsx)("input",{...H}),v&&(0,sa.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-500"})})]}),(0,sa.jsx)("div",{className:"hidden md:block",children:(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-11 gap-4 text-sm font-medium text-gray-600",children:[(0,sa.jsx)("div",{className:"col-span-2",children:"Nom Pr\xe9nom"}),(0,sa.jsx)("div",{className:"col-span-2",children:"Date naissance"}),(0,sa.jsx)("div",{className:"col-span-2",children:"Nom m\xe8re"}),(0,sa.jsx)("div",{className:"col-span-2",children:"Tel m\xe8re"}),(0,sa.jsx)("div",{className:"col-span-2",children:"Adresse"}),(0,sa.jsx)("div",{className:"col-span-1",children:"Actions"})]})})}),(0,sa.jsx)("div",{className:"space-y-3",children:Q}),f>1&&(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-700",children:["Affichage ",10*(p-1)+1," \xe0 ",Math.min(10*p,h)," sur ",h," patients"]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>x(e=>Math.max(1,e-1)),disabled:1===p,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,sa.jsx)(ja,{className:"w-4 h-4"})}),(0,sa.jsx)("div",{className:"flex items-center space-x-1",children:[...Array(f)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>x(t+1),className:"px-3 py-1 rounded-lg text-sm "+(p===t+1?"bg-primary-500 text-white":"text-gray-600 hover:bg-gray-100"),children:t+1},t))}),(0,sa.jsx)("button",{onClick:()=>x(e=>Math.min(f,e+1)),disabled:p===f,className:"p-2 text-gray-400 hover:text-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,sa.jsx)(Na,{className:"w-4 h-4"})})]})]}),E&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:S?"Modifier le patient":"Nouveau patient"}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),S?(async()=>{try{await Qn.put(`https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/patients/${S.id}`,z),Pt.success("Patient mis \xe0 jour avec succ\xe8s"),M(!1),F(),B(),console.log("\ud83d\udce1 Emitting patientDataUpdated event for Dashboard refresh"),window.dispatchEvent(new CustomEvent("patientDataUpdated",{detail:{patientId:S.id,updatedData:z,timestamp:(new Date).toISOString()}}))}catch(e){console.error("Error updating patient:",e),Pt.error("Erreur lors de la mise \xe0 jour du patient")}})():(async()=>{try{await Qn.post("https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/patients",z),Pt.success("Patient cr\xe9\xe9 avec succ\xe8s"),M(!1),F(),B()}catch(e){console.error("Error creating patient:",e),Pt.error("Erreur lors de la cr\xe9ation du patient")}})()},children:[(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations personnelles"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),(0,sa.jsx)("input",{type:"text",value:z.nom,onChange:e=>I({...z,nom:e.target.value}),className:"input-stylus",placeholder:"Nom de famille - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"family-name",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xe9nom *"}),(0,sa.jsx)("input",{type:"text",value:z.prenom,onChange:e=>I({...z,prenom:e.target.value}),className:"input-stylus",placeholder:"Pr\xe9nom - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"given-name",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de naissance"}),(0,sa.jsx)("input",{type:"date",value:z.date_naissance,onChange:e=>I({...z,date_naissance:e.target.value}),className:"input-field"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse"}),(0,sa.jsx)("input",{type:"text",value:z.adresse,onChange:e=>I({...z,adresse:e.target.value}),className:"input-stylus",placeholder:"Adresse compl\xe8te - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"street-address"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations des parents"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"P\xe8re"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),(0,sa.jsx)("input",{type:"text",value:z.pere.nom,onChange:e=>I({...z,pere:{...z.pere,nom:e.target.value}}),className:"input-stylus",placeholder:"Nom du p\xe8re - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"name"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone"}),(0,sa.jsx)("input",{type:"tel",value:z.pere.telephone,onChange:e=>I({...z,pere:{...z.pere,telephone:e.target.value}}),className:"input-stylus",placeholder:"Num\xe9ro du p\xe8re - \xc9criture manuscrite support\xe9e",inputMode:"tel",autoComplete:"tel"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fonction"}),(0,sa.jsx)("input",{type:"text",value:z.pere.fonction,onChange:e=>I({...z,pere:{...z.pere,fonction:e.target.value}}),className:"input-stylus",placeholder:"Profession du p\xe8re - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"organization-title"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"M\xe8re"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom"}),(0,sa.jsx)("input",{type:"text",value:z.mere.nom,onChange:e=>I({...z,mere:{...z.mere,nom:e.target.value}}),className:"input-stylus",placeholder:"Nom de la m\xe8re - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"name"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone"}),(0,sa.jsx)("input",{type:"tel",value:z.mere.telephone,onChange:e=>I({...z,mere:{...z.mere,telephone:e.target.value}}),className:"input-stylus",placeholder:"Num\xe9ro de la m\xe8re - \xc9criture manuscrite support\xe9e",inputMode:"tel",autoComplete:"tel"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fonction"}),(0,sa.jsx)("input",{type:"text",value:z.mere.fonction,onChange:e=>I({...z,mere:{...z.mere,fonction:e.target.value}}),className:"input-stylus",placeholder:"Profession de la m\xe8re - \xc9criture manuscrite support\xe9e",inputMode:"text",autoCapitalize:"words",autoComplete:"organization-title"})]})]})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact et informations m\xe9dicales"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Num\xe9ro WhatsApp",(0,sa.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"(216xxxxxxxx)"})]}),(0,sa.jsx)("input",{type:"tel",value:z.numero_whatsapp,onChange:e=>I({...z,numero_whatsapp:e.target.value}),className:"input-stylus",placeholder:"216xxxxxxxx - \xc9criture manuscrite support\xe9e",inputMode:"tel",autoComplete:"tel"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sexe"}),(0,sa.jsxs)("select",{value:z.sexe,onChange:e=>I({...z,sexe:e.target.value}),className:"input-field",children:[(0,sa.jsx)("option",{value:"M",children:"Masculin"}),(0,sa.jsx)("option",{value:"F",children:"F\xe9minin"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,sa.jsx)("textarea",{value:z.notes,onChange:e=>I({...z,notes:e.target.value}),className:"textarea-stylus",placeholder:"Notes g\xe9n\xe9rales - Optimis\xe9 pour Apple Pencil",inputMode:"text",autoCapitalize:"sentences",rows:"3"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ant\xe9c\xe9dents"}),(0,sa.jsx)("textarea",{value:z.antecedents,onChange:e=>I({...z,antecedents:e.target.value}),className:"textarea-stylus",placeholder:"Ant\xe9c\xe9dents m\xe9dicaux - Optimis\xe9 pour Apple Pencil",inputMode:"text",autoCapitalize:"sentences",rows:"3"})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>M(!1),className:"btn-outline",children:"Annuler"}),(0,sa.jsx)("button",{type:"submit",className:"btn-primary",children:S?"Modifier":"Cr\xe9er"})]})]})]})})}),P&&S&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"D\xe9tails du patient"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsxs)("button",{onClick:()=>((e,t)=>{const s=new URLSearchParams({patient:e,patientName:t||""});window.location.href=`/consultation?${s.toString()}`})(S.id,`${S.prenom} ${S.nom}`),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm transition-colors",children:[(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,sa.jsx)("span",{children:"Voir Consultations"})]}),(0,sa.jsx)("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations personnelles"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nom complet:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[S.prenom," ",S.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date de naissance:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:V(S.date_naissance)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xc2ge:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:S.age||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Sexe:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:"M"===S.sexe?"Masculin":"F\xe9minin"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Adresse:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:S.adresse||"N/A"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"P\xe8re:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(t=S.pere)||void 0===t?void 0:t.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(s=S.pere)||void 0===s?void 0:s.telephone)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(n=S.pere)||void 0===n?void 0:n.fonction)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"M\xe8re:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(a=S.mere)||void 0===a?void 0:a.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(i=S.mere)||void 0===i?void 0:i.telephone)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(l=S.mere)||void 0===l?void 0:l.fonction)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"WhatsApp:"}),S.lien_whatsapp?(0,sa.jsx)("a",{href:S.lien_whatsapp,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800",children:"Contacter"}):(0,sa.jsx)("p",{className:"text-gray-900",children:"N/A"})]})]})]}),(0,sa.jsxs)("div",{className:"md:col-span-2",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations m\xe9dicales"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Notes:"}),(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:S.notes||"Aucune note"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ant\xe9c\xe9dents:"}),(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:S.antecedents||"Aucun ant\xe9c\xe9dent"})]})]})]})]})]})})}),D&&S&&(0,sa.jsx)(wa,{isOpen:D,onClose:()=>{T(!1),C(null)},appointment:null,patients:d,formData:R,setFormData:O,onSave:async e=>{try{const t=await Qn.post("https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/appointments",e);if(200===t.status||201===t.status){const t=S||d.find(t=>t.id===e.patient_id),s=t?`${t.prenom} ${t.nom}`:"le patient";return Pt.success(`Rendez-vous cr\xe9\xe9 avec succ\xe8s pour ${s}`),T(!1),C(null),O({patient_id:"",date:"",heure:"",type_rdv:"visite",motif:"",notes:"",statut:"programme"}),B(p,_),{success:!0}}return{success:!1,error:"Erreur lors de la cr\xe9ation du rendez-vous"}}catch(n){var t,s;return console.error("Error creating appointment:",n),{success:!1,error:(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.detail)||"Erreur lors de la cr\xe9ation du rendez-vous"}}},onRefresh:()=>B(p,_),selectedPatient:S})]})},ka=Gn("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),Sa=Gn("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),Ca=Gn("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Ea=Gn("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Ma=Gn("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Pa=Gn("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Aa=Gn("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Da=Gn("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Ta=Gn("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]),Ra=Gn("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Oa=Gn("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),La=Gn("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),za=Gn("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ia=Gn("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Fa=Gn("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),$a=Gn("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ba=Gn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Va=Gn("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ua=Gn("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Ha=e=>{let{isOpen:t,onClose:s,patient:n,appointment:a,queueContext:i=null}=e;const[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[x,f]=(0,r.useState)(""),[g,b]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[j,N]=(0,r.useState)(1),[w,_]=(0,r.useState)(!1),k="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com";(0,r.useEffect)(()=>{t&&(S(),N(1),d(null),h(""),p(""),_(!1))},[t]);const S=async()=>{v(!0);try{const e=await Qn.get(`${k}/api/whatsapp-hub/templates`);o(e.data.templates||[])}catch(e){console.error("Error fetching templates:",e),Pt.error("Erreur lors du chargement des templates")}finally{v(!1)}},C=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;v(!0);try{const s=await Qn.post(`${k}/api/whatsapp-hub/prepare-message`,{patient_id:n.id,template_id:e,custom_message:t});p(s.data.message.content),f(s.data.message.whatsapp_link),b(s.data.ai_suggestions||[]),N(2)}catch(s){console.error("Error preparing message:",s),Pt.error("Erreur lors de la pr\xe9paration du message")}finally{v(!1)}},E=()=>{p(u),_(!1);const e=n.numero_whatsapp.replace(/\D/g,""),t=e.startsWith("216")?e:"216"+e,s=encodeURIComponent(u);f(`https://wa.me/${t}?text=${s}`),Pt.success("Message modifi\xe9 avec succ\xe8s")},M=()=>{_(!1),h(m)},P=e=>{switch(e){case"confirmation":return(0,sa.jsx)(Ca,{className:"w-5 h-5 text-green-500"});case"attente":return(0,sa.jsx)(ra,{className:"w-5 h-5 text-blue-500"});case"ajustement":return(0,sa.jsx)(Fa,{className:"w-5 h-5 text-yellow-500"});case"urgence":return(0,sa.jsx)($a,{className:"w-5 h-5 text-red-500"});default:return(0,sa.jsx)(ua,{className:"w-5 h-5 text-gray-500"})}},A=e=>({confirmation:"Confirmation",attente:"Salle d'attente",ajustement:"Ajustement RDV",urgence:"Urgence",rappel:"Rappel",annulation:"Annulation"}[e]||e);return t?(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(ua,{className:"w-8 h-8 text-green-500"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Message WhatsApp"}),(0,sa.jsxs)("p",{className:"text-gray-600",children:[n.prenom," ",n.nom," - ",n.numero_whatsapp]})]})]}),(0,sa.jsx)("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,sa.jsx)(ha,{className:"w-6 h-6"})})]}),(0,sa.jsx)("div",{className:"px-6 py-4 bg-gray-50",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 "+(j>=1?"text-primary-600":"text-gray-400"),children:[(0,sa.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(j>=1?"bg-primary-600 text-white":"bg-gray-200"),children:"1"}),(0,sa.jsx)("span",{className:"font-medium",children:"Template"})]}),(0,sa.jsx)("div",{className:"flex-1 h-px bg-gray-300"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 "+(j>=2?"text-primary-600":"text-gray-400"),children:[(0,sa.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(j>=2?"bg-primary-600 text-white":"bg-gray-200"),children:"2"}),(0,sa.jsx)("span",{className:"font-medium",children:"Message"})]}),(0,sa.jsx)("div",{className:"flex-1 h-px bg-gray-300"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 "+(j>=3?"text-primary-600":"text-gray-400"),children:[(0,sa.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+(j>=3?"bg-primary-600 text-white":"bg-gray-200"),children:"3"}),(0,sa.jsx)("span",{className:"font-medium",children:"Envoi"})]})]})}),(0,sa.jsxs)("div",{className:"p-6",children:[1===j&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Choisir un Template"}),y?(0,sa.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):(0,sa.jsx)("div",{className:"space-y-4",children:Object.entries((()=>{const e={};return l.forEach(t=>{e[t.category]||(e[t.category]=[]),e[t.category].push(t)}),e})()).map(e=>{let[t,s]=e;return(0,sa.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,sa.jsxs)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center space-x-2",children:[P(t),(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:A(t)}),(0,sa.jsxs)("span",{className:"text-sm text-gray-500",children:["(",s.length,")"]})]}),(0,sa.jsx)("div",{className:"p-4 space-y-3",children:s.map(e=>(0,sa.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 cursor-pointer transition-colors",onClick:()=>(e=>{d(e),h(""),C(e.id)})(e),children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),e.auto_send&&(0,sa.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full",children:"Auto"})]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-600 bg-gray-50 p-2 rounded",children:[e.content.substring(0,150),"..."]})]},e.id))})]},t)})})]}),(0,sa.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Ou \xe9crire un message personnalis\xe9"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),rows:4,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Tapez votre message personnalis\xe9 ici..."}),(0,sa.jsx)("button",{onClick:()=>{u.trim()?(d(null),C(null,u.trim())):Pt.error("Veuillez saisir un message personnalis\xe9")},disabled:!u.trim()||y,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 disabled:bg-gray-300 transition-colors",children:"Utiliser ce message"})]})]})]}),2===j&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"V\xe9rifier et Modifier le Message"}),g.length>0&&(0,sa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,sa.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"\ud83d\udca1 Suggestions IA"}),(0,sa.jsx)("ul",{className:"space-y-1",children:g.map((e,t)=>(0,sa.jsx)("li",{className:"text-sm text-blue-700",children:e},t))})]}),(0,sa.jsxs)("div",{className:"border border-gray-200 rounded-lg",children:[(0,sa.jsxs)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"font-medium text-gray-900",children:w?"\xc9diter le Message":"Aper\xe7u du Message"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(m),Pt.success("Message copi\xe9 dans le presse-papiers")},className:"p-1 hover:bg-gray-200 rounded",title:"Copier le message",children:(0,sa.jsx)(Ba,{className:"w-4 h-4"})}),w?(0,sa.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,sa.jsx)("button",{onClick:E,className:"p-1 hover:bg-green-200 rounded text-green-600",title:"Sauvegarder",children:(0,sa.jsx)(Ca,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:M,className:"p-1 hover:bg-red-200 rounded text-red-600",title:"Annuler",children:(0,sa.jsx)(ha,{className:"w-4 h-4"})})]}):(0,sa.jsx)("button",{onClick:()=>{_(!0),h(m)},className:"p-1 hover:bg-gray-200 rounded",title:"Modifier le message",children:(0,sa.jsx)(Va,{className:"w-4 h-4"})})]})]}),(0,sa.jsx)("div",{className:"p-4",children:w?(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("textarea",{value:u,onChange:e=>h(e.target.value),rows:6,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Modifiez votre message ici..."}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500",children:[u.length," caract\xe8res"]})]}):(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"bg-green-100 rounded-lg p-3 inline-block max-w-full",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:m})}),(0,sa.jsxs)("div",{className:"mt-3 text-xs text-gray-500",children:[m.length," caract\xe8res"]})]})})]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("button",{onClick:()=>N(1),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",disabled:w,children:"Retour"}),w?(0,sa.jsxs)("div",{className:"flex-1 flex items-center space-x-2",children:[(0,sa.jsxs)("button",{onClick:E,className:"flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2",children:[(0,sa.jsx)(Ca,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Sauvegarder les modifications"})]}),(0,sa.jsx)("button",{onClick:M,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Annuler"})]}):(0,sa.jsxs)("button",{onClick:()=>{N(3)},className:"flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2",children:[(0,sa.jsx)(ua,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Pr\xe9parer l'envoi WhatsApp"})]})]})]}),3===j&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,sa.jsx)(ua,{className:"w-8 h-8 text-green-600"})}),(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirmer l'envoi WhatsApp"}),(0,sa.jsxs)("p",{className:"text-gray-600",children:["Le message sera ouvert dans WhatsApp Web pour envoi \xe0 ",n.prenom," ",n.nom]})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Message \xe0 envoyer :"}),(0,sa.jsx)("div",{className:"bg-green-100 rounded-lg p-3 inline-block max-w-full",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:m})})]}),(0,sa.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(Jn,{className:"w-5 h-5 text-blue-600"}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("p",{className:"font-medium text-blue-900",children:[n.prenom," ",n.nom]}),(0,sa.jsx)("p",{className:"text-sm text-blue-700",children:n.numero_whatsapp})]})]})}),(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("button",{onClick:()=>N(2),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Modifier"}),(0,sa.jsxs)("button",{onClick:()=>{x?(window.open(x,"_blank"),Pt.success(`Message WhatsApp pr\xe9par\xe9 pour ${n.prenom} ${n.nom}`),s()):Pt.error("Erreur: Lien WhatsApp non disponible")},className:"flex-1 bg-green-500 text-white py-3 px-6 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2 font-medium",children:[(0,sa.jsx)(Ua,{className:"w-5 h-5"}),(0,sa.jsx)("span",{children:"Ouvrir WhatsApp Web"})]})]})]})]})]})}):null},Wa=Gn("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),qa=Gn("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Ya=Gn("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Qa=e=>{var t,s;let{isOpen:n,onClose:a,appointment:i,onPaymentUpdate:l,API_BASE_URL:o,user:c}=e;const[d,u]=(0,r.useState)({paye:!1,montant:0,type_paiement:"espece",assure:!1,notes:"",type_rdv:"visite"}),[h,m]=(0,r.useState)(!1),p=(()=>{if("medecin"===(null===c||void 0===c?void 0:c.role))return!0;if("secretaire"===(null===c||void 0===c?void 0:c.role)){if("termine"!==(null===i||void 0===i?void 0:i.statut))return!0;if("termine"===(null===i||void 0===i?void 0:i.statut))return!(null!==i&&void 0!==i&&i.paye)}return!0})();(0,r.useEffect)(()=>{if(n&&i){const e="visite"===i.type_rdv?65:0;u({paye:i.paye||!1,montant:i.paye&&i.montant_paye||e,type_paiement:"espece",assure:i.assure||!1,notes:"",type_rdv:i.type_rdv||"visite"})}},[n,i]);const x=e=>{u(t=>({...t,type_rdv:e,montant:"visite"===e?65:0,paye:"controle"===e||t.paye}))};if(!n||!i)return null;const f="controle"===d.type_rdv;return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,sa.jsx)(Wa,{className:"w-5 h-5 text-green-600"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Gestion Paiement"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-600",children:[null===(t=i.patient)||void 0===t?void 0:t.prenom," ",null===(s=i.patient)||void 0===s?void 0:s.nom]})]})]}),(0,sa.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm text-gray-600",children:"Type de RDV:"}),(0,sa.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium "+("controle"===d.type_rdv?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"controle"===d.type_rdv?"Contr\xf4le":"Visite"})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-600",children:"Date & Heure"}),(0,sa.jsxs)("div",{className:"font-medium",children:[i.date," \xe0 ",i.heure]})]})]})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de consultation"}),(0,sa.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",name:"type_rdv",checked:"visite"===d.type_rdv,onChange:()=>x("visite"),disabled:!p,className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Visite (65 TND)"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",name:"type_rdv",checked:"controle"===d.type_rdv,onChange:()=>x("controle"),disabled:!p,className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Contr\xf4le (Gratuit)"})]})]})]}),f&&(0,sa.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sa.jsx)(qa,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm font-medium text-green-800",children:"Consultation Contr\xf4le"}),(0,sa.jsx)("p",{className:"text-sm text-green-600",children:"Les consultations de contr\xf4le sont automatiquement gratuites."})]})]})}),!p&&"secretaire"===(null===c||void 0===c?void 0:c.role)&&(0,sa.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,sa.jsx)($a,{className:"w-5 h-5 text-red-600 mt-0.5"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm font-medium text-red-800",children:"\ud83d\udd12 Paiement verrouill\xe9"}),(0,sa.jsx)("p",{className:"text-sm text-red-600",children:"Cette consultation est termin\xe9e et son statut de paiement a \xe9t\xe9 d\xe9termin\xe9. Seul le m\xe9decin peut modifier le paiement \xe0 ce stade pour des raisons de s\xe9curit\xe9."})]})]})}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{m(!0);try{if(d.paye&&d.montant<=0&&"visite"===d.type_rdv)return void Pt.error("Le montant doit \xeatre sup\xe9rieur \xe0 0 pour une visite pay\xe9e");const e={...d,type_rdv:d.type_rdv};await Qn.put(`${o}/api/rdv/${i.id}/paiement`,e),Pt.success("Paiement et type de consultation mis \xe0 jour avec succ\xe8s"),l&&l(i.id,e),a()}catch(e){console.error("Error updating payment:",e),Pt.error("Erreur lors de la mise \xe0 jour du paiement")}finally{m(!1)}})()},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut du paiement"}),(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",name:"paye",checked:d.paye,onChange:()=>u(e=>({...e,paye:!0})),disabled:"controle"===d.type_rdv||!p,className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Pay\xe9"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",name:"paye",checked:!d.paye,onChange:()=>u(e=>({...e,paye:!1})),disabled:"controle"===d.type_rdv||!p,className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Non pay\xe9"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{htmlFor:"montant",className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant (TND)"}),(0,sa.jsx)("input",{type:"number",id:"montant",step:"0.01",min:"0",value:d.montant,onChange:e=>u(t=>({...t,montant:parseFloat(e.target.value)||0})),disabled:"controle"===d.type_rdv||!p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xe9thode de paiement"}),(0,sa.jsx)("div",{className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-700",children:"\ud83d\udcb5 Esp\xe8ces (TND)"})]}),(0,sa.jsx)("div",{children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("input",{type:"checkbox",id:"assure",checked:d.assure,onChange:e=>u(t=>({...t,assure:e.target.checked})),disabled:!p,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 disabled:bg-gray-100"}),(0,sa.jsx)("label",{htmlFor:"assure",className:"text-sm font-medium text-gray-700",children:"Patient assur\xe9"})]})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (optionnel)"}),(0,sa.jsx)("textarea",{id:"notes",rows:"3",value:d.notes,onChange:e=>u(t=>({...t,notes:e.target.value})),disabled:!p,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",placeholder:p?"Notes sur le paiement...":"Lecture seule - Seul le m\xe9decin peut modifier"})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,sa.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Annuler"}),(0,sa.jsxs)("button",{type:"submit",disabled:h||!p,className:"px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors flex items-center space-x-2 "+(p?"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400":"bg-gray-400 cursor-not-allowed"),title:p?"":"Modification non autoris\xe9e pour la secr\xe9taire",children:[h?(0,sa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,sa.jsx)(Ya,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:h?"Sauvegarde...":p?"Sauvegarder":"Lecture seule"})]})]})]})]})})})},Ka=e=>{var t,s;let{weekData:n,onStatusUpdate:a,onRoomAssignment:i,onEdit:l,onDelete:o,onViewPatient:c,selectedDate:d,onCreateAppointment:u,onOpenPaymentModal:h}=e;const[m,p]=(0,r.useState)({show:!1,x:0,y:0,appointment:null}),[x,f]=(0,r.useState)(null),g=[];for(let r=9;r<18;r++)for(let e=0;e<60;e+=15)g.push(`${r.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`);const b=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],y=e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"}),v=e=>{if("retard"===e.statut)return"bg-red-100 text-red-800 border-red-200";switch(e.type_rdv){case"visite":return"bg-green-100 text-green-800 border-green-200";case"controle":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},j=e=>{const{appointment:t}=m;switch(p({show:!1,x:0,y:0,appointment:null}),e){case"edit":l(t);break;case"delete":o(t.id);break;case"duplicate":u({patient_id:t.patient_id,date:t.date,heure:t.heure,type_rdv:t.type_rdv,motif:t.motif,notes:t.notes})}},N=e=>{const t=e.length;return 0===t?"bg-green-50 hover:bg-green-100":t<=2?"bg-orange-50 hover:bg-orange-100":"bg-red-50 hover:bg-red-100"};return(0,r.useEffect)(()=>{const e=()=>{p({show:!1,x:0,y:0,appointment:null})};if(m.show)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[m.show]),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,sa.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vue Semaine"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Lundi \u2192 Samedi \u2022 9h00 \u2192 18h00 \u2022 Click cr\xe9neau vide pour nouveau RDV"})]}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("div",{className:"min-w-[800px]",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-7 border-b border-gray-200",children:[(0,sa.jsx)("div",{className:"p-3 bg-gray-50 border-r border-gray-200",children:(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-500",children:"Heure"})}),null===(t=n.week_dates)||void 0===t?void 0:t.map((e,t)=>(0,sa.jsx)("div",{className:"p-3 bg-gray-50 border-r border-gray-200 last:border-r-0",children:(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:b[t]}),(0,sa.jsx)("div",{className:"text-xs text-gray-500",children:y(e)})]})},e))]}),(0,sa.jsx)("div",{className:"max-h-96 overflow-y-auto",children:g.map(e=>{var t;return(0,sa.jsxs)("div",{className:"grid grid-cols-7 border-b border-gray-100",children:[(0,sa.jsx)("div",{className:"p-2 border-r border-gray-200 bg-gray-50",children:(0,sa.jsx)("span",{className:"text-xs text-gray-600 font-mono",children:e})}),null===(t=n.week_dates)||void 0===t?void 0:t.map(t=>{const s=((e,t)=>{var s;return(null===(s=n.appointments)||void 0===s?void 0:s.filter(s=>s.date===e&&s.heure===t))||[]})(t,e),a=s.length>=3;return(0,sa.jsx)("div",{className:`p-1 border-r border-gray-100 last:border-r-0 min-h-[60px] cursor-pointer transition-colors ${N(s)}`,onClick:()=>!a&&((e,t)=>{u({date:e,heure:t})})(t,e),onMouseEnter:()=>f({date:t,time:e,appointments:s}),onMouseLeave:()=>f(null),title:0===s.length?"Cliquer pour nouveau RDV":`${s.length}/3 RDV`,children:(0,sa.jsxs)("div",{className:"space-y-1",children:[s.slice(0,3).map((e,t)=>{var s,n,a,r;return(0,sa.jsxs)("div",{className:`text-xs p-1 rounded border cursor-pointer hover:shadow-sm transition-all relative ${v(e)}`,onDoubleClick:t=>{t.stopPropagation(),l(e)},onContextMenu:t=>{t.stopPropagation(),((e,t)=>{e.preventDefault(),p({show:!0,x:e.clientX,y:e.clientY,appointment:t})})(t,e)},onClick:e=>e.stopPropagation(),title:`${null===(s=e.patient)||void 0===s?void 0:s.prenom} ${null===(n=e.patient)||void 0===n?void 0:n.nom} - Double-click: Modifier | Right-click: Menu`,children:[(0,sa.jsx)("div",{className:"truncate",children:(0,sa.jsxs)("button",{onClick:t=>{t.stopPropagation(),c(e.patient_id)},className:"font-medium text-gray-900 hover:text-primary-600 transition-colors cursor-pointer underline",children:[null===(a=e.patient)||void 0===a?void 0:a.prenom," ",null===(r=e.patient)||void 0===r?void 0:r.nom]})}),(0,sa.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,sa.jsx)("span",{className:"px-1 py-0.5 rounded text-xs "+("visite"===e.type_rdv?"bg-green-200 text-green-800":"bg-blue-200 text-blue-800"),children:"visite"===e.type_rdv?"V":"C"}),e.salle&&(0,sa.jsx)("span",{className:"px-1 py-0.5 rounded text-xs bg-purple-200 text-purple-800",children:"salle1"===e.salle?"S1":"S2"}),(0,sa.jsx)("button",{className:"px-1 py-0.5 rounded text-xs cursor-pointer hover:opacity-80 transition-opacity "+("controle"===e.type_rdv||e.paye?"bg-green-200 text-green-800":"bg-red-200 text-red-800"),onClick:t=>{t.stopPropagation(),h(e)},title:"Cliquer pour g\xe9rer le paiement",children:"controle"===e.type_rdv?"Gratuit":e.paye?"Pay\xe9":"Non Pay\xe9"})]})]},e.id)}),s.length>3&&(0,sa.jsxs)("div",{className:"text-xs text-gray-500 font-medium",children:["+",s.length-3," autres..."]}),0===s.length&&(0,sa.jsx)("div",{className:"text-xs text-gray-400 italic",children:"Cliquer pour RDV"}),s.length>0&&s.length<3&&(0,sa.jsxs)("div",{className:"text-xs text-gray-500",children:[3-s.length," place",3-s.length>1?"s":""," libre",3-s.length>1?"s":""]})]})},`${t}-${e}`)})]},e)})})]})}),x&&(0,sa.jsxs)("div",{className:"fixed bg-gray-900 text-white text-sm p-3 rounded-lg shadow-xl z-[9998] pointer-events-none max-w-xs",style:{left:"20px",top:"20px"},children:[(0,sa.jsxs)("div",{className:"font-medium",children:[x.time," - ",y(x.date)]}),(0,sa.jsxs)("div",{className:"text-gray-300",children:[x.appointments.length,"/3 RDV programm\xe9s"]}),0===x.appointments.length?(0,sa.jsx)("div",{className:"text-green-300 text-xs mt-1",children:"\u2728 Cr\xe9neau libre - Cliquer pour nouveau RDV"}):x.appointments.length<3?(0,sa.jsxs)("div",{className:"text-blue-300 text-xs mt-1",children:["\ud83d\udcc5 ",3-x.appointments.length," place",3-x.appointments.length>1?"s":""," disponible",3-x.appointments.length>1?"s":""]}):(0,sa.jsx)("div",{className:"text-red-300 text-xs mt-1",children:"\ud83d\udeab Cr\xe9neau complet"})]}),m.show&&(0,sa.jsxs)("div",{className:"fixed bg-white border border-gray-200 rounded-lg shadow-xl z-[9999] py-2 min-w-[150px]",style:{left:m.x,top:m.y},onClick:e=>e.stopPropagation(),children:[(0,sa.jsx)("button",{onClick:()=>j("edit"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm transition-colors",children:"\u270f\ufe0f Modifier"}),(0,sa.jsx)("button",{onClick:()=>j("duplicate"),className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-sm transition-colors",children:"\ud83d\udccb Dupliquer"}),(0,sa.jsx)("hr",{className:"my-1"}),(0,sa.jsx)("button",{onClick:()=>j("delete"),className:"w-full text-left px-4 py-2 hover:bg-red-50 text-sm text-red-600 transition-colors",children:"\ud83d\uddd1\ufe0f Supprimer"})]}),(0,sa.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,sa.jsxs)("div",{className:"text-gray-600",children:["Total rendez-vous de la semaine: ",(0,sa.jsx)("span",{className:"font-medium",children:(null===(s=n.appointments)||void 0===s?void 0:s.length)||0})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("div",{className:"w-3 h-3 rounded bg-green-50 border border-green-200"}),(0,sa.jsx)("span",{className:"text-gray-600",children:"Libre"})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("div",{className:"w-3 h-3 rounded bg-orange-50 border border-orange-200"}),(0,sa.jsx)("span",{className:"text-gray-600",children:"Normal (1-2)"})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("div",{className:"w-3 h-3 rounded bg-red-50 border border-red-200"}),(0,sa.jsx)("span",{className:"text-gray-600",children:"Satur\xe9 (3)"})]})]})]})})]})},Ga=e=>{let{title:t,appointments:s,sectionType:n,onStatusUpdate:a,onTypeToggle:r,onPaymentUpdate:i,onStartConsultation:l,onFinishConsultation:o,onOpenConsultation:c,onRoomAssignment:d,onEdit:u,onDelete:h,onViewPatient:m,onPatientReorder:p,onOpenPaymentModal:x,onWhatsApp:f,isCompleted:g=!1,user:b}=e;return(0,sa.jsxs)("div",{className:`rounded-xl shadow-sm border-2 ${(()=>{switch(n){case"attente":return"border-green-200 bg-green-50";case"en_cours":case"absent":return"border-blue-200 bg-blue-50";case"retard":return"border-orange-200 bg-orange-50";case"termine":return"border-gray-200 bg-gray-50";default:return"border-gray-200 bg-white"}})()} ${g?"opacity-75":""}`,children:[(0,sa.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t}),(0,sa.jsxs)("p",{className:"text-sm text-gray-600",children:[s.length," patient(s)","attente"===n&&s.length>1&&(0,sa.jsx)("span",{className:"text-gray-400 ml-2",children:"\u2022 Utilisez les fl\xe8ches pour r\xe9organiser"})]})]}),(0,sa.jsx)("div",{className:"divide-y divide-gray-100",children:0===s.length?(0,sa.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,sa.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udc65"}),(0,sa.jsx)("p",{children:"Aucun patient dans cette section"})]}):s.map((e,t)=>(0,sa.jsx)(Xa,{appointment:e,index:t,totalCount:s.length,sectionType:n,onStatusUpdate:a,onTypeToggle:r,onPaymentUpdate:i,onStartConsultation:l,onFinishConsultation:o,onOpenConsultation:c,onRoomAssignment:d,onEdit:u,onDelete:h,onViewPatient:m,onPatientReorder:p,onOpenPaymentModal:x,onWhatsApp:f,isCompleted:g,user:b},e.id))})]})},Xa=r.memo(e=>{var t,s,n;let{appointment:a,index:i,totalCount:l,sectionType:o,onStatusUpdate:c,onTypeToggle:d,onPaymentUpdate:u,onStartConsultation:h,onFinishConsultation:m,onOpenConsultation:p,onRoomAssignment:x,onEdit:f,onDelete:g,onViewPatient:b,onPatientReorder:y,onOpenPaymentModal:v,onWhatsApp:j,isCompleted:N,user:w}=e;const[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[E,M]=(0,r.useState)(0);(0,r.useEffect)(()=>{const e=()=>{k(!1)};if(_)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[_]),(0,r.useEffect)(()=>{if("attente"===o&&"attente"===a.statut){const e=a.heure_arrivee_attente||(new Date).toISOString(),t=new Date(e),s=new Date,n=Math.max(0,Math.floor((s-t)/6e4));M(n);const r=setInterval(()=>{const e=new Date,s=Math.max(0,Math.floor((e-t)/6e4));M(s)},6e4);return()=>clearInterval(r)}},[o,a.statut,a.heure_arrivee_attente]);const P=e=>e<15?{bgColor:"bg-green-100",textColor:"text-green-700",iconColor:"text-green-500",borderColor:"border-green-200"}:e<30?{bgColor:"bg-orange-100",textColor:"text-orange-700",iconColor:"text-orange-500",borderColor:"border-orange-200"}:{bgColor:"bg-red-100",textColor:"text-red-700",iconColor:"text-red-500",borderColor:"border-red-200"},A=e=>e?e<15?{bgColor:"bg-green-50",textColor:"text-green-600",borderColor:"border-green-200"}:e<30?{bgColor:"bg-orange-50",textColor:"text-orange-600",borderColor:"border-orange-200"}:{bgColor:"bg-red-50",textColor:"text-red-600",borderColor:"border-red-200"}:null,D="controle"===a.type_rdv?{status:"gratuit",text:"Gratuit",color:"bg-green-100 text-green-800 font-bold"}:a.paye?{status:"paye",text:"Pay\xe9",color:"bg-green-100 text-green-800 font-bold"}:{status:"non_paye",text:"Non pay\xe9",color:"bg-red-100 text-red-800 font-bold"},T=(()=>{if("medecin"===(null===w||void 0===w?void 0:w.role))return!0;if("secretaire"===(null===w||void 0===w?void 0:w.role)){if("termine"!==(null===a||void 0===a?void 0:a.statut))return!0;if("termine"===(null===a||void 0===a?void 0:a.statut))return"controle"!==(null===a||void 0===a?void 0:a.type_rdv)&&!(null!==a&&void 0!==a&&a.paye)}return!0})();return(0,sa.jsxs)("div",{className:"p-4 hover:bg-white/50 transition-colors",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:["attente"===o&&l>1&&y&&(0,sa.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,sa.jsx)("button",{onClick:()=>{var e;console.log(`UP ARROW: ${null===(e=a.patient)||void 0===e?void 0:e.nom} (position: ${i+1}/${l})`),y(a.id,"move_up")},disabled:0===i,className:"p-1 rounded text-xs "+(0===i?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-700 hover:bg-blue-50"),title:`Monter d'un rang (${i+1}/${l})`,children:(0,sa.jsx)(za,{className:"w-3 h-3"})}),(0,sa.jsx)("button",{onClick:()=>{var e;console.log(`DOWN ARROW: ${null===(e=a.patient)||void 0===e?void 0:e.nom} (position: ${i+1}/${l})`),y(a.id,"move_down")},disabled:i===l-1,className:"p-1 rounded text-xs "+(i===l-1?"text-gray-300 cursor-not-allowed":"text-blue-500 hover:text-blue-700 hover:bg-blue-50"),title:`Descendre d'un rang (${i+1}/${l})`,children:(0,sa.jsx)(Ia,{className:"w-3 h-3"})})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,sa.jsx)(ra,{className:"w-4 h-4 text-gray-400"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.heure})]}),(0,sa.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,sa.jsxs)("button",{onClick:()=>b(a.patient_id),className:"font-semibold text-gray-900 hover:text-primary-600 transition-colors cursor-pointer underline text-left",children:[null===(t=a.patient)||void 0===t?void 0:t.prenom," ",null===(s=a.patient)||void 0===s?void 0:s.nom]}),"attente"===o&&(0,sa.jsxs)("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium border mt-1 ${P(E).bgColor} ${P(E).textColor} ${P(E).borderColor}`,children:[(0,sa.jsx)(ra,{className:`w-3 h-3 ${P(E).iconColor}`}),(0,sa.jsx)("span",{children:(e=>{if(0===e)return"Vient d'arriver";if(1===e)return"1 minute";if(e<60)return`${e} minutes`;const t=Math.floor(e/60),s=e%60;return 0===s?1===t?"1 heure":`${t} heures`:`${t}h ${s}min`})(E)}),(0,sa.jsx)("span",{className:"text-gray-500",children:"d'attente"})]}),("en_cours"===o||"termine"===o)&&a.duree_attente&&(0,sa.jsxs)("div",{className:`inline-flex items-center px-2 py-1 rounded text-xs font-medium border mt-1 ${A(a.duree_attente).bgColor} ${A(a.duree_attente).textColor} ${A(a.duree_attente).borderColor}`,children:[(0,sa.jsx)(ra,{className:"w-3 h-3 mr-1"}),(0,sa.jsx)("span",{children:(e=>{if(!e||0===e)return null;if(1===e)return"1 min d'attente";if(e<60)return`${e} min d'attente`;const t=Math.floor(e/60),s=e%60;return 0===s?1===t?"1h d'attente":`${t}h d'attente`:`${t}h ${s}min d'attente`})(a.duree_attente)})]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>d(a.id,a.type_rdv),className:"px-2 py-1 rounded text-xs font-medium transition-colors cursor-pointer hover:opacity-80 "+("visite"===a.type_rdv?"bg-blue-100 text-blue-800 hover:bg-blue-200":"bg-green-100 text-green-800 hover:bg-green-200"),title:"Cliquer pour changer vers "+("visite"===a.type_rdv?"Contr\xf4le":"Visite"),children:"visite"===a.type_rdv?"V":"C"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("button",{onClick:e=>{e.stopPropagation(),k(!_)},className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 transition-colors cursor-pointer",title:"Cliquer pour changer le statut",children:a.statut}),_&&(0,sa.jsx)("div",{className:"absolute top-full right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-20 min-w-[120px]",children:["attente","en_cours","termine","absent"].map(e=>(0,sa.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),s=e,c(a.id,s),k(!1)},className:"w-full text-left px-3 py-2 text-xs hover:bg-gray-100 transition-colors",children:e},e))})]}),(0,sa.jsxs)("button",{onClick:()=>T?v(a):null,className:`px-2 py-1 rounded text-xs font-medium transition-colors ${T?"cursor-pointer hover:opacity-80":"cursor-not-allowed opacity-60"} ${D.color} ${T?"":"border-2 border-gray-400"}`,title:T?"Cliquer pour g\xe9rer le paiement":"secretaire"===(null===w||void 0===w?void 0:w.role)?"Paiement verrouill\xe9 - Seul le m\xe9decin peut modifier apr\xe8s paiement d\xe9fini":"Cliquer pour g\xe9rer le paiement",disabled:!T,children:[D.text,!T&&"secretaire"===(null===w||void 0===w?void 0:w.type)&&(0,sa.jsx)("span",{className:"ml-1 text-gray-600",children:"\ud83d\udd12"})]}),"attente"===o&&(0,sa.jsx)("div",{className:"relative",children:(0,sa.jsxs)("select",{value:a.salle||"",onChange:e=>x(a.id,e.target.value),className:"px-2 py-1 rounded text-xs font-medium border border-gray-300 bg-white hover:bg-gray-50 transition-colors cursor-pointer",title:"S\xe9lectionner une salle",children:[(0,sa.jsx)("option",{value:"",children:"Aucune salle"}),(0,sa.jsx)("option",{value:"salle1",children:"Salle 1"}),(0,sa.jsx)("option",{value:"salle2",children:"Salle 2"})]})}),"attente"!==o&&a.salle&&(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium "+(R=a.salle,R&&""!==R?"salle1"===R?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800":"bg-gray-100 text-gray-600"),children:(e=>e&&""!==e?"salle1"===e?"S1":"S2":"")(a.salle)}),"attente"===o&&(0,sa.jsx)("button",{onClick:()=>h(a.id),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs rounded font-medium transition-colors",title:"D\xe9marrer la consultation",children:"ENTRER"}),"en_cours"===o&&(0,sa.jsx)("button",{onClick:()=>p(a),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs rounded font-medium transition-colors",title:"Ouvrir la consultation",children:"Consultation"}),(null===(n=a.patient)||void 0===n?void 0:n.numero_whatsapp)&&j&&(0,sa.jsx)("button",{onClick:()=>j(a.patient,a),className:"p-1 text-green-600 hover:bg-green-100 rounded transition-colors",title:"Envoyer WhatsApp avec templates",children:(0,sa.jsx)(ua,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>f(a),className:"p-1 text-blue-600 hover:bg-blue-100 rounded transition-colors",title:"Modifier",children:(0,sa.jsx)(xa,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>g(a.id),className:"p-1 text-red-600 hover:bg-red-100 rounded transition-colors",title:"Supprimer",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})})]})]}),S&&(0,sa.jsx)(Qa,{appointment:a,onClose:()=>C(!1),onUpdate:u,user:w})]});var R}),Ja=e=>{var t,s,n,a,i,l,o,c;let{user:d}=e;const u=te(),[h,m]=(ne(),(0,r.useState)([])),[p,x]=(0,r.useState)([]),[f,g]=(0,r.useState)((new Date).toISOString().split("T")[0]),[b,y]=(0,r.useState)("list"),[v,j]=(0,r.useState)(!0),[N,w]=(0,r.useState)({}),[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(null),[E,M]=(0,r.useState)({week_dates:[],appointments:[]}),[P,A]=(0,r.useState)(null),[D,T]=(0,r.useState)(!1),[R,O]=(0,r.useState)(!1),[L,z]=(0,r.useState)(null),[I,F]=(0,r.useState)(null),[$,B]=(0,r.useState)(new Map),[V,U]=(0,r.useState)(0),[H,W]=(0,r.useState)(!1),[q,Y]=(0,r.useState)(new Map),[Q,K]=(0,r.useState)(new Map),[G,X]=(0,r.useState)({patient_id:"",date:"",heure:"",type_rdv:"visite",motif:"",notes:""}),J="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com",Z=(0,r.useCallback)(()=>{X({patient_id:"",date:f,heure:"",type_rdv:"visite",motif:"",notes:""}),C(null)},[f]),ee=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(C(e),X({patient_id:e.patient_id,date:e.date,heure:e.heure,type_rdv:e.type_rdv,motif:e.motif||"",notes:e.notes||""})):Z(),k(!0)},[Z]),se=(0,r.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Z(),X(t=>({...t,date:e.date||f,heure:e.heure||""})),k(!0)},[Z,f]);(0,r.useEffect)(()=>{ae();"add"===new URLSearchParams(u.search).get("action")&&(ee(),window.history.replaceState({},"","/calendar"))},[f,b]),(0,r.useEffect)(()=>{let e;return H?e=setInterval(()=>{U(e=>e+1)},1e3):H||0===V||clearInterval(e),()=>clearInterval(e)},[H,V]),(0,r.useEffect)(()=>{const e=new Map;return Q.forEach((t,s)=>{if(t.isRunning){const t=setInterval(()=>{K(e=>{const t=new Map(e),n=t.get(s);return n&&t.set(s,{...n,seconds:n.seconds+1}),t})},1e3);e.set(s,t)}}),()=>{e.forEach(e=>clearInterval(e))}},[Q]);const ae=(0,r.useCallback)(async()=>{j(!0);try{if("list"===b){const[e,t,s]=await Promise.all([Qn.get(`${J}/api/rdv/jour/${f}`),Qn.get(`${J}/api/patients`),Qn.get(`${J}/api/rdv/stats/${f}`)]);m(e.data||[]),x(t.data.patients||[]),w(s.data||{})}else{const[e,t]=await Promise.all([Qn.get(`${J}/api/rdv/semaine/${f}`),Qn.get(`${J}/api/patients`)]);M(e.data||{week_dates:[],appointments:[]}),x(t.data.patients||[])}}catch(e){console.error("Error fetching data:",e),Pt.error("Erreur lors du chargement des donn\xe9es")}finally{j(!1)}},[f,b,J]),re=(0,r.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e||G;await Qn.post(`${J}/api/appointments`,t);return Pt.success("Rendez-vous cr\xe9\xe9 avec succ\xe8s"),k(!1),Z(),await ae(),{success:!0}}catch(r){var t,s,n,a;return Pt.error("Erreur lors de la cr\xe9ation du rendez-vous: "+((null===(t=r.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.detail)||r.message)),{success:!1,error:(null===(n=r.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.detail)||r.message}}},[G,J,Z,ae]),ie=(0,r.useCallback)(async()=>{try{await Qn.put(`${J}/api/appointments/${S.id}`,G),Pt.success("Rendez-vous mis \xe0 jour avec succ\xe8s"),k(!1),Z(),await ae()}catch(e){Pt.error("Erreur lors de la mise \xe0 jour du rendez-vous")}},[G,S,J,Z,ae]),le=(0,r.useCallback)(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce rendez-vous ?")){m(t=>t.filter(t=>t.id!==e));try{await Qn.delete(`${J}/api/appointments/${e}`),Pt.success("Rendez-vous supprim\xe9 avec succ\xe8s")}catch(t){Pt.error("Erreur lors de la suppression du rendez-vous"),await ae()}}},[J,ae]),oe=(0,r.useCallback)(async(e,t)=>{m(s=>s.map(s=>{if(s.id===e){const e={...s,statut:t};return"attente"===t&&(e.heure_arrivee_attente=(new Date).toISOString()),e}return s}));try{const s={statut:t};"attente"===t&&(s.heure_arrivee_attente=(new Date).toISOString()),await Qn.put(`${J}/api/rdv/${e}/statut`,s),Pt.success("Statut mis \xe0 jour")}catch(s){Pt.error("Erreur lors de la mise \xe0 jour du statut"),await ae()}},[J,ae]),ce=(0,r.useCallback)(async(e,t)=>{const s="visite"===t?"controle":"visite";m(t=>t.map(t=>t.id===e?{...t,type_rdv:s}:t));try{await Qn.put(`${J}/api/rdv/${e}`,{type_rdv:s}),"controle"===s&&(m(t=>t.map(t=>t.id===e?{...t,paye:!1}:t)),await Qn.put(`${J}/api/rdv/${e}/paiement`,{paye:!1,gratuit:!0,montant:0,methode_paiement:""})),Pt.success("Type chang\xe9 vers "+("visite"===s?"Visite":"Contr\xf4le"))}catch(n){Pt.error("Erreur lors du changement de type"),await ae()}},[J,ae]),de=(0,r.useCallback)(async e=>{const t=h.find(t=>t.id===e);let s=0;if(t&&t.heure_arrivee_attente){const e=new Date(t.heure_arrivee_attente),n=new Date;s=Math.floor((n-e)/6e4)}m(t=>t.map(t=>t.id===e?{...t,statut:"en_cours",duree_attente:s}:t));try{await Qn.put(`${J}/api/rdv/${e}/statut`,{statut:"en_cours",duree_attente:s}),Pt.success("Consultation d\xe9marr\xe9e")}catch(n){Pt.error("Erreur lors du d\xe9marrage de la consultation"),await ae()}},[J,ae,h]),ue=e=>{B(t=>{const s=new Map(t);return s.delete(e),s}),K(t=>{const s=new Map(t),n=s.get(e);return n&&s.set(e,{...n,isRunning:!1}),s})},he=(e,t,s)=>{Y(n=>{const a=new Map(n),r=a.get(e)||{};return a.set(e,{...r,[t]:s}),a})},me=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${s}:${n.toString().padStart(2,"0")}`},pe=((0,r.useCallback)(async e=>{try{const t=(new Date).toISOString();await Qn.put(`${J}/api/rdv/${e}/statut`,{statut:"attente",heure_arrivee_attente:t}),Pt.success("Patient en salle d'attente"),await ae()}catch(t){Pt.error("Erreur lors de la mise en salle d'attente")}},[J,ae]),(0,r.useCallback)(async e=>{try{await Qn.put(`${J}/api/rdv/${e}/statut`,{statut:"termine"}),Pt.success("Consultation termin\xe9e"),await ae()}catch(t){Pt.error("Erreur lors de la finalisation de la consultation")}},[J,ae])),xe=(0,r.useCallback)(e=>{we(e),je(!0)},[]),fe=(0,r.useCallback)(()=>{je(!1),we(null)},[]),ge=(0,r.useCallback)(async(e,t)=>{m(s=>s.map(s=>s.id===e?{...s,paye:t.paye}:s));try{await Qn.put(`${J}/api/rdv/${e}/paiement`,t),Pt.success("Paiement mis \xe0 jour")}catch(s){Pt.error("Erreur lors de la mise \xe0 jour du paiement"),await ae()}},[J,ae]),be=(0,r.useCallback)(async(e,t)=>{console.log(`\n=== ARROW CLICK: ${t} ===`);const s=h.filter(e=>"attente"===e.statut).sort((e,t)=>("number"===typeof e.priority?e.priority:999)-("number"===typeof t.priority?t.priority:999));if(s.length<2)return;const n=s.findIndex(t=>t.id===e);if(-1===n)return;let a=n;if("move_up"===t&&n>0)a=n-1;else{if(!("move_down"===t&&n<s.length-1))return;a=n+1}console.log(`Moving from position ${n} to ${a}`),m(e=>{const t=e.filter(e=>"attente"!==e.statut),r=[...s],[i]=r.splice(n,1);r.splice(a,0,i);const l=r.map((e,t)=>({...e,priority:t}));return console.log("Optimistic update:",l.map(e=>{var t;return`${null===(t=e.patient)||void 0===t?void 0:t.nom} (priority: ${e.priority})`})),[...l,...t]});try{const s=await Qn.put(`${J}/api/rdv/${e}/priority`,{action:t});console.log("Backend response:",s.data),Pt.success("Patient repositionn\xe9")}catch(r){console.error("Error during reordering:",r),Pt.error("Erreur lors du repositionnement"),await ae()}},[J,ae,h]),ye=(0,r.useCallback)(async(e,t)=>{m(s=>s.map(s=>s.id===e?{...s,salle:t}:s));try{await Qn.put(`${J}/api/rdv/${e}/salle?salle=${t}`);const s=""===t?"Aucune salle":"salle1"===t?"Salle 1":"Salle 2";Pt.success(`Patient assign\xe9 \xe0: ${s}`)}catch(s){Pt.error("Erreur lors de l'assignation de salle"),await ae()}},[J,ae]),[ve,je]=(0,r.useState)(!1),[Ne,we]=(0,r.useState)(null),_e=(0,r.useCallback)(async e=>{try{const t=await Qn.get(`${J}/api/patients/${e}`);A(t.data),T(!0)}catch(t){Pt.error("Erreur lors du chargement des d\xe9tails du patient")}},[J,A,T]),ke=(0,r.useCallback)(e=>{const t=new Date(f);"prev"===e?t.setDate(t.getDate()-1):t.setDate(t.getDate()+1),g(t.toISOString().split("T")[0])},[f]),Se=((0,r.useCallback)(e=>{switch(e){case"absent":default:return"bg-gray-100 text-gray-800";case"attente":return"bg-yellow-100 text-yellow-800";case"en_cours":return"bg-blue-100 text-blue-800";case"termine":return"bg-green-100 text-green-800"}},[]),(0,r.useCallback)(e=>{switch(e){case"absent":default:return"Absent";case"attente":return"En attente";case"en_cours":return"En cours";case"termine":return"Termin\xe9"}},[]),(0,r.useCallback)(e=>{const t=e.replace(/\D/g,"");return`https://wa.me/212${t.startsWith("0")?t.substring(1):t}`},[]),(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.numero_whatsapp?(z(e),F(t),O(!0)):Pt.error("Patient n'a pas de num\xe9ro WhatsApp")},[])),Ce=(0,r.useCallback)(()=>{O(!1),z(null),F(null)},[]),Ee=(0,r.useCallback)(e=>new Date(e).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),[]),Me=(0,r.useMemo)(()=>{if(!h)return[];const e={programme:1,attente:2,en_cours:3,retard:4,absent:5,termine:6};return[...h].sort((t,s)=>{const n=(e[t.statut]||0)-(e[s.statut]||0);if(0!==n)return n;if("attente"===t.statut&&"attente"===s.statut){const e="number"===typeof t.priority?t.priority:999,n="number"===typeof s.priority?s.priority:999;if(999===e&&999===n)return t.id.localeCompare(s.id);const a=e-n;if(0!==a)return a}return t.heure.localeCompare(s.heure)})},[h]),Pe=(0,r.useMemo)(()=>{const e={attente:[],en_cours:[],absent:[],retard:[],termine:[]};return Me.forEach(t=>{let s=t.statut;"programme"===t.statut&&(s="absent"),e[s]&&e[s].push(t)}),e},[Me]);return v?(0,sa.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Calendrier"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Gestion des rendez-vous"})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsxs)("div",{className:"flex bg-white border border-gray-200 rounded-lg p-1",children:[(0,sa.jsxs)("button",{onClick:()=>y("list"),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors "+("list"===b?"bg-primary-500 text-white":"text-gray-600 hover:text-gray-900"),children:[(0,sa.jsx)(ka,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Liste"})]}),(0,sa.jsxs)("button",{onClick:()=>y("week"),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium transition-colors "+("week"===b?"bg-primary-500 text-white":"text-gray-600 hover:text-gray-900"),children:[(0,sa.jsx)(Sa,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Semaine"})]})]}),(0,sa.jsxs)("button",{onClick:()=>ee(),className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(ya,{className:"w-5 h-5"}),(0,sa.jsx)("span",{children:"Nouveau RDV"})]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,sa.jsx)("button",{onClick:()=>ke("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,sa.jsx)(ja,{className:"w-5 h-5"})}),(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsx)("input",{type:"date",value:f,onChange:e=>g(e.target.value),className:"input-field"}),(0,sa.jsx)("div",{className:"text-center",children:(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:Ee(f)})})]}),(0,sa.jsx)("button",{onClick:()=>ke("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,sa.jsx)(Na,{className:"w-5 h-5"})})]}),"list"===b&&N&&(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,sa.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(aa,{className:"w-8 h-8 text-blue-500"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Total RDV"}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.total_rdv||0})]})]})}),(0,sa.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(Jn,{className:"w-8 h-8 text-green-500"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Visites"}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.visites||0})]})]})}),(0,sa.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(Ca,{className:"w-8 h-8 text-purple-500"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Contr\xf4les"}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.controles||0})]})]})}),(0,sa.jsx)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(ra,{className:"w-8 h-8 text-orange-500"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"RDV restants"}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:((null===(t=N.statuts)||void 0===t?void 0:t.programme)||0)+((null===(s=N.statuts)||void 0===s?void 0:s.retard)||0)})]})]})})]}),"list"===b&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)(Ga,{title:"\ud83d\udfe2 Salle d'attente",appointments:Pe.attente,sectionType:"attente",onStatusUpdate:oe,onTypeToggle:ce,onPaymentUpdate:ge,onStartConsultation:de,onRoomAssignment:ye,onEdit:ee,onDelete:le,onViewPatient:_e,onPatientReorder:be,onOpenPaymentModal:xe,onWhatsApp:Se,user:d}),(0,sa.jsx)(Ga,{title:"\ud83d\udcc5 RDV Programm\xe9s",appointments:Pe.absent,sectionType:"programme",onStatusUpdate:oe,onTypeToggle:ce,onPaymentUpdate:ge,onEdit:ee,onDelete:le,onViewPatient:_e,onOpenPaymentModal:xe,onWhatsApp:Se,user:d}),(0,sa.jsx)(Ga,{title:"\ud83d\udfe0 En retard",appointments:Pe.retard,sectionType:"retard",onStatusUpdate:oe,onTypeToggle:ce,onPaymentUpdate:ge,onStartConsultation:de,onEdit:ee,onDelete:le,onViewPatient:_e,onOpenPaymentModal:xe,onWhatsApp:Se,user:d}),(0,sa.jsx)(Ga,{title:"\ud83d\udd35 En consultation",appointments:Pe.en_cours,sectionType:"en_cours",onStatusUpdate:oe,onTypeToggle:ce,onPaymentUpdate:ge,onFinishConsultation:pe,onOpenConsultation:e=>{const t=e.id,s=e.patient;if($.has(t))B(e=>{const s=new Map(e),n=s.get(t);return s.set(t,{...n,isOpen:!0,isMinimized:!1}),s});else{const n={isOpen:!0,isMinimized:!1,appointmentId:t,patientInfo:s};if(B(e=>new Map(e).set(t,n)),!q.has(t)){const s={poids:"",taille:"",pc:"",temperature:"",diagnostic:"",observation_clinique:"",observation_medicale:"",traitement:"",bilans:"",type_rdv:e.type_rdv||"visite",motif:e.motif||"",notes:e.notes||"",rappel_vaccin:!1,nom_vaccin:"",date_vaccin:"",rappel_whatsapp_vaccin:!1};Y(e=>new Map(e).set(t,s))}Q.has(t)||K(e=>new Map(e).set(t,{seconds:0,isRunning:!0}))}},onEdit:ee,onDelete:le,onViewPatient:_e,onOpenPaymentModal:xe,onWhatsApp:Se,user:d}),(0,sa.jsx)(Ga,{title:"\u2705 Termin\xe9",appointments:Pe.termine,sectionType:"termine",onStatusUpdate:oe,onTypeToggle:ce,onPaymentUpdate:ge,onEdit:ee,onDelete:le,onViewPatient:_e,onOpenPaymentModal:xe,onWhatsApp:Se,isCompleted:!0,user:d}),0===h.length&&(0,sa.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,sa.jsx)(aa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun rendez-vous pour cette date"}),(0,sa.jsxs)("button",{onClick:()=>ee(),className:"mt-4 btn-primary inline-flex items-center space-x-2",children:[(0,sa.jsx)(ya,{className:"w-5 h-5"}),(0,sa.jsx)("span",{children:"Cr\xe9er un rendez-vous"})]})]})]}),"week"===b&&(0,sa.jsx)(Ka,{weekData:E,onStatusUpdate:oe,onEdit:ee,onDelete:le,onViewPatient:_e,onCreateAppointment:se,onOpenPaymentModal:xe,selectedDate:f}),_&&(0,sa.jsx)(wa,{isOpen:_,onClose:()=>k(!1),appointment:S,patients:p,formData:G,setFormData:X,onSave:S?ie:re,onRefresh:ae}),R&&L&&(0,sa.jsx)(Ha,{isOpen:R,onClose:Ce,patient:L,appointment:I}),D&&P&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Fiche Patient - ",P.prenom," ",P.nom]}),(0,sa.jsxs)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:[(0,sa.jsx)("span",{className:"sr-only",children:"Fermer"}),"\xd7"]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations personnelles"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nom complet:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[P.prenom," ",P.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xc2ge:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:P.age||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date de naissance:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:P.date_naissance||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Adresse:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:P.adresse||"N/A"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Parents"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-700",children:"P\xe8re"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(n=P.pere)||void 0===n?void 0:n.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(a=P.pere)||void 0===a?void 0:a.telephone)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(i=P.pere)||void 0===i?void 0:i.fonction)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-700",children:"M\xe8re"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(l=P.mere)||void 0===l?void 0:l.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(o=P.mere)||void 0===o?void 0:o.telephone)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(c=P.mere)||void 0===c?void 0:c.fonction)||"N/A"})]})]})]}),(0,sa.jsxs)("div",{className:"md:col-span-2",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations m\xe9dicales"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Notes:"}),(0,sa.jsx)("p",{className:"text-gray-900 mt-1",children:P.notes||"Aucune note"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ant\xe9c\xe9dents:"}),(0,sa.jsx)("p",{className:"text-gray-900 mt-1",children:P.antecedents||"Aucun ant\xe9c\xe9dent"})]})]})]})]}),(0,sa.jsx)("div",{className:"flex justify-end mt-6",children:(0,sa.jsx)("button",{onClick:()=>T(!1),className:"btn-outline",children:"Fermer"})})]})})}),Array.from($.entries()).map(e=>{var t,s,n,a;let[r,i]=e;const l=q.get(r)||{},o=Q.get(r)||{seconds:0,isRunning:!1};return(0,sa.jsx)("div",{children:i.isOpen&&(0,sa.jsx)(sa.Fragment,{children:i.isMinimized?(0,sa.jsx)("div",{className:"fixed bottom-4 right-4 z-50",style:{right:16+320*Array.from($.keys()).indexOf(r)+"px"},children:(0,sa.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 min-w-[300px]",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(ra,{className:"w-5 h-5 text-blue-600"}),(0,sa.jsxs)("span",{className:"font-medium text-gray-900",children:[null===(t=i.patientInfo)||void 0===t?void 0:t.prenom," ",null===(s=i.patientInfo)||void 0===s?void 0:s.nom]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("span",{className:"text-lg font-mono text-blue-600",children:me(o.seconds)}),(0,sa.jsx)("button",{onClick:()=>(e=>{B(t=>{const s=new Map(t),n=s.get(e);return n&&s.set(e,{...n,isMinimized:!1}),s})})(r),className:"p-1 hover:bg-gray-100 rounded",children:(0,sa.jsx)(Ea,{className:"w-4 h-4"})})]})]})})}):(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Consultation - ",null===(n=i.patientInfo)||void 0===n?void 0:n.prenom," ",null===(a=i.patientInfo)||void 0===a?void 0:a.nom]}),(0,sa.jsxs)("p",{className:"text-gray-600",children:[(new Date).toLocaleDateString("fr-FR")," - ",me(o.seconds)]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{B(t=>{const s=new Map(t),n=s.get(e);return n&&s.set(e,{...n,isMinimized:!0}),s})})(r),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,sa.jsx)(Ma,{className:"w-5 h-5"})}),(0,sa.jsx)("button",{onClick:()=>ue(r),className:"p-2 hover:bg-gray-100 rounded-lg",children:"\xd7"})]})]}),(0,sa.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(ra,{className:"w-6 h-6 text-blue-600"}),(0,sa.jsxs)("span",{className:"text-lg font-semibold text-blue-900",children:["Dur\xe9e: ",me(o.seconds)]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{K(t=>{const s=new Map(t),n=s.get(e);return n&&s.set(e,{...n,isRunning:!n.isRunning}),s})})(r),className:"p-2 rounded-lg "+(o.isRunning?"bg-red-100 text-red-600 hover:bg-red-200":"bg-green-100 text-green-600 hover:bg-green-200"),children:o.isRunning?(0,sa.jsx)(Pa,{className:"w-5 h-5"}):(0,sa.jsx)(Aa,{className:"w-5 h-5"})}),(0,sa.jsx)("button",{onClick:()=>(e=>{K(t=>{const s=new Map(t),n=s.get(e);return n&&s.set(e,{...n,seconds:0,isRunning:!1}),s})})(r),className:"p-2 bg-gray-100 text-gray-600 hover:bg-gray-200 rounded-lg",children:(0,sa.jsx)(Da,{className:"w-5 h-5"})})]})]})}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async e=>{try{const t=h.find(t=>t.id===e),s=q.get(e)||{};if(!t)return void Pt.error("Rendez-vous non trouv\xe9");const n=e=>null===e||void 0===e?"":String(e).trim(),a=e=>{if(null===e||void 0===e||""===e)return null;const t=parseFloat(e);return isNaN(t)?null:t},r={patient_id:t.patient_id,appointment_id:e,date:t.date,type_rdv:n(s.type_rdv||t.type_rdv||"visite"),motif:n(s.motif||t.motif||""),poids:a(s.poids),taille:a(s.taille),pc:a(s.pc),temperature:a(s.temperature),diagnostic:n(s.diagnostic),observation_clinique:n(s.observation_clinique),observation_medicale:n(s.observation_medicale),traitement:n(s.traitement),bilans:n(s.bilans),notes:n(s.notes),relance_telephonique:Boolean(s.relance_telephonique),date_relance:s.date_relance||null,rappel_vaccin:Boolean(s.rappel_vaccin),nom_vaccin:s.rappel_vaccin?n(s.nom_vaccin):"",date_vaccin:s.rappel_vaccin&&s.date_vaccin||"",rappel_whatsapp_vaccin:!!s.rappel_vaccin&&Boolean(s.rappel_whatsapp_vaccin)};console.log("Saving consultation with payload:",r);const i=await Qn.post(`${J}/api/consultations`,r);console.log("Consultation saved:",i.data);const l=await Qn.put(`${J}/api/rdv/${e}/statut`,{statut:"termine"});console.log("Status updated:",l.data),Pt.success("Consultation sauvegard\xe9e avec succ\xe8s"),ue(e),ae()}catch(s){var t;console.error("Error saving consultation:",s),console.error("Error response:",s.response);let e="Erreur lors de la sauvegarde de la consultation";if(null!==(t=s.response)&&void 0!==t&&t.data){const t=s.response.data;e="string"===typeof t?t:t.detail?"string"===typeof t.detail?t.detail:Array.isArray(t.detail)?t.detail.map(e=>"string"===typeof e?e:e.msg||JSON.stringify(e)).join(", "):JSON.stringify(t.detail):t.message?t.message:t.error?t.error:Object.keys(t).map(e=>`${e}: ${t[e]}`).join(", ")}else s.message&&(e=s.message);Pt.error(`Erreur: ${e}`)}})(r)},children:[(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mesures"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,sa.jsx)(Ta,{className:"w-4 h-4 inline mr-1"}),"Poids (kg)"]}),(0,sa.jsx)("input",{type:"number",step:"0.1",value:l.poids||"",onChange:e=>he(r,"poids",e.target.value),className:"input-field",placeholder:"0.0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,sa.jsx)(Ra,{className:"w-4 h-4 inline mr-1"}),"Taille (cm)"]}),(0,sa.jsx)("input",{type:"number",value:l.taille||"",onChange:e=>he(r,"taille",e.target.value),className:"input-field",placeholder:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,sa.jsx)(Oa,{className:"w-4 h-4 inline mr-1"}),"PC (cm)"]}),(0,sa.jsx)("input",{type:"number",value:l.pc||"",onChange:e=>he(r,"pc",e.target.value),className:"input-field",placeholder:"0"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Diagnostic"}),(0,sa.jsx)("input",{value:l.diagnostic||"",onChange:e=>he(r,"diagnostic",e.target.value),className:"input-stylus",placeholder:"Diagnostic m\xe9dical - Optimis\xe9 pour Apple Pencil"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observation Clinique"}),(0,sa.jsx)("textarea",{value:l.observation_clinique||"",onChange:e=>he(r,"observation_clinique",e.target.value),className:"textarea-stylus bg-white bg-striped-paper border-2 border-gray-300 rounded-lg p-4 text-gray-900 shadow-inner",style:{backgroundImage:"repeating-linear-gradient(\n                                    transparent,\n                                    transparent 24px,\n                                    #e5e7eb 24px,\n                                    #e5e7eb 25px\n                                  )",lineHeight:"25px",paddingTop:"4px"},rows:"12",placeholder:"Observations cliniques d\xe9taill\xe9es - Optimis\xe9 pour Apple Pencil"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relance t\xe9l\xe9phonique"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:l.relance_telephonique||!1,onChange:e=>he(r,"relance_telephonique",e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,sa.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,sa.jsx)(ga,{className:"w-4 h-4 inline mr-1"}),"Programmer une relance"]})]}),l.relance_telephonique&&(0,sa.jsx)("div",{children:(0,sa.jsx)("input",{type:"date",value:l.date_relance||"",onChange:e=>he(r,"date_relance",e.target.value),className:"input-field"})})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rappel vaccin"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:l.rappel_vaccin||!1,onChange:e=>he(r,"rappel_vaccin",e.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udc89 Programmer un rappel vaccin"})]}),l.rappel_vaccin&&(0,sa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du prochain vaccin"}),(0,sa.jsx)("input",{type:"text",value:l.nom_vaccin||"",onChange:e=>he(r,"nom_vaccin",e.target.value),className:"input-stylus",placeholder:"Ex: ROR, DTCoq, Pneumocoque..."})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date du vaccin"}),(0,sa.jsx)("input",{type:"date",value:l.date_vaccin||"",onChange:e=>he(r,"date_vaccin",e.target.value),className:"input-field"})]})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:l.rappel_whatsapp_vaccin||!1,onChange:e=>he(r,"rappel_whatsapp_vaccin",e.target.checked),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udcf1 Envoyer rappel via WhatsApp"})]})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>ue(r),className:"btn-outline",children:"Annuler"}),(0,sa.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(La,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Sauvegarder"})]})]})]})]})})})})},r)}),ve&&Ne&&(0,sa.jsx)(Qa,{isOpen:ve,onClose:fe,appointment:Ne,onPaymentUpdate:ge,API_BASE_URL:J,user:d})]})},Za=Gn("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),er=Gn("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),tr=Gn("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),sr=Gn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),nr=Gn("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),ar=e=>{var t,s,n,a;let{user:i}=e;const[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)(!0),[m,p]=(0,r.useState)(""),[x,f]=(0,r.useState)(null),[g,b]=(0,r.useState)(""),[y,v]=(0,r.useState)("normal"),[j,N]=(0,r.useState)(""),[w,_]=(0,r.useState)(null),[k,S]=(0,r.useState)(""),[C,E]=(0,r.useState)(null),[M,P]=(0,r.useState)(""),[A,D]=(0,r.useState)("normal"),[T,R]=(0,r.useState)(""),[O,L]=(0,r.useState)(""),[z,I]=(0,r.useState)(!1),[F,$]=(0,r.useState)(null),B=(0,r.useRef)(null),V=async()=>{try{const e=new URLSearchParams;T&&e.append("status",T),O&&e.append("priority",O),k&&e.append("direction",k);const t=await Qn.get(`/api/phone-messages?${e}`);o(t.data.phone_messages||[])}catch(e){console.error("Error loading phone messages:",e),Pt.error("Erreur lors du chargement des messages")}},U=(e,t)=>{const s=new URLSearchParams({patient:e,patientName:t||""});window.location.href=`/consultation?${s.toString()}`},H=async()=>{if(M.trim())try{await Qn.put(`/api/phone-messages/${C.id}`,{message_content:M,priority:A}),Pt.success("Message modifi\xe9 avec succ\xe8s"),E(null),P(""),D("normal"),V()}catch(e){console.error("Error editing message:",e),Pt.error("Erreur lors de la modification du message")}else Pt.error("Le contenu du message ne peut pas \xeatre vide")},W=()=>{E(null),P(""),D("normal")};return(0,r.useEffect)(()=>{V(),h(!1);const e="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com".replace(/^http/,"ws")+"/api/ws";return B.current=new WebSocket(e),B.current.onmessage=e=>{const t=JSON.parse(e.data);"new_phone_message"!==t.type&&"phone_message_responded"!==t.type||(V(),"new_phone_message"===t.type?"secretary_to_doctor"===t.direction&&"medecin"===i.role?Pt.success(`Nouveau message de la secr\xe9taire concernant ${t.patient_name}`,{icon:"\ud83d\udcde",duration:5e3}):"doctor_to_secretary"===t.direction&&"secretaire"===i.role&&Pt.success("Nouveau message du m\xe9decin",{icon:"\ud83d\udcde",duration:5e3}):"phone_message_responded"===t.type&&("secretary_to_doctor"===t.direction&&"secretaire"===i.role?Pt.success(`R\xe9ponse re\xe7ue du m\xe9decin concernant ${t.patient_name}`,{icon:"\u2705",duration:5e3}):"doctor_to_secretary"===t.direction&&"medecin"===i.role&&Pt.success("R\xe9ponse re\xe7ue de la secr\xe9taire",{icon:"\u2705",duration:5e3})))},()=>{B.current&&B.current.close()}},[i.role]),(0,r.useEffect)(()=>{V()},[T,O,k]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{(async e=>{if(e)try{const t=await Qn.get(`/api/patients/search?q=${encodeURIComponent(e)}`);d(t.data.patients||[])}catch(t){console.error("Error searching patients:",t)}else d([])})(m)},300);return()=>clearTimeout(e)},[m]),u?(0,sa.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,sa.jsx)(ga,{className:"w-6 h-6 mr-2 text-primary-500"}),"Messages T\xe9l\xe9phoniques"]}),(0,sa.jsx)("p",{className:"text-gray-600",children:"secretaire"===i.role?"Transmettez les messages des patients au m\xe9decin":"Consultez et r\xe9pondez aux messages des patients"})]}),(0,sa.jsx)("div",{className:"flex items-center space-x-3",children:(0,sa.jsxs)("button",{onClick:async()=>{if(window.confirm("\ud83d\uddd1\ufe0f SUPPRIMER TOUS LES MESSAGES\n\n\xcates-vous s\xfbr de vouloir supprimer TOUS les messages t\xe9l\xe9phoniques ?\n\nCette action est IRR\xc9VERSIBLE.\n\n\u26a0\ufe0f Cliquez OK pour confirmer la suppression."))try{const e=await Qn.delete("/api/phone-messages");Pt.success(e.data.message),await V()}catch(e){console.error("Error deleting all messages:",e),Pt.error("Erreur lors de la suppression des messages")}},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",title:"Supprimer tous les messages",children:[(0,sa.jsx)(fa,{className:"w-4 h-4"}),(0,sa.jsx)("span",{className:"hidden sm:inline",children:"Effacer tout"})]})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,sa.jsx)("div",{className:"lg:col-span-1",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,sa.jsx)(ua,{className:"w-5 h-5 mr-2 text-blue-500"}),"secretaire"===i.role?"Message au M\xe9decin":"Message \xe0 la Secr\xe9taire"]}),"secretaire"===i.role&&(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rechercher un patient"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,sa.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Nom du patient..."})]}),c.length>0&&(0,sa.jsx)("div",{className:"mt-2 max-h-48 overflow-y-auto border border-gray-200 rounded-lg bg-white",children:c.map(e=>(0,sa.jsxs)("div",{onClick:()=>{f(e),p(`${e.prenom} ${e.nom}`),d([])},className:"px-4 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[(0,sa.jsxs)("div",{className:"font-medium text-gray-900",children:[e.prenom," ",e.nom]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-500",children:[e.age," - ",e.numero_whatsapp]})]},e.id))}),x&&(0,sa.jsx)("div",{className:"mt-2 p-3 bg-primary-50 rounded-lg border border-primary-200",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"font-medium text-primary-900",children:[x.prenom," ",x.nom]}),(0,sa.jsx)("div",{className:"text-sm text-primary-600",children:x.age})]}),(0,sa.jsx)("button",{onClick:()=>{f(null),p("")},className:"text-primary-600 hover:text-primary-800",children:(0,sa.jsx)(ha,{className:"w-4 h-4"})})]})})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"secretaire"===i.role?"Question du patient":"Message pour la secr\xe9taire"}),(0,sa.jsx)("textarea",{value:g,onChange:e=>b(e.target.value),className:"textarea-stylus",rows:4,placeholder:"secretaire"===i.role?"D\xe9crivez la question ou demande du patient - Optimis\xe9 pour Apple Pencil":"Votre message pour la secr\xe9taire - Optimis\xe9 pour Apple Pencil",inputMode:"text",autoCapitalize:"sentences"})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priorit\xe9"}),(0,sa.jsxs)("div",{className:"flex space-x-3",children:[(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",value:"normal",checked:"normal"===y,onChange:e=>v(e.target.value),className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Normal"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",value:"urgent",checked:"urgent"===y,onChange:e=>v(e.target.value),className:"mr-2"}),(0,sa.jsxs)("span",{className:"text-sm text-red-700 flex items-center",children:[(0,sa.jsx)(Za,{className:"w-4 h-4 mr-1"}),"Urgent"]})]})]})]}),(0,sa.jsxs)("button",{onClick:async()=>{if(!g.trim())return void Pt.error("Veuillez saisir un message");let e,t;if("secretaire"===i.role){if(!x)return void Pt.error("Veuillez s\xe9lectionner un patient");e="secretary_to_doctor",t="medecin"}else e="doctor_to_secretary",t="secretaire";try{const s=new Date,n={message_content:g,priority:y,call_date:s.toISOString().split("T")[0],call_time:s.toTimeString().split(" ")[0].substring(0,5),direction:e,recipient_role:t};"secretaire"===i.role&&x&&(n.patient_id=x.id),await Qn.post("/api/phone-messages",n);const a="secretaire"===i.role?"Message envoy\xe9 au m\xe9decin avec succ\xe8s":"Message envoy\xe9 \xe0 la secr\xe9taire avec succ\xe8s";Pt.success(a),f(null),b(""),v("normal"),p(""),d([]),V()}catch(s){console.error("Error creating phone message:",s),Pt.error("Erreur lors de la cr\xe9ation du message")}},disabled:!g.trim()||"secretaire"===i.role&&!x,className:"w-full flex items-center justify-center py-2 px-4 rounded-lg font-medium transition-colors "+(g.trim()&&("medecin"===i.role||x)?"bg-primary-500 text-white hover:bg-primary-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,sa.jsx)(er,{className:"w-4 h-4 mr-2"}),"secretaire"===i.role?"Envoyer au M\xe9decin":"Envoyer \xe0 la Secr\xe9taire"]})]})}),(0,sa.jsx)("div",{className:"lg:col-span-2",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,sa.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Messages (",l.length,")"]}),(0,sa.jsxs)("div",{className:"flex space-x-3",children:[(0,sa.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm",children:[(0,sa.jsx)("option",{value:"",children:"Toutes directions"}),(0,sa.jsx)("option",{value:"secretary_to_doctor",children:"Secr\xe9taire \u2192 M\xe9decin"}),(0,sa.jsx)("option",{value:"doctor_to_secretary",children:"M\xe9decin \u2192 Secr\xe9taire"})]}),(0,sa.jsxs)("select",{value:T,onChange:e=>R(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm",children:[(0,sa.jsx)("option",{value:"",children:"Tous les statuts"}),(0,sa.jsx)("option",{value:"nouveau",children:"Nouveau"}),(0,sa.jsx)("option",{value:"trait\xe9",children:"Trait\xe9"})]}),(0,sa.jsxs)("select",{value:O,onChange:e=>L(e.target.value),className:"px-3 py-1 border border-gray-300 rounded-lg text-sm",children:[(0,sa.jsx)("option",{value:"",children:"Toutes priorit\xe9s"}),(0,sa.jsx)("option",{value:"urgent",children:"Urgent"}),(0,sa.jsx)("option",{value:"normal",children:"Normal"})]})]})]})}),(0,sa.jsx)("div",{className:"max-h-96 overflow-y-auto",children:0===l.length?(0,sa.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,sa.jsx)(ga,{className:"w-12 h-12 mx-auto mb-4 opacity-30"}),(0,sa.jsx)("p",{className:"font-medium",children:"Aucun message t\xe9l\xe9phonique"}),(0,sa.jsx)("p",{className:"text-sm",children:"Les messages appara\xeetront ici"})]}):(0,sa.jsx)("div",{className:"divide-y divide-gray-200",children:l.map(e=>(0,sa.jsxs)("div",{className:"p-4 hover:bg-gray-50",children:[(0,sa.jsxs)("div",{className:"flex items-start justify-between",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center mb-2",children:[(0,sa.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mr-2 "+("secretary_to_doctor"===e.direction?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"secretary_to_doctor"===e.direction?"\ud83d\udcdd Secr\xe9taire \u2192 M\xe9decin":"\ud83d\udc68\u200d\u2695\ufe0f M\xe9decin \u2192 Secr\xe9taire"}),e.patient_name&&(0,sa.jsx)("button",{onClick:()=>(async e=>{try{const t=await Qn.get(`/api/patients/${e}`);$(t.data),I(!0)}catch(t){console.error("Error loading patient details:",t),Pt.error("Erreur lors du chargement des d\xe9tails du patient")}})(e.patient_id),className:"font-medium text-primary-600 hover:text-primary-800 underline",children:e.patient_name}),"urgent"===e.priority&&(0,sa.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,sa.jsx)(Za,{className:"w-3 h-3 mr-1"}),"Urgent"]}),(0,sa.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+("nouveau"===e.status?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800"),children:"nouveau"===e.status?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)(ra,{className:"w-3 h-3 mr-1"}),"Nouveau"]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)(tr,{className:"w-3 h-3 mr-1"}),"Trait\xe9"]})})]}),(0,sa.jsx)("div",{className:"mb-2",children:C&&C.id===e.id?(0,sa.jsxs)("div",{className:"space-y-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,sa.jsxs)("div",{className:"flex items-center mb-2",children:[(0,sa.jsx)(sr,{className:"w-4 h-4 text-yellow-600 mr-2"}),(0,sa.jsx)("span",{className:"font-medium text-yellow-800",children:"Modification du message:"})]}),(0,sa.jsx)("textarea",{value:M,onChange:e=>P(e.target.value),className:"textarea-stylus text-sm",rows:3,placeholder:"Contenu du message - Optimis\xe9 pour Apple Pencil",inputMode:"text",autoCapitalize:"sentences"}),(0,sa.jsx)("div",{className:"flex items-center space-x-4",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Priorit\xe9:"}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",value:"normal",checked:"normal"===A,onChange:e=>D(e.target.value),className:"mr-1"}),(0,sa.jsx)("span",{className:"text-sm",children:"Normal"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"radio",value:"urgent",checked:"urgent"===A,onChange:e=>D(e.target.value),className:"mr-1"}),(0,sa.jsxs)("span",{className:"text-sm text-red-700 flex items-center",children:[(0,sa.jsx)(Za,{className:"w-3 h-3 mr-1"}),"Urgent"]})]})]})}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsxs)("button",{onClick:H,disabled:!M.trim(),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors flex items-center "+(M.trim()?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,sa.jsx)(La,{className:"w-3 h-3 mr-1"}),"Sauvegarder"]}),(0,sa.jsx)("button",{onClick:W,className:"px-3 py-1 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm font-medium",children:"Annuler"})]})]}):(0,sa.jsx)("p",{className:"text-gray-900 text-sm leading-relaxed",children:e.message_content})}),e.response_content&&(0,sa.jsxs)("div",{className:"mt-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,sa.jsxs)("div",{className:"flex items-center mb-1",children:[(0,sa.jsx)(Jn,{className:"w-4 h-4 text-green-600 mr-1"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-green-800",children:"secretary_to_doctor"===e.direction?"R\xe9ponse du m\xe9decin:":"R\xe9ponse de la secr\xe9taire:"})]}),(0,sa.jsx)("p",{className:"text-sm text-green-700",children:e.response_content})]}),(0,sa.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["secretary_to_doctor"===e.direction?"Appel":"Message"," le ",new Date(e.call_date).toLocaleDateString("fr-FR")," \xe0 ",e.call_time,e.responded_by&&(0,sa.jsxs)("span",{className:"ml-2",children:["\u2022 R\xe9pondu par ",e.responded_by]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,sa.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm(`\xcates-vous s\xfbr de vouloir supprimer ce message de ${t} ?\n\nCette action est irr\xe9versible.`))try{await Qn.delete(`/api/phone-messages/${e}`),Pt.success("Message supprim\xe9 avec succ\xe8s"),await V()}catch(s){console.error("Error deleting message:",s),Pt.error("Erreur lors de la suppression du message")}})(e.id,e.patient_name),className:"text-red-600 hover:text-red-700 p-1",title:"Supprimer le message",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})}),!C&&(0,sa.jsx)("button",{onClick:()=>(e=>{E(e),P(e.message_content),D(e.priority)})(e),className:"text-blue-600 hover:text-blue-700 p-1",title:"Modifier le message",children:(0,sa.jsx)(sr,{className:"w-4 h-4"})}),e.patient_id&&(0,sa.jsx)("button",{onClick:()=>U(e.patient_id,e.patient_name),className:"text-indigo-600 hover:text-indigo-700 p-1",title:"Voir les consultations du patient",children:(0,sa.jsx)(ta,{className:"w-4 h-4"})}),"nouveau"===e.status&&!C&&(0,sa.jsxs)(sa.Fragment,{children:["medecin"===i.role&&"secretary_to_doctor"===e.direction&&(0,sa.jsx)("button",{onClick:()=>{_(e),N("")},className:"px-3 py-1 bg-primary-500 text-white rounded-lg hover:bg-primary-600 text-xs font-medium",children:"R\xe9pondre"}),"secretaire"===i.role&&"doctor_to_secretary"===e.direction&&(0,sa.jsx)("button",{onClick:()=>{_(e),N("")},className:"px-3 py-1 bg-primary-500 text-white rounded-lg hover:bg-primary-600 text-xs font-medium",children:"R\xe9pondre"})]})]})]}),w&&w.id===e.id&&(0,sa.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,sa.jsxs)("div",{className:"flex items-center mb-2",children:[(0,sa.jsx)(nr,{className:"w-4 h-4 text-blue-600 mr-2"}),(0,sa.jsx)("span",{className:"font-medium text-blue-800",children:"secretary_to_doctor"===e.direction?"Votre r\xe9ponse \xe0 la secr\xe9taire:":"Votre r\xe9ponse au m\xe9decin:"})]}),(0,sa.jsx)("textarea",{value:j,onChange:e=>N(e.target.value),className:"textarea-stylus text-sm",rows:3,placeholder:"R\xe9digez votre r\xe9ponse - Optimis\xe9 pour Apple Pencil",inputMode:"text",autoCapitalize:"sentences"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,sa.jsx)("button",{onClick:()=>(async e=>{if(j.trim())try{await Qn.put(`/api/phone-messages/${e}/response`,{response_content:j}),Pt.success("R\xe9ponse envoy\xe9e avec succ\xe8s"),_(null),N(""),V()}catch(t){console.error("Error responding to phone message:",t),Pt.error("Erreur lors de l'envoi de la r\xe9ponse")}else Pt.error("Veuillez saisir une r\xe9ponse")})(e.id),disabled:!j.trim(),className:"px-3 py-1 rounded-lg text-sm font-medium transition-colors "+(j.trim()?"bg-green-500 text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Envoyer R\xe9ponse"}),(0,sa.jsx)("button",{onClick:()=>{_(null),N("")},className:"px-3 py-1 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm font-medium",children:"Annuler"})]})]})]},e.id))})})]})})]}),z&&F&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Fiche Patient - ",F.prenom," ",F.nom]}),(0,sa.jsx)("button",{onClick:()=>I(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations personnelles"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nom complet:"}),(0,sa.jsxs)("p",{className:"text-gray-900",children:[F.prenom," ",F.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xc2ge:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:F.age||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date de naissance:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:F.date_naissance||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"WhatsApp:"}),(0,sa.jsx)("p",{className:"text-gray-900",children:F.numero_whatsapp||"N/A"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Parents"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-700",children:"P\xe8re"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(t=F.pere)||void 0===t?void 0:t.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(s=F.pere)||void 0===s?void 0:s.telephone)||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-700",children:"M\xe8re"}),(0,sa.jsx)("p",{className:"text-gray-900",children:(null===(n=F.mere)||void 0===n?void 0:n.nom)||"N/A"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:(null===(a=F.mere)||void 0===a?void 0:a.telephone)||"N/A"})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,sa.jsx)("button",{onClick:()=>U(F.id,`${F.prenom} ${F.nom}`),className:"btn-primary",children:"Voir Consultations"}),(0,sa.jsx)("button",{onClick:()=>I(!1),className:"btn-outline",children:"Fermer"})]})]})})})]})},rr=Gn("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),ir=Gn("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),lr=Gn("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),or=Gn("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),cr=e=>{let{value:t,onChange:s,placeholder:n,className:a="",rows:i=6,enableOCR:l=!0,medicalContext:o=!1}=e;const[c,d]=(0,r.useState)("typing"),[u,h]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),x=(0,r.useRef)(null),[f,g]=(0,r.useState)(!1),b=e=>{g(!0);const t=x.current,s=t.getBoundingClientRect(),n=e.clientX-s.left,a=e.clientY-s.top,r=t.getContext("2d");r.beginPath(),r.moveTo(n,a)},y=e=>{if(!f)return;const t=x.current,s=t.getBoundingClientRect(),n=e.clientX-s.left,a=e.clientY-s.top,r=t.getContext("2d");r.lineTo(n,a),r.strokeStyle="#1f2937",r.lineWidth=2,r.lineCap="round",r.lineJoin="round",r.stroke()},v=()=>{g(!1)},j=()=>{const e="typing"===c?"handwriting":"typing";d(e),"handwriting"===e&&setTimeout(()=>{const e=x.current;e&&(e.width=e.offsetWidth,e.height=e.offsetHeight)},100)},N="handwriting"===c?{className:"textarea-stylus bg-striped-paper border-2 border-blue-200",inputMode:"none",autoCapitalize:"off",spellCheck:!1,style:{backgroundImage:"repeating-linear-gradient(\n        transparent,\n        transparent 24px,\n        #e5e7eb 24px,\n        #e5e7eb 25px\n      )",lineHeight:"25px",paddingTop:"4px"}}:{className:"textarea-stylus bg-white",inputMode:"text",autoCapitalize:"sentences",spellCheck:!0};return(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,sa.jsxs)("div",{className:"flex space-x-2",children:[(0,sa.jsxs)("button",{onClick:j,className:"flex items-center space-x-1 px-3 py-1 rounded-lg text-sm transition-all "+("typing"===c?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600"),children:[(0,sa.jsx)(ir,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Saisie"})]}),(0,sa.jsxs)("button",{onClick:j,className:"flex items-center space-x-1 px-3 py-1 rounded-lg text-sm transition-all "+("handwriting"===c?"bg-blue-100 text-blue-700 border border-blue-300":"bg-gray-100 text-gray-600"),children:[(0,sa.jsx)(Va,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Manuscrit"})]})]}),"handwriting"===c&&(0,sa.jsxs)("div",{className:"flex space-x-1",children:[(0,sa.jsx)("button",{onClick:()=>{const e=x.current;e.getContext("2d").clearRect(0,0,e.width,e.height)},className:"p-1 rounded text-gray-500 hover:text-gray-700",title:"Effacer",children:(0,sa.jsx)(lr,{className:"w-4 h-4"})}),l&&(0,sa.jsxs)("button",{onClick:async()=>{if(x.current){h(!0);try{const e=x.current.toDataURL("image/png"),n=await fetch("https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/ai/refine-handwriting",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageData:e,currentText:t,medicalContext:o,language:"fr"})}),a=await n.json();a.success&&(s(a.refinedText),p({originalImage:e,extractedText:a.extractedText,refinedText:a.refinedText,confidence:a.confidence}))}catch(e){console.error("Handwriting refinement failed:",e)}finally{h(!1)}}},disabled:u,className:"flex items-center space-x-1 px-2 py-1 bg-purple-100 text-purple-700 rounded text-sm hover:bg-purple-200 transition-all disabled:opacity-50",title:"Auto-raffinement IA",children:[(0,sa.jsx)(or,{className:"w-4 h-4"}),u?"Traitement...":"Raffiner"]})]})]}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("textarea",{value:t,onChange:e=>s(e.target.value),placeholder:`${n} - Mode ${"handwriting"===c?"manuscrit":"saisie"}`,rows:i,className:`${N.className} ${a}`,inputMode:N.inputMode,autoCapitalize:N.autoCapitalize,spellCheck:N.spellCheck,style:N.style,autoComplete:"off","data-gramm":"false"}),"handwriting"===c&&(0,sa.jsx)("canvas",{ref:x,className:"absolute top-0 left-0 w-full h-full pointer-events-auto bg-transparent",onMouseDown:b,onMouseMove:y,onMouseUp:v,onMouseLeave:v,onTouchStart:e=>b(e.touches[0]),onTouchMove:e=>{e.preventDefault(),y(e.touches[0])},onTouchEnd:v,style:{zIndex:"handwriting"===c?10:-1,cursor:"crosshair"}})]}),u&&(0,sa.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-80 flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2 text-purple-600",children:[(0,sa.jsx)(or,{className:"w-5 h-5 animate-pulse"}),(0,sa.jsx)("span",{children:"Raffinement en cours..."})]})}),m&&(0,sa.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded text-xs",children:[(0,sa.jsx)("strong",{children:"Confiance OCR:"})," ",m.confidence,"%"]})]})},dr="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com",ur=e=>{let{user:t}=e;const s=te(),[n,a]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[h,m]=(0,r.useState)(""),[p,x]=(0,r.useState)([]),[f,g]=(0,r.useState)({isOpen:!1,isMinimized:!1,mode:"create",consultationId:null}),[b,y]=(0,r.useState)({isOpen:!1,consultation:null}),[v,j]=(0,r.useState)({isOpen:!1,data:{isNewPatient:!1,selectedPatientId:"",patientName:"",patientSearchTerm:"",filteredPatientsForModal:[],newPatient:{nom:"",prenom:"",date_naissance:"",telephone:""},date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),visitType:"visite",paymentAmount:"",isInsured:!1}}),[N,w]=(0,r.useState)(0),[_,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)({patient_id:"",date:(new Date).toISOString().split("T")[0],type_rdv:"visite",poids:"",taille:"",pc:"",diagnostic:"",observation_clinique:"",relance_telephonique:!1,date_relance:"",duree:0,rappel_vaccin:!1,nom_vaccin:"",date_vaccin:"",rappel_whatsapp_vaccin:!1});(0,r.useEffect)(()=>{(async()=>{try{const e=await Qn.get(`${dr}/api/patients`);a(e.data.patients||[])}catch(e){console.error("Error fetching patients:",e),Pt.error("Erreur lors du chargement des patients")}finally{u(!1)}})()},[]),(0,r.useEffect)(()=>{if(0===n.length)return;const e=new URLSearchParams(s.search),t=e.get("patient"),a=e.get("patientName");if(t||a){let e=null;if(t&&(e=n.find(e=>e.id===t)),!e&&a&&(e=n.find(e=>`${e.prenom} ${e.nom}`.toLowerCase().includes(a.toLowerCase()))),e){l(e),m(`${e.prenom} ${e.nom}`),x([]);(async()=>{try{const t=Date.now(),s=await Qn.get(`${dr}/api/consultations/patient/${e.id}?_t=${t}`);c(s.data||[]),console.log(`\ud83d\udd17 Patient pre-selected from URL: ${e.prenom} ${e.nom}`)}catch(t){console.error("Error fetching consultations:",t),Pt.error("Erreur lors du chargement des consultations")}})()}}},[n,s.search]),(0,r.useEffect)(()=>{let e;return _?e=setInterval(()=>{w(e=>e+1)},1e3):_||0===N||clearInterval(e),()=>clearInterval(e)},[_,N]),(0,r.useEffect)(()=>{if(""===h.trim())x([]);else{const e=n.filter(e=>{var t;return`${e.prenom} ${e.nom}`.toLowerCase().includes(h.toLowerCase())||(null===(t=e.telephone)||void 0===t?void 0:t.includes(h))});x(e.slice(0,10))}},[h,n]);const E=async e=>{try{const t=Date.now(),s=await Qn.get(`${dr}/api/consultations/patient/${e}?_t=${t}`);c(s.data||[])}catch(t){console.error("Error fetching consultations:",t),Pt.error("Erreur lors du chargement des consultations")}},M=()=>{const e=new Date;j({isOpen:!0,data:{isNewPatient:!1,selectedPatientId:(null===i||void 0===i?void 0:i.id)||"",patientName:i?`${i.prenom} ${i.nom}`:"",patientSearchTerm:i?`${i.prenom} ${i.nom}`:"",filteredPatientsForModal:[],newPatient:{nom:"",prenom:"",date_naissance:"",telephone:""},date:e.toISOString().split("T")[0],time:e.toTimeString().slice(0,5),visitType:"visite",paymentAmount:"",isInsured:!1}})},P=async e=>{let t=null;"visite"===e.type_rdv&&(t=await(async e=>{try{console.log(`\ud83d\udd0d Fetching payment for appointment: ${e}`);const t=(await Qn.get(`${dr}/api/payments/appointment/${e}`,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}})).data;return console.log("\ud83d\udcb0 Payment found:",t),t?t.montant:null}catch(t){console.error("\u274c Error fetching payment amount:",t);try{console.log(`\ud83d\udd04 Trying fallback method for appointment: ${e}`);const t=((await Qn.get(`${dr}/api/payments`,{headers:{"Cache-Control":"no-cache"}})).data||[]).find(t=>t.appointment_id===e&&"paye"===t.statut);return console.log("\ud83d\udd0d Fallback payment found:",t),t?t.montant:null}catch(s){return console.error("\u274c Fallback also failed:",s),null}}})(e.appointment_id)),y({isOpen:!0,consultation:{...e,paymentAmount:t}})},A=()=>{g({isOpen:!1,isMinimized:!1,mode:"create",consultationId:null}),k(!1),w(0)},D=e=>{const t=Math.floor(e/3600),s=Math.floor(e%3600/60),n=e%60;return t>0?`${t}:${s.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${s}:${n.toString().padStart(2,"0")}`},T=e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),R=e=>{if(!e||""===e)return"";try{const t=new Date,s=new Date(e);if(isNaN(s.getTime()))return"";let n=t.getFullYear()-s.getFullYear();const a=t.getMonth()-s.getMonth();return(a<0||0===a&&t.getDate()<s.getDate())&&n--,n>0?n:""}catch(t){return console.warn("Error calculating age:",t),""}};return d?(0,sa.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Consultations"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Gestion des consultations par patient"})]}),(0,sa.jsxs)("button",{onClick:M,className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(ya,{className:"w-5 h-5"}),(0,sa.jsx)("span",{children:"Ajouter Consultation"})]})]}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,sa.jsx)("input",{type:"text",placeholder:"Rechercher un patient (nom, pr\xe9nom, t\xe9l\xe9phone) - \xc9criture manuscrite support\xe9e",value:h,onChange:e=>m(e.target.value),className:"search-stylus pl-10 w-full",inputMode:"text",autoCapitalize:"words",autoComplete:"off"})]}),p.length>0&&(0,sa.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto",children:p.map(e=>(0,sa.jsxs)("button",{onClick:()=>(async e=>{l(e),m(`${e.prenom} ${e.nom}`),x([]),await E(e.id)})(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,sa.jsxs)("div",{className:"font-medium text-gray-900",children:[e.prenom," ",e.nom]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-600",children:[e.telephone," \u2022 ",R(e.date_naissance)?`${R(e.date_naissance)} ans`:"\xc2ge non renseign\xe9"]})]},e.id))})]}),v.isOpen&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Consultation Rapide"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Cr\xe9er une nouvelle consultation"})]}),(0,sa.jsx)("button",{onClick:()=>j({isOpen:!1,data:{isNewPatient:!1,selectedPatientId:"",patientName:"",patientSearchTerm:"",filteredPatientsForModal:[],newPatient:{nom:"",prenom:"",date_naissance:"",telephone:""},date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),visitType:"visite",paymentAmount:"",isInsured:!1}}),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-6 h-6"})})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{let s=null;if(v.data.isNewPatient){const{nom:e,prenom:t,date_naissance:n,telephone:r}=v.data.newPatient;if(!e.trim()||!t.trim())return void Pt.error("Veuillez renseigner au moins le nom et pr\xe9nom du patient");const i={nom:e.trim(),prenom:t.trim(),date_naissance:n||"",telephone:r||"",numero_whatsapp:r||"",adresse:"",antecedents:"",notes:""},l=await Qn.post(`${dr}/api/patients`,i);if(!l.data||!l.data.patient_id)throw new Error("Invalid response from patient creation API");{const e=l.data.patient_id,t=await Qn.get(`${dr}/api/patients/${e}`);s=t.data,s.id||(s.id=e)}a(e=>[...e,s]),console.log("\u2705 Nouveau patient cr\xe9\xe9:",s),Pt.success("Nouveau patient cr\xe9\xe9 avec succ\xe8s")}else{if(!v.data.selectedPatientId)return void Pt.error("Veuillez s\xe9lectionner un patient");s=n.find(e=>e.id===v.data.selectedPatientId)}if(!s)return console.error("\u274c Patient non trouv\xe9:",s),void Pt.error("Patient non trouv\xe9");if(!s.nom||!s.prenom)return console.error("\u274c Propri\xe9t\xe9s patient manquantes:",s),void Pt.error("Erreur: donn\xe9es patient incompl\xe8tes");console.log("\ud83d\udd0d Patient actuel pour consultation:",s),l(s),m(`${s.prenom} ${s.nom}`);let r=null;try{const t={patient_id:s.id,date:v.data.date,heure:v.data.time,type_rdv:v.data.visitType,motif:"visite"===v.data.visitType?"Consultation":"Contr\xf4le",notes:"",statut:"confirme"},n=await Qn.post(`${dr}/api/appointments`,t);if(r=n.data.id||n.data.appointment_id,console.log("\u2705 Rendez-vous cr\xe9\xe9 avec succ\xe8s:",r),"visite"===v.data.visitType&&v.data.paymentAmount)try{const e={paye:!0,montant:parseFloat(v.data.paymentAmount),type_paiement:"espece",assure:v.data.isInsured,notes:"Paiement consultation modal"};await Qn.put(`${dr}/api/rdv/${r}/paiement`,e),console.log("\u2705 Paiement cr\xe9\xe9 avec succ\xe8s via RDV")}catch(e){console.error("\u274c \xc9chec cr\xe9ation paiement:",e),Pt.error("Consultation cr\xe9\xe9e mais paiement non enregistr\xe9. Veuillez l'ajouter manuellement.")}}catch(t){console.error("\u274c Erreur cr\xe9ation rendez-vous:",t),r=`consultation_${Date.now()}`,console.log("\ud83d\udd04 Utilisation ID de fallback:",r)}C({patient_id:s.id,appointment_id:r,date:v.data.date,type_rdv:v.data.visitType,poids:"",taille:"",pc:"",diagnostic:"",observation_clinique:"",relance_telephonique:!1,date_relance:"",duree:0,rappel_vaccin:!1,nom_vaccin:"",date_vaccin:"",rappel_whatsapp_vaccin:!1}),j({isOpen:!1,data:{isNewPatient:!1,selectedPatientId:"",patientName:"",patientSearchTerm:"",filteredPatientsForModal:[],newPatient:{nom:"",prenom:"",date_naissance:"",telephone:""},date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),visitType:"visite",paymentAmount:"",isInsured:!1}}),g({isOpen:!0,isMinimized:!1,mode:"create",consultationId:null}),w(0),k(!0),await E(s.id)}catch(t){console.error("Error starting consultation:",t),Pt.error("Erreur lors de la cr\xe9ation de la consultation")}})()},children:[(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Patient"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:v.data.isNewPatient,onChange:e=>j(t=>({...t,data:{...t.data,isNewPatient:e.target.checked,selectedPatientId:e.target.checked?"":t.data.selectedPatientId,patientSearchTerm:e.target.checked?"":t.data.patientSearchTerm,filteredPatientsForModal:[]}})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Nouveau patient"})]}),v.data.isNewPatient?(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom *"}),(0,sa.jsx)("input",{type:"text",value:v.data.newPatient.nom,onChange:e=>j(t=>({...t,data:{...t.data,newPatient:{...t.data.newPatient,nom:e.target.value}}})),className:"input-field",placeholder:"Nom de famille",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xe9nom *"}),(0,sa.jsx)("input",{type:"text",value:v.data.newPatient.prenom,onChange:e=>j(t=>({...t,data:{...t.data,newPatient:{...t.data.newPatient,prenom:e.target.value}}})),className:"input-field",placeholder:"Pr\xe9nom",required:!0})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de naissance"}),(0,sa.jsx)("input",{type:"date",value:v.data.newPatient.date_naissance,onChange:e=>j(t=>({...t,data:{...t.data,newPatient:{...t.data.newPatient,date_naissance:e.target.value}}})),className:"input-field"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"T\xe9l\xe9phone"}),(0,sa.jsx)("input",{type:"tel",value:v.data.newPatient.telephone,onChange:e=>j(t=>({...t,data:{...t.data,newPatient:{...t.data.newPatient,telephone:e.target.value}}})),className:"input-field",placeholder:"0612345678"})]})]})]}):(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rechercher un patient existant"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,sa.jsx)("input",{type:"text",value:v.data.patientSearchTerm,onChange:e=>(e=>{if(j(t=>({...t,data:{...t.data,patientSearchTerm:e,selectedPatientId:"",patientName:""}})),""===e.trim())j(e=>({...e,data:{...e.data,filteredPatientsForModal:[]}}));else{const t=n.filter(t=>{var s;return`${t.prenom} ${t.nom}`.toLowerCase().includes(e.toLowerCase())||(null===(s=t.telephone)||void 0===s?void 0:s.includes(e))});j(e=>({...e,data:{...e.data,filteredPatientsForModal:t.slice(0,10)}}))}})(e.target.value),className:"input-field pl-10",placeholder:"Nom, pr\xe9nom ou t\xe9l\xe9phone...",required:!v.data.isNewPatient})]}),v.data.filteredPatientsForModal.length>0&&(0,sa.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-60 overflow-y-auto mt-1",children:v.data.filteredPatientsForModal.map(e=>(0,sa.jsxs)("button",{type:"button",onClick:()=>(e=>{j(t=>({...t,data:{...t.data,selectedPatientId:e.id,patientName:`${e.prenom} ${e.nom}`,patientSearchTerm:`${e.prenom} ${e.nom}`,filteredPatientsForModal:[]}}))})(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,sa.jsxs)("div",{className:"font-medium text-gray-900",children:[e.prenom," ",e.nom]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-600",children:[e.telephone,R(e.date_naissance)?` \u2022 ${R(e.date_naissance)} ans`:""]})]},e.id))}),v.data.selectedPatientId&&(0,sa.jsx)("div",{className:"mt-2 p-3 bg-primary-50 border border-primary-200 rounded-lg",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(rr,{className:"w-4 h-4 text-primary-600"}),(0,sa.jsxs)("span",{className:"text-sm font-medium text-primary-900",children:["Patient s\xe9lectionn\xe9: ",v.data.patientName]})]})})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Date et heure de consultation"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,sa.jsx)("input",{type:"date",value:v.data.date,onChange:e=>j(t=>({...t,data:{...t.data,date:e.target.value}})),className:"input-field",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Heure"}),(0,sa.jsx)("input",{type:"time",value:v.data.time,onChange:e=>j(t=>({...t,data:{...t.data,time:e.target.value}})),className:"input-field",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,sa.jsxs)("select",{value:v.data.visitType,onChange:e=>j(t=>({...t,data:{...t.data,visitType:e.target.value}})),className:"input-field",children:[(0,sa.jsx)("option",{value:"visite",children:"Visite"}),(0,sa.jsx)("option",{value:"controle",children:"Contr\xf4le"})]})]})]})]}),"visite"===v.data.visitType&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Paiement"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant du paiement (TN)"}),(0,sa.jsx)("input",{type:"number",step:"0.01",value:v.data.paymentAmount,onChange:e=>j(t=>({...t,data:{...t.data,paymentAmount:e.target.value}})),className:"input-field",placeholder:"0.00"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:v.data.isInsured,onChange:e=>j(t=>({...t,data:{...t.data,isInsured:e.target.checked}})),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Assur\xe9"})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>j({isOpen:!1,data:{isNewPatient:!1,selectedPatientId:"",patientName:"",patientSearchTerm:"",filteredPatientsForModal:[],newPatient:{nom:"",prenom:"",date_naissance:"",telephone:""},date:(new Date).toISOString().split("T")[0],time:(new Date).toTimeString().slice(0,5),visitType:"visite",paymentAmount:"",isInsured:!1}}),className:"btn-outline",children:"Annuler"}),(0,sa.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(Aa,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Commencer Consultation"})]})]})]})]})})}),i&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"bg-primary-50 border border-primary-200 rounded-xl p-6",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsx)("div",{className:"bg-primary-100 p-3 rounded-full",children:(0,sa.jsx)(Jn,{className:"w-8 h-8 text-primary-600"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-primary-900",children:[i.prenom," ",i.nom]}),(0,sa.jsxs)("p",{className:"text-primary-700",children:[R(i.date_naissance)?`${R(i.date_naissance)} ans`:"\xc2ge non renseign\xe9"," \u2022 ",o.length," consultation",o.length>1?"s":""]})]})]})}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,sa.jsx)("div",{className:"lg:col-span-1",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Patient"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(Jn,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\xc2ge"})]}),(0,sa.jsx)("p",{className:"text-gray-900 ml-6",children:R(i.date_naissance)?`${R(i.date_naissance)} ans`:"Non renseign\xe9"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Date de naissance"})]}),(0,sa.jsx)("p",{className:"text-gray-900 ml-6",children:i.date_naissance?T(i.date_naissance):"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ba,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Adresse"})]}),(0,sa.jsx)("p",{className:"text-gray-900 ml-6",children:i.adresse||"Non renseign\xe9e"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ga,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"T\xe9l\xe9phone"})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 ml-6",children:[(0,sa.jsx)("span",{className:"text-gray-900",children:i.telephone}),i.numero_whatsapp&&(0,sa.jsx)("a",{href:(e=>{if(!e)return"#";const t=e.replace(/\D/g,"");return`https://wa.me/212${t.startsWith("0")?t.substring(1):t}`})(i.numero_whatsapp),target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700",children:(0,sa.jsx)(ua,{className:"w-4 h-4"})})]})]}),(i.pere||i.mere)&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Parents"}),i.pere&&(0,sa.jsxs)("div",{className:"mb-3",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,sa.jsx)(rr,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"P\xe8re"})]}),(0,sa.jsxs)("div",{className:"ml-6 space-y-1",children:[(0,sa.jsx)("p",{className:"text-gray-900",children:i.pere.nom}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:i.pere.fonction}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:i.pere.telephone})]})]}),i.mere&&(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,sa.jsx)(rr,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"M\xe8re"})]}),(0,sa.jsxs)("div",{className:"ml-6 space-y-1",children:[(0,sa.jsx)("p",{className:"text-gray-900",children:i.mere.nom}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:i.mere.fonction}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:i.mere.telephone})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(nr,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Ant\xe9c\xe9dents"})]}),(0,sa.jsx)("p",{className:"text-gray-900 ml-6 text-sm",children:i.antecedents||"Aucun ant\xe9c\xe9dent"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(nr,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Notes"})]}),(0,sa.jsx)("p",{className:"text-gray-900 ml-6 text-sm",children:i.notes||"Aucune note"})]})]})]})}),(0,sa.jsx)("div",{className:"lg:col-span-3",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,sa.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Historique des Consultations (",o.length,")"]}),(0,sa.jsxs)("button",{onClick:async()=>{i&&await E(i.id)},className:"flex items-center space-x-2 px-3 py-1.5 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Actualiser les consultations",children:[(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,sa.jsx)("span",{children:"Actualiser"})]})]}),(0,sa.jsx)("div",{className:"p-6",children:0===o.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)(nr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,sa.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucune consultation"}),(0,sa.jsx)("p",{className:"text-gray-600 mb-6",children:"Ce patient n'a pas encore de consultations enregistr\xe9es"}),(0,sa.jsxs)("button",{onClick:M,className:"btn-primary inline-flex items-center space-x-2",children:[(0,sa.jsx)(ya,{className:"w-5 h-5"}),(0,sa.jsx)("span",{children:"Premi\xe8re consultation"})]})]}):(0,sa.jsx)("div",{className:"space-y-4",children:o.sort((e,t)=>new Date(t.date)-new Date(e.date)).map(e=>(0,sa.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow "+("controle"===e.type_rdv?"ml-6":""),children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("visite"===e.type_rdv?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:"visite"===e.type_rdv?"Visite":"Contr\xf4le"}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 text-gray-500"}),(0,sa.jsx)("span",{className:"font-medium text-gray-900",children:T(e.date)}),e.duree&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)(ra,{className:"w-4 h-4 text-gray-500 ml-4"}),(0,sa.jsxs)("span",{className:"text-gray-600",children:[e.duree," min"]})]})]}),e.observations&&(0,sa.jsx)("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:e.observations})]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>P(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Voir",children:(0,sa.jsx)(ta,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>(e=>{C({patient_id:e.patient_id,date:e.date,type_rdv:e.type_rdv||"visite",poids:e.poids||"",taille:e.taille||"",pc:e.pc||"",diagnostic:e.diagnostic||e.traitement||"",observation_clinique:e.observation_clinique||e.observations||"",relance_telephonique:!!e.relance_date,date_relance:e.relance_date||"",duree:e.duree||0,rappel_vaccin:e.rappel_vaccin||!1,nom_vaccin:e.nom_vaccin||"",date_vaccin:e.date_vaccin||"",rappel_whatsapp_vaccin:e.rappel_whatsapp_vaccin||!1}),g({isOpen:!0,isMinimized:!1,mode:"edit",consultationId:e.id}),w(60*e.duree||0),k(!1)})(e),className:"p-2 text-green-600 hover:bg-green-100 rounded-lg transition-colors",title:"Modifier",children:(0,sa.jsx)(xa,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer cette consultation ?"))try{await Qn.delete(`${dr}/api/consultations/${e}`),Pt.success("Consultation supprim\xe9e avec succ\xe8s"),i&&await E(i.id)}catch(t){console.error("Error deleting consultation:",t),Pt.error("Erreur lors de la suppression")}})(e.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Supprimer",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})})]})]})},e.id))})})]})})]})]}),b.isOpen&&b.consultation&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Consultation du ",T(b.consultation.date)]}),(0,sa.jsxs)("p",{className:"text-gray-600",children:[null===i||void 0===i?void 0:i.prenom," ",null===i||void 0===i?void 0:i.nom]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("visite"===b.consultation.type_rdv?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:"visite"===b.consultation.type_rdv?"Visite":"Contr\xf4le"}),"visite"===b.consultation.type_rdv&&b.consultation.paymentAmount&&(0,sa.jsxs)("span",{className:"text-gray-600",children:["(",b.consultation.paymentAmount," TN)"]})]})]}),(0,sa.jsx)("button",{onClick:()=>y({isOpen:!1,consultation:null}),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-6 h-6"})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mesures"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Poids :"}),(0,sa.jsxs)("span",{className:"font-medium",children:[b.consultation.poids||"N/A"," kg"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Taille :"}),(0,sa.jsxs)("span",{className:"font-medium",children:[b.consultation.taille||"N/A"," cm"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"PC :"}),(0,sa.jsxs)("span",{className:"font-medium",children:[b.consultation.pc||"N/A"," cm"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Dur\xe9e :"}),(0,sa.jsxs)("span",{className:"font-medium",children:[b.consultation.duree||"N/A"," min"]})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Type & Date"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Type :"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium "+("visite"===b.consultation.type_rdv?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:"visite"===b.consultation.type_rdv?"Visite":"Contr\xf4le"}),"visite"===b.consultation.type_rdv&&null!=b.consultation.paymentAmount&&(0,sa.jsxs)("span",{className:"text-gray-600 text-sm",children:["(",b.consultation.paymentAmount," TN)"]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Date :"}),(0,sa.jsx)("span",{className:"font-medium",children:T(b.consultation.date)})]}),b.consultation.relance_date&&(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Relance :"}),(0,sa.jsx)("span",{className:"font-medium",children:T(b.consultation.relance_date)})]})]})]})]}),(0,sa.jsxs)("div",{className:"mt-6 space-y-6",children:[b.consultation.diagnostic&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Diagnostic"}),(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,sa.jsx)("p",{className:"text-gray-900",children:b.consultation.diagnostic})})]}),b.consultation.observation_clinique&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Observation Clinique"}),(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.consultation.observation_clinique})})]}),b.consultation.observations&&!b.consultation.observation_clinique&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Observations m\xe9dicales"}),(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.consultation.observations})})]}),b.consultation.traitement&&!b.consultation.diagnostic&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Traitement"}),(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.consultation.traitement})})]}),b.consultation.bilan&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Bilans"}),(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,sa.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:b.consultation.bilan})})]}),b.consultation.rappel_vaccin&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Rappel Vaccin"}),(0,sa.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-4 mb-2",children:[(0,sa.jsxs)("span",{className:"font-medium text-blue-900",children:["\ud83d\udc89 ",b.consultation.nom_vaccin]}),(0,sa.jsxs)("span",{className:"text-blue-700",children:["\ud83d\udcc5 ",T(b.consultation.date_vaccin)]}),b.consultation.rappel_whatsapp_vaccin&&(0,sa.jsx)("span",{className:"text-green-600",children:"\ud83d\udcf1 WhatsApp activ\xe9"})]})})]})]}),(0,sa.jsx)("div",{className:"flex justify-end mt-6",children:(0,sa.jsx)("button",{onClick:()=>y({isOpen:!1,consultation:null}),className:"btn-outline",children:"Fermer"})})]})})}),f.isOpen&&(0,sa.jsx)(sa.Fragment,{children:f.isMinimized?(0,sa.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 p-4 min-w-[300px]",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(ra,{className:"w-5 h-5 text-blue-600"}),(0,sa.jsxs)("span",{className:"font-medium text-gray-900",children:[null===i||void 0===i?void 0:i.prenom," ",null===i||void 0===i?void 0:i.nom]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("span",{className:"text-lg font-mono text-blue-600",children:D(N)}),(0,sa.jsx)("button",{onClick:()=>{g(e=>({...e,isMinimized:!1}))},className:"p-1 hover:bg-gray-100 rounded",children:(0,sa.jsx)(Ea,{className:"w-4 h-4"})})]})]})})}):(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["create"===f.mode?"Nouvelle Consultation":"Modifier Consultation"," - ",null===i||void 0===i?void 0:i.prenom," ",null===i||void 0===i?void 0:i.nom]}),(0,sa.jsxs)("p",{className:"text-gray-600",children:[T(S.date)," - ",D(N)]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>{g(e=>({...e,isMinimized:!0}))},className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,sa.jsx)(Ma,{className:"w-5 h-5"})}),(0,sa.jsx)("button",{onClick:A,className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]})]}),(0,sa.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)(ra,{className:"w-6 h-6 text-blue-600"}),(0,sa.jsxs)("span",{className:"text-lg font-semibold text-blue-900",children:["Dur\xe9e: ",D(N)]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>k(!_),className:"p-2 rounded-lg "+(_?"bg-red-100 text-red-600 hover:bg-red-200":"bg-green-100 text-green-600 hover:bg-green-200"),children:_?(0,sa.jsx)(Pa,{className:"w-5 h-5"}):(0,sa.jsx)(Aa,{className:"w-5 h-5"})}),(0,sa.jsx)("button",{onClick:()=>{k(!1),w(0)},className:"p-2 bg-gray-100 text-gray-600 hover:bg-gray-200 rounded-lg",children:(0,sa.jsx)(Da,{className:"w-5 h-5"})})]})]})}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{k(!1);const e={patient_id:S.patient_id,appointment_id:S.appointment_id||`consultation_${Date.now()}`,date:S.date,type_rdv:S.type_rdv,duree:Math.floor(N/60),poids:parseFloat(S.poids)||0,taille:parseFloat(S.taille)||0,pc:parseFloat(S.pc)||0,diagnostic:S.diagnostic,observation_clinique:S.observation_clinique,relance_date:S.relance_telephonique?S.date_relance:"",rappel_vaccin:S.rappel_vaccin,nom_vaccin:S.rappel_vaccin?S.nom_vaccin:"",date_vaccin:S.rappel_vaccin?S.date_vaccin:"",rappel_whatsapp_vaccin:!!S.rappel_vaccin&&S.rappel_whatsapp_vaccin};"create"===f.mode?(await Qn.post(`${dr}/api/consultations`,e),Pt.success("Consultation cr\xe9\xe9e avec succ\xe8s")):"edit"===f.mode&&(await Qn.put(`${dr}/api/consultations/${f.consultationId}`,e),Pt.success("Consultation modifi\xe9e avec succ\xe8s")),A(),i?(await E(i.id),console.log("\u2705 Refreshed consultations for selected patient")):(console.log("\ud83d\udd04 No patient selected, refreshing entire component state"),Pt.success("Consultation sauvegard\xe9e. S\xe9lectionnez un patient pour voir les consultations.")),window.dispatchEvent(new CustomEvent("consultationDataUpdated",{detail:{consultationData:e,mode:f.mode,timestamp:(new Date).toISOString()}}))}catch(e){console.error("Error saving consultation:",e),Pt.error("Erreur lors de la sauvegarde")}})()},children:[(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de consultation"}),(0,sa.jsx)("input",{type:"date",value:S.date,onChange:e=>C({...S,date:e.target.value}),className:"input-field"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de consultation"}),(0,sa.jsxs)("select",{value:S.type_rdv,onChange:e=>C({...S,type_rdv:e.target.value}),className:"input-field",children:[(0,sa.jsx)("option",{value:"visite",children:"Visite"}),(0,sa.jsx)("option",{value:"controle",children:"Contr\xf4le"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Mesures"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,sa.jsx)(Ta,{className:"w-4 h-4 inline mr-1"}),"Poids (kg)"]}),(0,sa.jsx)("input",{type:"number",step:"0.1",value:S.poids,onChange:e=>C({...S,poids:e.target.value}),className:"input-field",placeholder:"0.0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,sa.jsx)(Ra,{className:"w-4 h-4 inline mr-1"}),"Taille (cm)"]}),(0,sa.jsx)("input",{type:"number",value:S.taille,onChange:e=>C({...S,taille:e.target.value}),className:"input-field",placeholder:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,sa.jsx)(Oa,{className:"w-4 h-4 inline mr-1"}),"PC (cm)"]}),(0,sa.jsx)("input",{type:"number",value:S.pc,onChange:e=>C({...S,pc:e.target.value}),className:"input-field",placeholder:"0"})]})]})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diagnostic"}),(0,sa.jsx)(cr,{value:S.diagnostic,onChange:e=>C({...S,diagnostic:e}),placeholder:"Diagnostic m\xe9dical",rows:3,medicalContext:!0,enableOCR:!0})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observation Clinique"}),(0,sa.jsx)(cr,{value:S.observation_clinique,onChange:e=>C({...S,observation_clinique:e}),placeholder:"Observations cliniques d\xe9taill\xe9es",rows:12,medicalContext:!0,enableOCR:!0,className:"bg-striped-paper"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Relance t\xe9l\xe9phonique"}),(0,sa.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:S.relance_telephonique,onChange:e=>C({...S,relance_telephonique:e.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,sa.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,sa.jsx)(ga,{className:"w-4 h-4 inline mr-1"}),"Programmer une relance"]})]}),S.relance_telephonique&&(0,sa.jsx)("div",{children:(0,sa.jsx)("input",{type:"date",value:S.date_relance,onChange:e=>C({...S,date_relance:e.target.value}),className:"input-field"})})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rappel vaccin"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:S.rappel_vaccin,onChange:e=>C({...S,rappel_vaccin:e.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udc89 Programmer un rappel vaccin"})]}),S.rappel_vaccin&&(0,sa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du prochain vaccin"}),(0,sa.jsx)("input",{type:"text",value:S.nom_vaccin,onChange:e=>C({...S,nom_vaccin:e.target.value}),className:"input-stylus",placeholder:"Ex: ROR, DTCoq, Pneumocoque...",inputMode:"text",autoCapitalize:"words"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date du vaccin"}),(0,sa.jsx)("input",{type:"date",value:S.date_vaccin,onChange:e=>C({...S,date_vaccin:e.target.value}),className:"input-field"})]})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",checked:S.rappel_whatsapp_vaccin,onChange:e=>C({...S,rappel_whatsapp_vaccin:e.target.checked}),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udcf1 Envoyer rappel via WhatsApp"})]})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,sa.jsx)("button",{type:"button",onClick:A,className:"btn-outline",children:"Annuler"}),(0,sa.jsxs)("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(La,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"create"===f.mode?"Sauvegarder":"Modifier"})]})]})]})]})})})})]})},hr=Gn("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),mr=Gn("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),pr=Gn("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),xr=Gn("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),fr=Gn("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),gr=Gn("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),br=Gn("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);function yr(e){return e+.5|0}const vr=(e,t,s)=>Math.max(Math.min(e,s),t);function jr(e){return vr(yr(2.55*e),0,255)}function Nr(e){return vr(yr(255*e),0,255)}function wr(e){return vr(yr(e/2.55)/100,0,1)}function _r(e){return vr(yr(100*e),0,100)}const kr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Sr=[..."0123456789ABCDEF"],Cr=e=>Sr[15&e],Er=e=>Sr[(240&e)>>4]+Sr[15&e],Mr=e=>(240&e)>>4===(15&e);function Pr(e){var t=(e=>Mr(e.r)&&Mr(e.g)&&Mr(e.b)&&Mr(e.a))(e)?Cr:Er;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Ar=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Dr(e,t,s){const n=t*Math.min(s,1-s),a=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return s-n*Math.max(Math.min(a-3,9-a,1),-1)};return[a(0),a(8),a(4)]}function Tr(e,t,s){const n=function(n){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+e/60)%6;return s-s*t*Math.max(Math.min(a,4-a,1),0)};return[n(5),n(3),n(1)]}function Rr(e,t,s){const n=Dr(e,1,.5);let a;for(t+s>1&&(a=1/(t+s),t*=a,s*=a),a=0;a<3;a++)n[a]*=1-t-s,n[a]+=t;return n}function Or(e){const t=e.r/255,s=e.g/255,n=e.b/255,a=Math.max(t,s,n),r=Math.min(t,s,n),i=(a+r)/2;let l,o,c;return a!==r&&(c=a-r,o=i>.5?c/(2-a-r):c/(a+r),l=function(e,t,s,n,a){return e===a?(t-s)/n+(t<s?6:0):t===a?(s-e)/n+2:(e-t)/n+4}(t,s,n,c,a),l=60*l+.5),[0|l,o||0,i]}function Lr(e,t,s,n){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,s,n)).map(Nr)}function zr(e,t,s){return Lr(Dr,e,t,s)}function Ir(e){return(e%360+360)%360}function Fr(e){const t=Ar.exec(e);let s,n=255;if(!t)return;t[5]!==s&&(n=t[6]?jr(+t[5]):Nr(+t[5]));const a=Ir(+t[2]),r=+t[3]/100,i=+t[4]/100;return s="hwb"===t[1]?function(e,t,s){return Lr(Rr,e,t,s)}(a,r,i):"hsv"===t[1]?function(e,t,s){return Lr(Tr,e,t,s)}(a,r,i):zr(a,r,i),{r:s[0],g:s[1],b:s[2],a:n}}const $r={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Br={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Vr;function Ur(e){Vr||(Vr=function(){const e={},t=Object.keys(Br),s=Object.keys($r);let n,a,r,i,l;for(n=0;n<t.length;n++){for(i=l=t[n],a=0;a<s.length;a++)r=s[a],l=l.replace(r,$r[r]);r=parseInt(Br[i],16),e[l]=[r>>16&255,r>>8&255,255&r]}return e}(),Vr.transparent=[0,0,0,0]);const t=Vr[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const Hr=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Wr=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,qr=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Yr(e,t,s){if(e){let n=Or(e);n[t]=Math.max(0,Math.min(n[t]+n[t]*s,0===t?360:1)),n=zr(n),e.r=n[0],e.g=n[1],e.b=n[2]}}function Qr(e,t){return e?Object.assign(t||{},e):e}function Kr(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Nr(e[3]))):(t=Qr(e,{r:0,g:0,b:0,a:1})).a=Nr(t.a),t}function Gr(e){return"r"===e.charAt(0)?function(e){const t=Hr.exec(e);let s,n,a,r=255;if(t){if(t[7]!==s){const e=+t[7];r=t[8]?jr(e):vr(255*e,0,255)}return s=+t[1],n=+t[3],a=+t[5],s=255&(t[2]?jr(s):vr(s,0,255)),n=255&(t[4]?jr(n):vr(n,0,255)),a=255&(t[6]?jr(a):vr(a,0,255)),{r:s,g:n,b:a,a:r}}}(e):Fr(e)}class Xr{constructor(e){if(e instanceof Xr)return e;const t=typeof e;let s;"object"===t?s=Kr(e):"string"===t&&(s=function(e){var t,s=e.length;return"#"===e[0]&&(4===s||5===s?t={r:255&17*kr[e[1]],g:255&17*kr[e[2]],b:255&17*kr[e[3]],a:5===s?17*kr[e[4]]:255}:7!==s&&9!==s||(t={r:kr[e[1]]<<4|kr[e[2]],g:kr[e[3]]<<4|kr[e[4]],b:kr[e[5]]<<4|kr[e[6]],a:9===s?kr[e[7]]<<4|kr[e[8]]:255})),t}(e)||Ur(e)||Gr(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Qr(this._rgb);return e&&(e.a=wr(e.a)),e}set rgb(e){this._rgb=Kr(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?`rgba(${e.r}, ${e.g}, ${e.b}, ${wr(e.a)})`:`rgb(${e.r}, ${e.g}, ${e.b})`):void 0;var e}hexString(){return this._valid?Pr(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Or(e),s=t[0],n=_r(t[1]),a=_r(t[2]);return e.a<255?`hsla(${s}, ${n}%, ${a}%, ${wr(e.a)})`:`hsl(${s}, ${n}%, ${a}%)`}(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,n=e.rgb;let a;const r=t===a?.5:t,i=2*r-1,l=s.a-n.a,o=((i*l===-1?i:(i+l)/(1+i*l))+1)/2;a=1-o,s.r=255&o*s.r+a*n.r+.5,s.g=255&o*s.g+a*n.g+.5,s.b=255&o*s.b+a*n.b+.5,s.a=r*s.a+(1-r)*n.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,s){const n=qr(wr(e.r)),a=qr(wr(e.g)),r=qr(wr(e.b));return{r:Nr(Wr(n+s*(qr(wr(t.r))-n))),g:Nr(Wr(a+s*(qr(wr(t.g))-a))),b:Nr(Wr(r+s*(qr(wr(t.b))-r))),a:e.a+s*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Xr(this.rgb)}alpha(e){return this._rgb.a=Nr(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=yr(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Yr(this._rgb,2,e),this}darken(e){return Yr(this._rgb,2,-e),this}saturate(e){return Yr(this._rgb,1,e),this}desaturate(e){return Yr(this._rgb,1,-e),this}rotate(e){return function(e,t){var s=Or(e);s[0]=Ir(s[0]+t),s=zr(s),e.r=s[0],e.g=s[1],e.b=s[2]}(this._rgb,e),this}}function Jr(){}const Zr=(()=>{let e=0;return()=>e++})();function ei(e){return null===e||void 0===e}function ti(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function si(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ni(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function ai(e,t){return ni(e)?e:t}function ri(e,t){return"undefined"===typeof e?t:e}const ii=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function li(e,t,s){if(e&&"function"===typeof e.call)return e.apply(s,t)}function oi(e,t,s,n){let a,r,i;if(ti(e))if(r=e.length,n)for(a=r-1;a>=0;a--)t.call(s,e[a],a);else for(a=0;a<r;a++)t.call(s,e[a],a);else if(si(e))for(i=Object.keys(e),r=i.length,a=0;a<r;a++)t.call(s,e[i[a]],i[a])}function ci(e,t){let s,n,a,r;if(!e||!t||e.length!==t.length)return!1;for(s=0,n=e.length;s<n;++s)if(a=e[s],r=t[s],a.datasetIndex!==r.datasetIndex||a.index!==r.index)return!1;return!0}function di(e){if(ti(e))return e.map(di);if(si(e)){const t=Object.create(null),s=Object.keys(e),n=s.length;let a=0;for(;a<n;++a)t[s[a]]=di(e[s[a]]);return t}return e}function ui(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function hi(e,t,s,n){if(!ui(e))return;const a=t[e],r=s[e];si(a)&&si(r)?mi(a,r,n):t[e]=di(r)}function mi(e,t,s){const n=ti(t)?t:[t],a=n.length;if(!si(e))return e;const r=(s=s||{}).merger||hi;let i;for(let l=0;l<a;++l){if(i=n[l],!si(i))continue;const t=Object.keys(i);for(let n=0,a=t.length;n<a;++n)r(t[n],e,i,s)}return e}function pi(e,t){return mi(e,t,{merger:xi})}function xi(e,t,s){if(!ui(e))return;const n=t[e],a=s[e];si(n)&&si(a)?pi(n,a):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=di(a))}const fi={"":e=>e,x:e=>e.x,y:e=>e.y};function gi(e,t){const s=fi[t]||(fi[t]=function(e){const t=function(e){const t=e.split("."),s=[];let n="";for(const a of t)n+=a,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}(e);return e=>{for(const s of t){if(""===s)break;e=e&&e[s]}return e}}(t));return s(e)}function bi(e){return e.charAt(0).toUpperCase()+e.slice(1)}const yi=e=>"undefined"!==typeof e,vi=e=>"function"===typeof e,ji=(e,t)=>{if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0};const Ni=Math.PI,wi=2*Ni,_i=wi+Ni,ki=Number.POSITIVE_INFINITY,Si=Ni/180,Ci=Ni/2,Ei=Ni/4,Mi=2*Ni/3,Pi=Math.log10,Ai=Math.sign;function Di(e,t,s){return Math.abs(e-t)<s}function Ti(e){const t=Math.round(e);e=Di(e,t,e/1e3)?t:e;const s=Math.pow(10,Math.floor(Pi(e))),n=e/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function Ri(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Oi(e,t,s){let n,a,r;for(n=0,a=e.length;n<a;n++)r=e[n][s],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function Li(e){return e*(Ni/180)}function zi(e){return e*(180/Ni)}function Ii(e){if(!ni(e))return;let t=1,s=0;for(;Math.round(e*t)/t!==e;)t*=10,s++;return s}function Fi(e,t){const s=t.x-e.x,n=t.y-e.y,a=Math.sqrt(s*s+n*n);let r=Math.atan2(n,s);return r<-.5*Ni&&(r+=wi),{angle:r,distance:a}}function $i(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Bi(e,t){return(e-t+_i)%wi-Ni}function Vi(e){return(e%wi+wi)%wi}function Ui(e,t,s,n){const a=Vi(e),r=Vi(t),i=Vi(s),l=Vi(r-a),o=Vi(i-a),c=Vi(a-r),d=Vi(a-i);return a===r||a===i||n&&r===i||l>o&&c<d}function Hi(e,t,s){return Math.max(t,Math.min(s,e))}function Wi(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,s)-n&&e<=Math.max(t,s)+n}function qi(e,t,s){s=s||(s=>e[s]<t);let n,a=e.length-1,r=0;for(;a-r>1;)n=r+a>>1,s(n)?r=n:a=n;return{lo:r,hi:a}}const Yi=(e,t,s,n)=>qi(e,s,n?n=>{const a=e[n][t];return a<s||a===s&&e[n+1][t]===s}:n=>e[n][t]<s),Qi=(e,t,s)=>qi(e,s,n=>e[n][t]>=s);const Ki=["push","pop","shift","splice","unshift"];function Gi(e,t){const s=e._chartjs;if(!s)return;const n=s.listeners,a=n.indexOf(t);-1!==a&&n.splice(a,1),n.length>0||(Ki.forEach(t=>{delete e[t]}),delete e._chartjs)}function Xi(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Ji="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Zi(e,t){let s=[],n=!1;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];s=r,n||(n=!0,Ji.call(window,()=>{n=!1,e.apply(t,s)}))}}const el=e=>"start"===e?"left":"end"===e?"right":"center",tl=(e,t,s)=>"start"===e?t:"end"===e?s:(t+s)/2;function sl(e,t,s){const n=t.length;let a=0,r=n;if(e._sorted){const{iScale:i,vScale:l,_parsed:o}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:m,maxDefined:p}=i.getUserBounds();if(m){if(a=Math.min(Yi(o,d,u).lo,s?n:Yi(t,d,i.getPixelForValue(u)).lo),c){const e=o.slice(0,a+1).reverse().findIndex(e=>!ei(e[l.axis]));a-=Math.max(0,e)}a=Hi(a,0,n-1)}if(p){let e=Math.max(Yi(o,i.axis,h,!0).hi+1,s?0:Yi(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=o.slice(e-1).findIndex(e=>!ei(e[l.axis]));e+=Math.max(0,t)}r=Hi(e,a,n)-a}else r=n-a}return{start:a,count:r}}function nl(e){const{xScale:t,yScale:s,_scaleRanges:n}=e,a={xmin:t.min,xmax:t.max,ymin:s.min,ymax:s.max};if(!n)return e._scaleRanges=a,!0;const r=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,a),r}const al=e=>0===e||1===e,rl=(e,t,s)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*wi/s),il=(e,t,s)=>Math.pow(2,-10*e)*Math.sin((e-t)*wi/s)+1,ll={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Ci),easeOutSine:e=>Math.sin(e*Ci),easeInOutSine:e=>-.5*(Math.cos(Ni*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>al(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>al(e)?e:rl(e,.075,.3),easeOutElastic:e=>al(e)?e:il(e,.075,.3),easeInOutElastic(e){const t=.1125;return al(e)?e:e<.5?.5*rl(2*e,t,.45):.5+.5*il(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-ll.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,s=2.75;return e<1/s?t*e*e:e<2/s?t*(e-=1.5/s)*e+.75:e<2.5/s?t*(e-=2.25/s)*e+.9375:t*(e-=2.625/s)*e+.984375},easeInOutBounce:e=>e<.5?.5*ll.easeInBounce(2*e):.5*ll.easeOutBounce(2*e-1)+.5};function ol(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function cl(e){return ol(e)?e:new Xr(e)}function dl(e){return ol(e)?e:new Xr(e).saturate(.5).darken(.1).hexString()}const ul=["x","y","borderWidth","radius","tension"],hl=["color","borderColor","backgroundColor"];const ml=new Map;function pl(e,t,s){return function(e,t){t=t||{};const s=e+JSON.stringify(t);let n=ml.get(s);return n||(n=new Intl.NumberFormat(e,t),ml.set(s,n)),n}(t,s).format(e)}const xl={values:e=>ti(e)?e:""+e,numeric(e,t,s){if(0===e)return"0";const n=this.chart.options.locale;let a,r=e;if(s.length>1){const t=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(t<1e-4||t>1e15)&&(a="scientific"),r=function(e,t){let s=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(s)>=1&&e!==Math.floor(e)&&(s=e-Math.floor(e));return s}(e,s)}const i=Pi(Math.abs(r)),l=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),o={notation:a,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(o,this.options.ticks.format),pl(e,n,o)},logarithmic(e,t,s){if(0===e)return"0";const n=s[t].significand||e/Math.pow(10,Math.floor(Pi(e)));return[1,2,3,5,10,15].includes(n)||t>.8*s.length?xl.numeric.call(this,e,t,s):""}};var fl={formatters:xl};const gl=Object.create(null),bl=Object.create(null);function yl(e,t){if(!t)return e;const s=t.split(".");for(let n=0,a=s.length;n<a;++n){const t=s[n];e=e[t]||(e[t]=Object.create(null))}return e}function vl(e,t,s){return"string"===typeof t?mi(yl(e,t),s):mi(yl(e,""),t)}class jl{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>dl(t.backgroundColor),this.hoverBorderColor=(e,t)=>dl(t.borderColor),this.hoverColor=(e,t)=>dl(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vl(this,e,t)}get(e){return yl(this,e)}describe(e,t){return vl(bl,e,t)}override(e,t){return vl(gl,e,t)}route(e,t,s,n){const a=yl(this,e),r=yl(this,s),i="_"+t;Object.defineProperties(a,{[i]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=r[n];return si(e)?Object.assign({},t,e):ri(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach(e=>e(this))}}var Nl=new jl({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:hl},numbers:{type:"number",properties:ul}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function wl(e,t,s,n,a){let r=t[a];return r||(r=t[a]=e.measureText(a).width,s.push(a)),r>n&&(n=r),n}function _l(e,t,s){const n=e.currentDevicePixelRatio,a=0!==s?Math.max(s/2,.5):0;return Math.round((t-a)*n)/n+a}function kl(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Sl(e,t,s,n){Cl(e,t,s,n,null)}function Cl(e,t,s,n,a){let r,i,l,o,c,d,u,h;const m=t.pointStyle,p=t.rotation,x=t.radius;let f=(p||0)*Si;if(m&&"object"===typeof m&&(r=m.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(s,n),e.rotate(f),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(x)||x<=0)){switch(e.beginPath(),m){default:a?e.ellipse(s,n,a/2,x,0,0,wi):e.arc(s,n,x,0,wi),e.closePath();break;case"triangle":d=a?a/2:x,e.moveTo(s+Math.sin(f)*d,n-Math.cos(f)*x),f+=Mi,e.lineTo(s+Math.sin(f)*d,n-Math.cos(f)*x),f+=Mi,e.lineTo(s+Math.sin(f)*d,n-Math.cos(f)*x),e.closePath();break;case"rectRounded":c=.516*x,o=x-c,i=Math.cos(f+Ei)*o,u=Math.cos(f+Ei)*(a?a/2-c:o),l=Math.sin(f+Ei)*o,h=Math.sin(f+Ei)*(a?a/2-c:o),e.arc(s-u,n-l,c,f-Ni,f-Ci),e.arc(s+h,n-i,c,f-Ci,f),e.arc(s+u,n+l,c,f,f+Ci),e.arc(s-h,n+i,c,f+Ci,f+Ni),e.closePath();break;case"rect":if(!p){o=Math.SQRT1_2*x,d=a?a/2:o,e.rect(s-d,n-o,2*d,2*o);break}f+=Ei;case"rectRot":u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,n-l),e.lineTo(s+h,n-i),e.lineTo(s+u,n+l),e.lineTo(s-h,n+i),e.closePath();break;case"crossRot":f+=Ei;case"cross":u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,n-l),e.lineTo(s+u,n+l),e.moveTo(s+h,n-i),e.lineTo(s-h,n+i);break;case"star":u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,n-l),e.lineTo(s+u,n+l),e.moveTo(s+h,n-i),e.lineTo(s-h,n+i),f+=Ei,u=Math.cos(f)*(a?a/2:x),i=Math.cos(f)*x,l=Math.sin(f)*x,h=Math.sin(f)*(a?a/2:x),e.moveTo(s-u,n-l),e.lineTo(s+u,n+l),e.moveTo(s+h,n-i),e.lineTo(s-h,n+i);break;case"line":i=a?a/2:Math.cos(f)*x,l=Math.sin(f)*x,e.moveTo(s-i,n-l),e.lineTo(s+i,n+l);break;case"dash":e.moveTo(s,n),e.lineTo(s+Math.cos(f)*(a?a/2:x),n+Math.sin(f)*x);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function El(e,t,s){return s=s||.5,!t||e&&e.x>t.left-s&&e.x<t.right+s&&e.y>t.top-s&&e.y<t.bottom+s}function Ml(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Pl(e){e.restore()}function Al(e,t,s,n,a){if(!t)return e.lineTo(s.x,s.y);if("middle"===a){const n=(t.x+s.x)/2;e.lineTo(n,t.y),e.lineTo(n,s.y)}else"after"===a!==!!n?e.lineTo(t.x,s.y):e.lineTo(s.x,t.y);e.lineTo(s.x,s.y)}function Dl(e,t,s,n){if(!t)return e.lineTo(s.x,s.y);e.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function Tl(e,t,s,n,a){if(a.strikethrough||a.underline){const r=e.measureText(n),i=t-r.actualBoundingBoxLeft,l=t+r.actualBoundingBoxRight,o=s-r.actualBoundingBoxAscent,c=s+r.actualBoundingBoxDescent,d=a.strikethrough?(o+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=a.decorationWidth||2,e.moveTo(i,d),e.lineTo(l,d),e.stroke()}}function Rl(e,t){const s=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=s}function Ol(e,t,s,n,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=ti(t)?t:[t],l=r.strokeWidth>0&&""!==r.strokeColor;let o,c;for(e.save(),e.font=a.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ei(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,r),o=0;o<i.length;++o)c=i[o],r.backdrop&&Rl(e,r.backdrop),l&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),ei(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,s,n,r.maxWidth)),e.fillText(c,s,n,r.maxWidth),Tl(e,s,n,c,r),n+=Number(a.lineHeight);e.restore()}function Ll(e,t){const{x:s,y:n,w:a,h:r,radius:i}=t;e.arc(s+i.topLeft,n+i.topLeft,i.topLeft,1.5*Ni,Ni,!0),e.lineTo(s,n+r-i.bottomLeft),e.arc(s+i.bottomLeft,n+r-i.bottomLeft,i.bottomLeft,Ni,Ci,!0),e.lineTo(s+a-i.bottomRight,n+r),e.arc(s+a-i.bottomRight,n+r-i.bottomRight,i.bottomRight,Ci,0,!0),e.lineTo(s+a,n+i.topRight),e.arc(s+a-i.topRight,n+i.topRight,i.topRight,0,-Ci,!0),e.lineTo(s+i.topLeft,n)}const zl=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Il=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fl(e,t){const s=(""+e).match(zl);if(!s||"normal"===s[1])return 1.2*t;switch(e=+s[2],s[3]){case"px":return e;case"%":e/=100}return t*e}const $l=e=>+e||0;function Bl(e,t){const s={},n=si(t),a=n?Object.keys(t):t,r=si(e)?n?s=>ri(e[s],e[t[s]]):t=>e[t]:()=>e;for(const i of a)s[i]=$l(r(i));return s}function Vl(e){return Bl(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Ul(e){return Bl(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Hl(e){const t=Vl(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Wl(e,t){e=e||{},t=t||Nl.font;let s=ri(e.size,t.size);"string"===typeof s&&(s=parseInt(s,10));let n=ri(e.style,t.style);n&&!(""+n).match(Il)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const a={family:ri(e.family,t.family),lineHeight:Fl(ri(e.lineHeight,t.lineHeight),s),size:s,style:n,weight:ri(e.weight,t.weight),string:""};return a.string=function(e){return!e||ei(e.size)||ei(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(a),a}function ql(e,t,s,n){let a,r,i,l=!0;for(a=0,r=e.length;a<r;++a)if(i=e[a],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),l=!1),void 0!==s&&ti(i)&&(i=i[s%i.length],l=!1),void 0!==i))return n&&!l&&(n.cacheable=!1),i}function Yl(e,t){return Object.assign(Object.create(e),t)}function Ql(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],s=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const a=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof s&&(s=ro("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:a,_fallback:s,_getTarget:n,override:n=>Ql([n,...e],t,a,s)};return new Proxy(r,{deleteProperty:(t,s)=>(delete t[s],delete t._keys,delete e[0][s],!0),get:(s,n)=>Zl(s,n,()=>function(e,t,s,n){let a;for(const r of t)if(a=ro(Xl(r,e),s),"undefined"!==typeof a)return Jl(e,a)?no(s,n,e,a):a}(n,t,e,s)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>io(e).includes(t),ownKeys:e=>io(e),set(e,t,s){const a=e._storage||(e._storage=n());return e[t]=a[t]=s,delete e._keys,!0}})}function Kl(e,t,s,n){const a={_cacheable:!1,_proxy:e,_context:t,_subProxy:s,_stack:new Set,_descriptors:Gl(e,n),setContext:t=>Kl(e,t,s,n),override:a=>Kl(e.override(a),t,s,n)};return new Proxy(a,{deleteProperty:(t,s)=>(delete t[s],delete e[s],!0),get:(e,t,s)=>Zl(e,t,()=>function(e,t,s){const{_proxy:n,_context:a,_subProxy:r,_descriptors:i}=e;let l=n[t];vi(l)&&i.isScriptable(t)&&(l=function(e,t,s,n){const{_proxy:a,_context:r,_subProxy:i,_stack:l}=s;if(l.has(e))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+e);l.add(e);let o=t(r,i||n);l.delete(e),Jl(e,o)&&(o=no(a._scopes,a,e,o));return o}(t,l,e,s));ti(l)&&l.length&&(l=function(e,t,s,n){const{_proxy:a,_context:r,_subProxy:i,_descriptors:l}=s;if("undefined"!==typeof r.index&&n(e))return t[r.index%t.length];if(si(t[0])){const s=t,n=a._scopes.filter(e=>e!==s);t=[];for(const o of s){const s=no(n,a,e,o);t.push(Kl(s,r,i&&i[e],l))}}return t}(t,l,e,i.isIndexable));Jl(t,l)&&(l=Kl(l,a,r&&r[t],i));return l}(e,t,s)),getOwnPropertyDescriptor:(t,s)=>t._descriptors.allKeys?Reflect.has(e,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,s),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,s)=>Reflect.has(e,s),ownKeys:()=>Reflect.ownKeys(e),set:(t,s,n)=>(e[s]=n,delete t[s],!0)})}function Gl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:s=t.scriptable,_indexable:n=t.indexable,_allKeys:a=t.allKeys}=e;return{allKeys:a,scriptable:s,indexable:n,isScriptable:vi(s)?s:()=>s,isIndexable:vi(n)?n:()=>n}}const Xl=(e,t)=>e?e+bi(t):t,Jl=(e,t)=>si(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Zl(e,t,s){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const n=s();return e[t]=n,n}function eo(e,t,s){return vi(e)?e(t,s):e}const to=(e,t)=>!0===e?t:"string"===typeof e?gi(t,e):void 0;function so(e,t,s,n,a){for(const r of t){const t=to(s,r);if(t){e.add(t);const r=eo(t._fallback,s,a);if("undefined"!==typeof r&&r!==s&&r!==n)return r}else if(!1===t&&"undefined"!==typeof n&&s!==n)return null}return!1}function no(e,t,s,n){const a=t._rootScopes,r=eo(t._fallback,s,n),i=[...e,...a],l=new Set;l.add(n);let o=ao(l,i,s,r||s,n);return null!==o&&(("undefined"===typeof r||r===s||(o=ao(l,i,r,o,n),null!==o))&&Ql(Array.from(l),[""],a,r,()=>function(e,t,s){const n=e._getTarget();t in n||(n[t]={});const a=n[t];if(ti(a)&&si(s))return s;return a||{}}(t,s,n)))}function ao(e,t,s,n,a){for(;s;)s=so(e,t,s,n,a);return s}function ro(e,t){for(const s of t){if(!s)continue;const t=s[e];if("undefined"!==typeof t)return t}}function io(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const s of e)for(const e of Object.keys(s).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}const lo=Number.EPSILON||1e-14,oo=(e,t)=>t<e.length&&!e[t].skip&&e[t],co=e=>"x"===e?"y":"x";function uo(e,t,s,n){const a=e.skip?t:e,r=t,i=s.skip?t:s,l=$i(r,a),o=$i(i,r);let c=l/(l+o),d=o/(l+o);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=n*c,h=n*d;return{previous:{x:r.x-u*(i.x-a.x),y:r.y-u*(i.y-a.y)},next:{x:r.x+h*(i.x-a.x),y:r.y+h*(i.y-a.y)}}}function ho(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const s=co(t),n=e.length,a=Array(n).fill(0),r=Array(n);let i,l,o,c=oo(e,0);for(i=0;i<n;++i)if(l=o,o=c,c=oo(e,i+1),o){if(c){const e=c[t]-o[t];a[i]=0!==e?(c[s]-o[s])/e:0}r[i]=l?c?Ai(a[i-1])!==Ai(a[i])?0:(a[i-1]+a[i])/2:a[i-1]:a[i]}!function(e,t,s){const n=e.length;let a,r,i,l,o,c=oo(e,0);for(let d=0;d<n-1;++d)o=c,c=oo(e,d+1),o&&c&&(Di(t[d],0,lo)?s[d]=s[d+1]=0:(a=s[d]/t[d],r=s[d+1]/t[d],l=Math.pow(a,2)+Math.pow(r,2),l<=9||(i=3/Math.sqrt(l),s[d]=a*i*t[d],s[d+1]=r*i*t[d])))}(e,a,r),function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const n=co(s),a=e.length;let r,i,l,o=oo(e,0);for(let c=0;c<a;++c){if(i=l,l=o,o=oo(e,c+1),!l)continue;const a=l[s],d=l[n];i&&(r=(a-i[s])/3,l[`cp1${s}`]=a-r,l[`cp1${n}`]=d-r*t[c]),o&&(r=(o[s]-a)/3,l[`cp2${s}`]=a+r,l[`cp2${n}`]=d+r*t[c])}}(e,r,t)}function mo(e,t,s){return Math.max(Math.min(e,s),t)}function po(e,t,s,n,a){let r,i,l,o;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)ho(e,a);else{let s=n?e[e.length-1]:e[0];for(r=0,i=e.length;r<i;++r)l=e[r],o=uo(s,l,e[Math.min(r+1,i-(n?0:1))%i],t.tension),l.cp1x=o.previous.x,l.cp1y=o.previous.y,l.cp2x=o.next.x,l.cp2y=o.next.y,s=l}t.capBezierPoints&&function(e,t){let s,n,a,r,i,l=El(e[0],t);for(s=0,n=e.length;s<n;++s)i=r,r=l,l=s<n-1&&El(e[s+1],t),r&&(a=e[s],i&&(a.cp1x=mo(a.cp1x,t.left,t.right),a.cp1y=mo(a.cp1y,t.top,t.bottom)),l&&(a.cp2x=mo(a.cp2x,t.left,t.right),a.cp2y=mo(a.cp2y,t.top,t.bottom)))}(e,s)}function xo(){return"undefined"!==typeof window&&"undefined"!==typeof document}function fo(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function go(e,t,s){let n;return"string"===typeof e?(n=parseInt(e,10),-1!==e.indexOf("%")&&(n=n/100*t.parentNode[s])):n=e,n}const bo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const yo=["top","right","bottom","left"];function vo(e,t,s){const n={};s=s?"-"+s:"";for(let a=0;a<4;a++){const r=yo[a];n[r]=parseFloat(e[t+"-"+r+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function jo(e,t){if("native"in e)return e;const{canvas:s,currentDevicePixelRatio:n}=t,a=bo(s),r="border-box"===a.boxSizing,i=vo(a,"padding"),l=vo(a,"border","width"),{x:o,y:c,box:d}=function(e,t){const s=e.touches,n=s&&s.length?s[0]:e,{offsetX:a,offsetY:r}=n;let i,l,o=!1;if(((e,t,s)=>(e>0||t>0)&&(!s||!s.shadowRoot))(a,r,e.target))i=a,l=r;else{const e=t.getBoundingClientRect();i=n.clientX-e.left,l=n.clientY-e.top,o=!0}return{x:i,y:l,box:o}}(e,s),u=i.left+(d&&l.left),h=i.top+(d&&l.top);let{width:m,height:p}=t;return r&&(m-=i.width+l.width,p-=i.height+l.height),{x:Math.round((o-u)/m*s.width/n),y:Math.round((c-h)/p*s.height/n)}}const No=e=>Math.round(10*e)/10;function wo(e,t,s,n){const a=bo(e),r=vo(a,"margin"),i=go(a.maxWidth,e,"clientWidth")||ki,l=go(a.maxHeight,e,"clientHeight")||ki,o=function(e,t,s){let n,a;if(void 0===t||void 0===s){const r=e&&fo(e);if(r){const e=r.getBoundingClientRect(),i=bo(r),l=vo(i,"border","width"),o=vo(i,"padding");t=e.width-o.width-l.width,s=e.height-o.height-l.height,n=go(i.maxWidth,r,"clientWidth"),a=go(i.maxHeight,r,"clientHeight")}else t=e.clientWidth,s=e.clientHeight}return{width:t,height:s,maxWidth:n||ki,maxHeight:a||ki}}(e,t,s);let{width:c,height:d}=o;if("content-box"===a.boxSizing){const e=vo(a,"border","width"),t=vo(a,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-r.width),d=Math.max(0,n?c/n:d-r.height),c=No(Math.min(c,i,o.maxWidth)),d=No(Math.min(d,l,o.maxHeight)),c&&!d&&(d=No(c/2));return(void 0!==t||void 0!==s)&&n&&o.height&&d>o.height&&(d=o.height,c=No(Math.floor(d*n))),{width:c,height:d}}function _o(e,t,s){const n=t||1,a=Math.floor(e.height*n),r=Math.floor(e.width*n);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(s||!i.style.height&&!i.style.width)&&(i.style.height=`${e.height}px`,i.style.width=`${e.width}px`),(e.currentDevicePixelRatio!==n||i.height!==a||i.width!==r)&&(e.currentDevicePixelRatio=n,i.height=a,i.width=r,e.ctx.setTransform(n,0,0,n,0,0),!0)}const ko=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};xo()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Te){}return e}();function So(e,t){const s=function(e,t){return bo(e).getPropertyValue(t)}(e,t),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Co(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:e.y+s*(t.y-e.y)}}function Eo(e,t,s,n){return{x:e.x+s*(t.x-e.x),y:"middle"===n?s<.5?e.y:t.y:"after"===n?s<1?e.y:t.y:s>0?t.y:e.y}}function Mo(e,t,s,n){const a={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},i=Co(e,a,s),l=Co(a,r,s),o=Co(r,t,s),c=Co(i,l,s),d=Co(l,o,s);return Co(c,d,s)}function Po(e,t,s){return e?function(e,t){return{x:s=>e+e+t-s,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,s):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Ao(e,t){let s,n;"ltr"!==t&&"rtl"!==t||(s=e.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",t,"important"),e.prevTextDirection=n)}function Do(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function To(e){return"angle"===e?{between:Ui,compare:Bi,normalize:Vi}:{between:Wi,compare:(e,t)=>e-t,normalize:e=>e}}function Ro(e){let{start:t,end:s,count:n,loop:a,style:r}=e;return{start:t%n,end:s%n,loop:a&&(s-t+1)%n===0,style:r}}function Oo(e,t,s){if(!s)return[e];const{property:n,start:a,end:r}=s,i=t.length,{compare:l,between:o,normalize:c}=To(n),{start:d,end:u,loop:h,style:m}=function(e,t,s){const{property:n,start:a,end:r}=s,{between:i,normalize:l}=To(n),o=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=o,h+=o,c=0,d=o;c<d&&i(l(t[u%o][n]),a,r);++c)u--,h--;u%=o,h%=o}return h<u&&(h+=o),{start:u,end:h,loop:m,style:e.style}}(e,t,s),p=[];let x,f,g,b=!1,y=null;const v=()=>b||o(a,g,x)&&0!==l(a,g),j=()=>!b||0===l(r,x)||o(r,g,x);for(let N=d,w=d;N<=u;++N)f=t[N%i],f.skip||(x=c(f[n]),x!==g&&(b=o(x,a,r),null===y&&v()&&(y=0===l(x,a)?N:w),null!==y&&j()&&(p.push(Ro({start:y,end:N,loop:h,count:i,style:m})),y=null),w=N,g=x));return null!==y&&p.push(Ro({start:y,end:u,loop:h,count:i,style:m})),p}function Lo(e,t){const s=[],n=e.segments;for(let a=0;a<n.length;a++){const r=Oo(n[a],e.points,t);r.length&&s.push(...r)}return s}function zo(e,t,s,n){return n&&n.setContext&&s?function(e,t,s,n){const a=e._chart.getContext(),r=Io(e.options),{_datasetIndex:i,options:{spanGaps:l}}=e,o=s.length,c=[];let d=r,u=t[0].start,h=u;function m(e,t,n,a){const r=l?-1:1;if(e!==t){for(e+=o;s[e%o].skip;)e-=r;for(;s[t%o].skip;)t+=r;e%o!==t%o&&(c.push({start:e%o,end:t%o,loop:n,style:a}),d=a,u=t%o)}}for(const p of t){u=l?u:p.start;let e,t=s[u%o];for(h=u+1;h<=p.end;h++){const r=s[h%o];e=Io(n.setContext(Yl(a,{type:"segment",p0:t,p1:r,p0DataIndex:(h-1)%o,p1DataIndex:h%o,datasetIndex:i}))),Fo(e,d)&&m(u,h-1,p.loop,d),t=r,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,s,n):t}function Io(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Fo(e,t){if(!t)return!1;const s=[],n=function(e,t){return ol(t)?(s.includes(t)||s.push(t),s.indexOf(t)):t};return JSON.stringify(e,n)!==JSON.stringify(t,n)}function $o(e,t,s){return e.options.clip?e[s]:t[s]}function Bo(e,t){const s=t._clip;if(s.disabled)return!1;const n=function(e,t){const{xScale:s,yScale:n}=e;return s&&n?{left:$o(s,t,"left"),right:$o(s,t,"right"),top:$o(n,t,"top"),bottom:$o(n,t,"bottom")}:t}(t,e.chartArea);return{left:!1===s.left?0:n.left-(!0===s.left?0:s.left),right:!1===s.right?e.width:n.right+(!0===s.right?0:s.right),top:!1===s.top?0:n.top-(!0===s.top?0:s.top),bottom:!1===s.bottom?e.height:n.bottom+(!0===s.bottom?0:s.bottom)}}class Vo{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,n){const a=t.listeners[n],r=t.duration;a.forEach(n=>n({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(s-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Ji.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const a=s.items;let r,i=a.length-1,l=!1;for(;i>=0;--i)r=a[i],r._active?(r._total>s.duration&&(s.duration=r._total),r.tick(e),l=!0):(a[i]=a[a.length-1],a.pop());l&&(n.draw(),this._notify(n,s,e,"progress")),a.length||(s.running=!1,this._notify(n,s,e,"complete"),s.initial=!1),t+=a.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Uo=new Vo;const Ho="transparent",Wo={boolean:(e,t,s)=>s>.5?t:e,color(e,t,s){const n=cl(e||Ho),a=n.valid&&cl(t||Ho);return a&&a.valid?a.mix(n,s).hexString():t},number:(e,t,s)=>e+(t-e)*s};class qo{constructor(e,t,s,n){const a=t[s];n=ql([e.to,n,a,e.from]);const r=ql([e.from,a,n]);this._active=!0,this._fn=e.fn||Wo[e.type||typeof r],this._easing=ll[e.easing]||ll.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const n=this._target[this._prop],a=s-this._start,r=this._duration-a;this._start=s,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=ql([e.to,t,n,e.from]),this._from=ql([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,n=this._prop,a=this._from,r=this._loop,i=this._to;let l;if(this._active=a!==i&&(r||t<s),!this._active)return this._target[n]=i,void this._notify(!0);t<0?this._target[n]=a:(l=t/s%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(a,i,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][t]()}}class Yo{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!si(e))return;const t=Object.keys(Nl.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!si(a))return;const r={};for(const e of t)r[e]=a[e];(ti(a.properties)&&a.properties||[n]).forEach(e=>{e!==n&&s.has(e)||s.set(e,r)})})}_animateOptions(e,t){const s=t.options,n=function(e,t){if(!t)return;let s=e.options;if(!s)return void(e.options=t);s.$shared&&(e.options=s=Object.assign({},s,{$shared:!1,$animations:{}}));return s}(e,s);if(!n)return[];const a=this._createAnimations(n,s);return s.$shared&&function(e,t){const s=[],n=Object.keys(t);for(let a=0;a<n.length;a++){const t=e[n[a]];t&&t.active()&&s.push(t.wait())}return Promise.all(s)}(e.options.$animations,s).then(()=>{e.options=s},()=>{}),a}_createAnimations(e,t){const s=this._properties,n=[],a=e.$animations||(e.$animations={}),r=Object.keys(t),i=Date.now();let l;for(l=r.length-1;l>=0;--l){const o=r[l];if("$"===o.charAt(0))continue;if("options"===o){n.push(...this._animateOptions(e,t));continue}const c=t[o];let d=a[o];const u=s.get(o);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(a[o]=d=new qo(u,e,o,c),n.push(d)):e[o]=c}return n}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const s=this._createAnimations(e,t);return s.length?(Uo.add(this._chart,s),!0):void 0}}function Qo(e,t){const s=e&&e.options||{},n=s.reverse,a=void 0===s.min?t:0,r=void 0===s.max?t:0;return{start:n?r:a,end:n?a:r}}function Ko(e,t){const s=[],n=e._getSortedDatasetMetas(t);let a,r;for(a=0,r=n.length;a<r;++a)s.push(n[a].index);return s}function Go(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=e.keys,r="single"===n.mode;let i,l,o,c;if(null===t)return;let d=!1;for(i=0,l=a.length;i<l;++i){if(o=+a[i],o===s){if(d=!0,n.all)continue;break}c=e.values[o],ni(c)&&(r||0===t||Ai(t)===Ai(c))&&(t+=c)}return d||n.all?t:0}function Xo(e,t){const s=e&&e.options.stacked;return s||void 0===s&&void 0!==t.stack}function Jo(e,t,s){const n=e[t]||(e[t]={});return n[s]||(n[s]={})}function Zo(e,t,s,n){for(const a of t.getMatchingVisibleMetas(n).reverse()){const t=e[a.index];if(s&&t>0||!s&&t<0)return a.index}return null}function ec(e,t){const{chart:s,_cachedMeta:n}=e,a=s._stacks||(s._stacks={}),{iScale:r,vScale:i,index:l}=n,o=r.axis,c=i.axis,d=function(e,t,s){return`${e.id}.${t.id}.${s.stack||s.type}`}(r,i,n),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[o]:s,[c]:r}=e;h=(e._stacks||(e._stacks={}))[c]=Jo(a,d,s),h[l]=r,h._top=Zo(h,i,!0,n.type),h._bottom=Zo(h,i,!1,n.type);(h._visualValues||(h._visualValues={}))[l]=r}}function tc(e,t){const s=e.scales;return Object.keys(s).filter(e=>s[e].axis===t).shift()}function sc(e,t){const s=e.controller.index,n=e.vScale&&e.vScale.axis;if(n){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[n]||void 0===t[n][s])return;delete t[n][s],void 0!==t[n]._visualValues&&void 0!==t[n]._visualValues[s]&&delete t[n]._visualValues[s]}}}const nc=e=>"reset"===e||"none"===e,ac=(e,t)=>t?e:Object.assign({},e);class rc{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Xo(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&sc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),n=(e,t,s,n)=>"x"===e?t:"r"===e?n:s,a=t.xAxisID=ri(s.xAxisID,tc(e,"x")),r=t.yAxisID=ri(s.yAxisID,tc(e,"y")),i=t.rAxisID=ri(s.rAxisID,tc(e,"r")),l=t.indexAxis,o=t.iAxisID=n(l,a,r,i),c=t.vAxisID=n(l,r,a,i);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(o),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Gi(this._data,this),e._stacked&&sc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(si(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:s,vScale:n}=t,a="x"===s.axis?"x":"y",r="x"===n.axis?"x":"y",i=Object.keys(e),l=new Array(i.length);let o,c,d;for(o=0,c=i.length;o<c;++o)d=i[o],l[o]={[a]:d,[r]:e[d]};return l}(t,e)}else if(s!==t){if(s){Gi(s,this);const e=this._cachedMeta;sc(e),e._parsed=[]}t&&Object.isExtensible(t)&&(a=this,(n=t)._chartjs?n._chartjs.listeners.push(a):(Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[a]}}),Ki.forEach(e=>{const t="_onData"+bi(e),s=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];const i=s.apply(this,a);return n._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...a)}),i}})}))),this._syncList=[],this._data=t}var n,a}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=Xo(t.vScale,t),t.stack!==s.stack&&(n=!0,sc(t),t.stack=s.stack),this._resyncElements(e),(n||a!==t._stacked)&&(ec(this,t._parsed),t._stacked=Xo(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:n}=this,{iScale:a,_stacked:r}=s,i=a.axis;let l,o,c,d=0===e&&t===n.length||s._sorted,u=e>0&&s._parsed[e-1];if(!1===this._parsing)s._parsed=n,s._sorted=!0,c=n;else{c=ti(n[e])?this.parseArrayData(s,n,e,t):si(n[e])?this.parseObjectData(s,n,e,t):this.parsePrimitiveData(s,n,e,t);const a=()=>null===o[i]||u&&o[i]<u[i];for(l=0;l<t;++l)s._parsed[l+e]=o=c[l],d&&(a()&&(d=!1),u=o);s._sorted=d}r&&ec(this,c)}parsePrimitiveData(e,t,s,n){const{iScale:a,vScale:r}=e,i=a.axis,l=r.axis,o=a.getLabels(),c=a===r,d=new Array(n);let u,h,m;for(u=0,h=n;u<h;++u)m=u+s,d[u]={[i]:c||a.parse(o[m],m),[l]:r.parse(t[m],m)};return d}parseArrayData(e,t,s,n){const{xScale:a,yScale:r}=e,i=new Array(n);let l,o,c,d;for(l=0,o=n;l<o;++l)c=l+s,d=t[c],i[l]={x:a.parse(d[0],c),y:r.parse(d[1],c)};return i}parseObjectData(e,t,s,n){const{xScale:a,yScale:r}=e,{xAxisKey:i="x",yAxisKey:l="y"}=this._parsing,o=new Array(n);let c,d,u,h;for(c=0,d=n;c<d;++c)u=c+s,h=t[u],o[c]={x:a.parse(gi(h,i),u),y:r.parse(gi(h,l),u)};return o}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const n=this.chart,a=this._cachedMeta,r=t[e.axis];return Go({keys:Ko(n,!0),values:t._stacks[e.axis]._visualValues},r,a.index,{mode:s})}updateRangeFromParsed(e,t,s,n){const a=s[t.axis];let r=null===a?NaN:a;const i=n&&s._stacks[t.axis];n&&i&&(n.values=i,r=Go(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const s=this._cachedMeta,n=s._parsed,a=s._sorted&&e===s.iScale,r=n.length,i=this._getOtherScale(e),l=((e,t,s)=>e&&!t.hidden&&t._stacked&&{keys:Ko(s,!0),values:null})(t,s,this.chart),o={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:s,minDefined:n,maxDefined:a}=e.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:a?s:Number.POSITIVE_INFINITY}}(i);let u,h;function m(){h=n[u];const t=h[i.axis];return!ni(h[e.axis])||c>t||d<t}for(u=0;u<r&&(m()||(this.updateRangeFromParsed(o,e,h,l),!a));++u);if(a)for(u=r-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(o,e,h,l);break}return o}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let n,a,r;for(n=0,a=t.length;n<a;++n)r=t[n][e.axis],ni(r)&&s.push(r);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:s?""+s.getLabelForValue(a[s.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,s,n,a;return si(e)?(t=e.top,s=e.right,n=e.bottom,a=e.left):t=s=n=a=e,{top:t,right:s,bottom:n,left:a,disabled:!1===e}}(ri(this.options.clip,function(e,t,s){if(!1===s)return!1;const n=Qo(e,s),a=Qo(t,s);return{top:a.end,right:n.end,bottom:a.start,left:n.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,n=s.data||[],a=t.chartArea,r=[],i=this._drawStart||0,l=this._drawCount||n.length-i,o=this.options.drawActiveElementsOnTop;let c;for(s.dataset&&s.dataset.draw(e,a,i,l),c=i;c<i+l;++c){const t=n[c];t.hidden||(t.active&&o?r.push(t):t.draw(e,a))}for(c=0;c<r.length;++c)r[c].draw(e,a)}getStyle(e,t){const s=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];a=t.$context||(t.$context=function(e,t,s){return Yl(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:s,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=function(e,t){return Yl(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=s,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",s=arguments.length>2?arguments[2]:void 0;const n="active"===t,a=this._cachedDataOpts,r=e+"-"+t,i=a[r],l=this.enableOptionSharing&&yi(s);if(i)return ac(i,l);const o=this.chart.config,c=o.datasetElementScopeKeys(this._type,e),d=n?[`${e}Hover`,"hover",e,""]:[e,""],u=o.getOptionScopes(this.getDataset(),c),h=Object.keys(Nl.elements[e]),m=o.resolveNamedOptions(u,h,()=>this.getContext(s,n,t),d);return m.$shared&&(m.$shared=l,a[r]=Object.freeze(ac(m,l))),m}_resolveAnimations(e,t,s){const n=this.chart,a=this._cachedDataOpts,r=`animation-${t}`,i=a[r];if(i)return i;let l;if(!1!==n.options.animation){const n=this.chart.config,a=n.datasetAnimationScopeKeys(this._type,t),r=n.getOptionScopes(this.getDataset(),a);l=n.createResolver(r,this.getContext(e,s,t))}const o=new Yo(n,l&&l.animations);return l&&l._cacheable&&(a[r]=Object.freeze(o)),o}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||nc(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(s),r=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,s),{sharedOptions:a,includeOptions:r}}updateElement(e,t,s,n){nc(n)?Object.assign(e,s):this._resolveAnimations(t,n).update(e,s)}updateSharedOptions(e,t,s){e&&!nc(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,s,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[i,l,o]of this._syncList)this[i](l,o);this._syncList=[];const n=s.length,a=t.length,r=Math.min(a,n);r&&this.parse(0,r),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this._cachedMeta,a=n.data,r=e+t;let i;const l=e=>{for(e.length+=t,i=e.length-1;i>=r;i--)e[i]=e[i-t]};for(l(a),i=e;i<r;++i)a[i]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(e,t),s&&this.updateElements(a,e,t,"reset")}updateElements(e,t,s,n){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(e,t);s._stacked&&sc(s,n)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,n]=e;this[t](s,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function ic(e){const t=e.iScale,s=function(e,t){if(!e._cache.$bar){const s=e.getMatchingVisibleMetas(t);let n=[];for(let t=0,a=s.length;t<a;t++)n=n.concat(s[t].controller.getAllParsedValues(e));e._cache.$bar=Xi(n.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let n,a,r,i,l=t._length;const o=()=>{32767!==r&&-32768!==r&&(yi(i)&&(l=Math.min(l,Math.abs(r-i)||l)),i=r)};for(n=0,a=s.length;n<a;++n)r=t.getPixelForValue(s[n]),o();for(i=void 0,n=0,a=t.ticks.length;n<a;++n)r=t.getPixelForTick(n),o();return l}function lc(e,t,s,n){return ti(e)?function(e,t,s,n){const a=s.parse(e[0],n),r=s.parse(e[1],n),i=Math.min(a,r),l=Math.max(a,r);let o=i,c=l;Math.abs(i)>Math.abs(l)&&(o=l,c=i),t[s.axis]=c,t._custom={barStart:o,barEnd:c,start:a,end:r,min:i,max:l}}(e,t,s,n):t[s.axis]=s.parse(e,n),t}function oc(e,t,s,n){const a=e.iScale,r=e.vScale,i=a.getLabels(),l=a===r,o=[];let c,d,u,h;for(c=s,d=s+n;c<d;++c)h=t[c],u={},u[a.axis]=l||a.parse(i[c],c),o.push(lc(h,u,r,c));return o}function cc(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function dc(e,t,s,n){let a=t.borderSkipped;const r={};if(!a)return void(e.borderSkipped=r);if(!0===a)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:l,reverse:o,top:c,bottom:d}=function(e){let t,s,n,a,r;return e.horizontal?(t=e.base>e.x,s="left",n="right"):(t=e.base<e.y,s="bottom",n="top"),t?(a="end",r="start"):(a="start",r="end"),{start:s,end:n,reverse:t,top:a,bottom:r}}(e);"middle"===a&&s&&(e.enableBorderRadius=!0,(s._top||0)===n?a=c:(s._bottom||0)===n?a=d:(r[uc(d,i,l,o)]=!0,a=c)),r[uc(a,i,l,o)]=!0,e.borderSkipped=r}function uc(e,t,s,n){var a,r,i;return n?(i=s,e=hc(e=(a=e)===(r=t)?i:a===i?r:a,s,t)):e=hc(e,t,s),e}function hc(e,t,s){return"start"===e?t:"end"===e?s:e}function mc(e,t,s){let{inflateAmount:n}=t;e.inflateAmount="auto"===n?1===s?.33:0:n}class pc extends rc{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,s,n){return oc(e,t,s,n)}parseArrayData(e,t,s,n){return oc(e,t,s,n)}parseObjectData(e,t,s,n){const{iScale:a,vScale:r}=e,{xAxisKey:i="x",yAxisKey:l="y"}=this._parsing,o="x"===a.axis?i:l,c="x"===r.axis?i:l,d=[];let u,h,m,p;for(u=s,h=s+n;u<h;++u)p=t[u],m={},m[a.axis]=a.parse(gi(p,o),u),d.push(lc(gi(p,c),m,r,u));return d}updateRangeFromParsed(e,t,s,n){super.updateRangeFromParsed(e,t,s,n);const a=s._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:n}=t,a=this.getParsed(e),r=a._custom,i=cc(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+s.getLabelForValue(a[s.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,n){const a="reset"===n,{index:r,_cachedMeta:{vScale:i}}=this,l=i.getBasePixel(),o=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,n);for(let h=t;h<t+s;h++){const t=this.getParsed(h),s=a||ei(t[i.axis])?{base:l,head:l}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),p=(t._stacks||{})[i.axis],x={horizontal:o,base:s.base,enableBorderRadius:!p||cc(t._custom)||r===p._top||r===p._bottom,x:o?s.head:m.center,y:o?m.center:s.head,height:o?m.size:Math.abs(s.size),width:o?Math.abs(s.size):m.size};u&&(x.options=d||this.resolveDataElementOptions(h,e[h].active?"active":n));const f=x.options||e[h].options;dc(x,f,p,r),mc(x,f,c.ratio),this.updateElement(e[h],h,x,n)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),a=s.options.stacked,r=[],i=this._cachedMeta.controller.getParsed(t),l=i&&i[s.axis],o=e=>{const t=e._parsed.find(e=>e[s.axis]===l),n=t&&t[e.vScale.axis];if(ei(n)||isNaN(n))return!0};for(const c of n)if((void 0===t||!o(c))&&((!1===a||-1===r.indexOf(c.stack)||void 0===a&&void 0===c.stack)&&r.push(c.stack),c.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[ri("x"===this.chart.options.indexAxis?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const n=this._getStacks(e,s),a=void 0!==t?n.indexOf(t):-1;return-1===a?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,n=[];let a,r;for(a=0,r=t.data.length;a<r;++a)n.push(s.getPixelForValue(this.getParsed(a)[s.axis],a));const i=e.barThickness;return{min:i||ic(t),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:n},options:{base:a,minBarLength:r}}=this,i=a||0,l=this.getParsed(e),o=l._custom,c=cc(o);let d,u,h=l[t.axis],m=0,p=s?this.applyStack(t,l,s):h;p!==h&&(m=p-h,p=h),c&&(h=o.barStart,p=o.barEnd-o.barStart,0!==h&&Ai(h)!==Ai(o.barEnd)&&(m=0),m+=h);const x=ei(a)||c?m:a;let f=t.getPixelForValue(x);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+p):f,u=d-f,Math.abs(u)<r){u=function(e,t,s){return 0!==e?Ai(e):(t.isHorizontal()?1:-1)*(t.min>=s?1:-1)}(u,t,i)*r,h===i&&(f-=u/2);const e=t.getPixelForDecimal(0),a=t.getPixelForDecimal(1),o=Math.min(e,a),m=Math.max(e,a);f=Math.max(Math.min(f,m),o),d=f+u,s&&!c&&(l._stacks[t.axis]._visualValues[n]=t.getValueForPixel(d)-t.getValueForPixel(f))}if(f===t.getPixelForValue(i)){const e=Ai(u)*t.getLineWidthForValue(i)/2;f+=e,u-=e}return{size:u,base:f,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const s=t.scale,n=this.options,a=n.skipNull,r=ri(n.maxBarThickness,1/0);let i,l;const o=this._getAxisCount();if(t.grouped){const s=a?this._getStackCount(e):t.stackCount,c="flex"===n.barThickness?function(e,t,s,n){const a=t.pixels,r=a[e];let i=e>0?a[e-1]:null,l=e<a.length-1?a[e+1]:null;const o=s.categoryPercentage;null===i&&(i=r-(null===l?t.end-t.start:l-r)),null===l&&(l=r+r-i);const c=r-(r-Math.min(i,l))/2*o;return{chunk:Math.abs(l-i)/2*o/n,ratio:s.barPercentage,start:c}}(e,t,n,s*o):function(e,t,s,n){const a=s.barThickness;let r,i;return ei(a)?(r=t.min*s.categoryPercentage,i=s.barPercentage):(r=a*n,i=1),{chunk:r/n,ratio:i,start:t.pixels[e]-r/2}}(e,t,n,s*o),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(ri(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+u;i=c.start+c.chunk*h+c.chunk/2,l=Math.min(r,c.chunk*c.ratio)}else i=s.getPixelForValue(this.getParsed(e)[s.axis],e),l=Math.min(r,t.min*t.ratio);return{base:i-l/2,head:i+l/2,center:i,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,n=s.length;let a=0;for(;a<n;++a)null===this.getParsed(a)[t.axis]||s[a].hidden||s[a].draw(this._ctx)}}class xc extends rc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:n=[],_dataset:a}=t,r=this.chart._animationsDisabled;let{start:i,count:l}=sl(t,n,r);this._drawStart=i,this._drawCount=l,nl(t)&&(i=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!a._decimated,s.points=n;const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0),o.segment=this.options.segment,this.updateElement(s,void 0,{animated:!r,options:o},e),this.updateElements(n,i,l,e)}updateElements(e,t,s,n){const a="reset"===n,{iScale:r,vScale:i,_stacked:l,_dataset:o}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,n),u=r.axis,h=i.axis,{spanGaps:m,segment:p}=this.options,x=Ri(m)?m:Number.POSITIVE_INFINITY,f=this.chart._animationsDisabled||a||"none"===n,g=t+s,b=e.length;let y=t>0&&this.getParsed(t-1);for(let v=0;v<b;++v){const s=e[v],m=f?s:{};if(v<t||v>=g){m.skip=!0;continue}const b=this.getParsed(v),j=ei(b[h]),N=m[u]=r.getPixelForValue(b[u],v),w=m[h]=a||j?i.getBasePixel():i.getPixelForValue(l?this.applyStack(i,b,l):b[h],v);m.skip=isNaN(N)||isNaN(w)||j,m.stop=v>0&&Math.abs(b[u]-y[u])>x,p&&(m.parsed=b,m.raw=o.data[v]),d&&(m.options=c||this.resolveDataElementOptions(v,s.active?"active":n)),f||this.updateElement(s,v,m,n),y=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,n=e.data||[];if(!n.length)return s;const a=n[0].size(this.resolveDataElementOptions(0)),r=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,a,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function fc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gc{static override(e){Object.assign(gc.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return fc()}parse(){return fc()}format(){return fc()}add(){return fc()}diff(){return fc()}startOf(){return fc()}endOf(){return fc()}}var bc=gc;function yc(e,t,s,n){const{controller:a,data:r,_sorted:i}=e,l=a._cachedMeta.iScale,o=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&"r"!==t&&i&&r.length){const i=l._reversePixels?Qi:Yi;if(!n){const n=i(r,t,s);if(o){const{vScale:t}=a._cachedMeta,{_parsed:s}=e,r=s.slice(0,n.lo+1).reverse().findIndex(e=>!ei(e[t.axis]));n.lo-=Math.max(0,r);const i=s.slice(n.hi).findIndex(e=>!ei(e[t.axis]));n.hi+=Math.max(0,i)}return n}if(a._sharedOptions){const e=r[0],n="function"===typeof e.getRange&&e.getRange(t);if(n){const e=i(r,t,s-n),a=i(r,t,s+n);return{lo:e.lo,hi:a.hi}}}}return{lo:0,hi:r.length-1}}function vc(e,t,s,n,a){const r=e.getSortedVisibleDatasetMetas(),i=s[t];for(let l=0,o=r.length;l<o;++l){const{index:e,data:s}=r[l],{lo:o,hi:c}=yc(r[l],t,i,a);for(let t=o;t<=c;++t){const a=s[t];a.skip||n(a,e,t)}}}function jc(e,t,s,n,a){const r=[];if(!a&&!e.isPointInArea(t))return r;return vc(e,s,t,function(s,i,l){(a||El(s,e.chartArea,0))&&s.inRange(t.x,t.y,n)&&r.push({element:s,datasetIndex:i,index:l})},!0),r}function Nc(e,t,s,n,a,r){let i=[];const l=function(e){const t=-1!==e.indexOf("x"),s=-1!==e.indexOf("y");return function(e,n){const a=t?Math.abs(e.x-n.x):0,r=s?Math.abs(e.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}(s);let o=Number.POSITIVE_INFINITY;return vc(e,s,t,function(s,c,d){const u=s.inRange(t.x,t.y,a);if(n&&!u)return;const h=s.getCenterPoint(a);if(!(!!r||e.isPointInArea(h))&&!u)return;const m=l(t,h);m<o?(i=[{element:s,datasetIndex:c,index:d}],o=m):m===o&&i.push({element:s,datasetIndex:c,index:d})}),i}function wc(e,t,s,n,a,r){return r||e.isPointInArea(t)?"r"!==s||n?Nc(e,t,s,n,a,r):function(e,t,s,n){let a=[];return vc(e,s,t,function(e,s,r){const{startAngle:i,endAngle:l}=e.getProps(["startAngle","endAngle"],n),{angle:o}=Fi(e,{x:t.x,y:t.y});Ui(o,i,l)&&a.push({element:e,datasetIndex:s,index:r})}),a}(e,t,s,a):[]}function _c(e,t,s,n,a){const r=[],i="x"===s?"inXRange":"inYRange";let l=!1;return vc(e,s,t,(e,n,o)=>{e[i]&&e[i](t[s],a)&&(r.push({element:e,datasetIndex:n,index:o}),l=l||e.inRange(t.x,t.y,a))}),n&&!l?[]:r}var kc={evaluateInteractionItems:vc,modes:{index(e,t,s,n){const a=jo(t,e),r=s.axis||"x",i=s.includeInvisible||!1,l=s.intersect?jc(e,a,r,n,i):wc(e,a,r,!1,n,i),o=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=l[0].index,s=e.data[t];s&&!s.skip&&o.push({element:s,datasetIndex:e.index,index:t})}),o):[]},dataset(e,t,s,n){const a=jo(t,e),r=s.axis||"xy",i=s.includeInvisible||!1;let l=s.intersect?jc(e,a,r,n,i):wc(e,a,r,!1,n,i);if(l.length>0){const t=l[0].datasetIndex,s=e.getDatasetMeta(t).data;l=[];for(let e=0;e<s.length;++e)l.push({element:s[e],datasetIndex:t,index:e})}return l},point:(e,t,s,n)=>jc(e,jo(t,e),s.axis||"xy",n,s.includeInvisible||!1),nearest(e,t,s,n){const a=jo(t,e),r=s.axis||"xy",i=s.includeInvisible||!1;return wc(e,a,r,s.intersect,n,i)},x:(e,t,s,n)=>_c(e,jo(t,e),"x",s.intersect,n),y:(e,t,s,n)=>_c(e,jo(t,e),"y",s.intersect,n)}};const Sc=["left","top","right","bottom"];function Cc(e,t){return e.filter(e=>e.pos===t)}function Ec(e,t){return e.filter(e=>-1===Sc.indexOf(e.pos)&&e.box.axis===t)}function Mc(e,t){return e.sort((e,s)=>{const n=t?s:e,a=t?e:s;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function Pc(e,t){const s=function(e){const t={};for(const s of e){const{stack:e,pos:n,stackWeight:a}=s;if(!e||!Sc.includes(n))continue;const r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=a}return t}(e),{vBoxMaxWidth:n,hBoxMaxHeight:a}=t;let r,i,l;for(r=0,i=e.length;r<i;++r){l=e[r];const{fullSize:i}=l.box,o=s[l.stack],c=o&&l.stackWeight/o.weight;l.horizontal?(l.width=c?c*n:i&&t.availableWidth,l.height=a):(l.width=n,l.height=c?c*a:i&&t.availableHeight)}return s}function Ac(e,t,s,n){return Math.max(e[s],t[s])+Math.max(e[n],t[n])}function Dc(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Tc(e,t,s,n){const{pos:a,box:r}=s,i=e.maxPadding;if(!si(a)){s.size&&(e[a]-=s.size);const t=n[s.stack]||{size:0,count:1};t.size=Math.max(t.size,s.horizontal?r.height:r.width),s.size=t.size/t.count,e[a]+=s.size}r.getPadding&&Dc(i,r.getPadding());const l=Math.max(0,t.outerWidth-Ac(i,e,"left","right")),o=Math.max(0,t.outerHeight-Ac(i,e,"top","bottom")),c=l!==e.w,d=o!==e.h;return e.w=l,e.h=o,s.horizontal?{same:c,other:d}:{same:d,other:c}}function Rc(e,t){const s=t.maxPadding;function n(e){const n={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{n[e]=Math.max(t[e],s[e])}),n}return n(e?["left","right"]:["top","bottom"])}function Oc(e,t,s,n){const a=[];let r,i,l,o,c,d;for(r=0,i=e.length,c=0;r<i;++r){l=e[r],o=l.box,o.update(l.width||t.w,l.height||t.h,Rc(l.horizontal,t));const{same:i,other:u}=Tc(t,s,l,n);c|=i&&a.length,d=d||u,o.fullSize||a.push(l)}return c&&Oc(a,t,s,n)||d}function Lc(e,t,s,n,a){e.top=s,e.left=t,e.right=t+n,e.bottom=s+a,e.width=n,e.height=a}function zc(e,t,s,n){const a=s.padding;let{x:r,y:i}=t;for(const l of e){const e=l.box,o=n[l.stack]||{count:1,placed:0,weight:1},c=l.stackWeight/o.weight||1;if(l.horizontal){const n=t.w*c,r=o.size||e.height;yi(o.start)&&(i=o.start),e.fullSize?Lc(e,a.left,i,s.outerWidth-a.right-a.left,r):Lc(e,t.left+o.placed,i,n,r),o.start=i,o.placed+=n,i=e.bottom}else{const n=t.h*c,i=o.size||e.width;yi(o.start)&&(r=o.start),e.fullSize?Lc(e,r,a.top,i,s.outerHeight-a.bottom-a.top):Lc(e,r,t.top+o.placed,i,n),o.start=r,o.placed+=n,r=e.right}}t.x=r,t.y=i}var Ic={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const s=e.boxes?e.boxes.indexOf(t):-1;-1!==s&&e.boxes.splice(s,1)},configure(e,t,s){t.fullSize=s.fullSize,t.position=s.position,t.weight=s.weight},update(e,t,s,n){if(!e)return;const a=Hl(e.options.layout.padding),r=Math.max(t-a.width,0),i=Math.max(s-a.height,0),l=function(e){const t=function(e){const t=[];let s,n,a,r,i,l;for(s=0,n=(e||[]).length;s<n;++s)a=e[s],({position:r,options:{stack:i,stackWeight:l=1}}=a),t.push({index:s,box:a,pos:r,horizontal:a.isHorizontal(),weight:a.weight,stack:i&&r+i,stackWeight:l});return t}(e),s=Mc(t.filter(e=>e.box.fullSize),!0),n=Mc(Cc(t,"left"),!0),a=Mc(Cc(t,"right")),r=Mc(Cc(t,"top"),!0),i=Mc(Cc(t,"bottom")),l=Ec(t,"x"),o=Ec(t,"y");return{fullSize:s,leftAndTop:n.concat(r),rightAndBottom:a.concat(o).concat(i).concat(l),chartArea:Cc(t,"chartArea"),vertical:n.concat(a).concat(o),horizontal:r.concat(i).concat(l)}}(e.boxes),o=l.vertical,c=l.horizontal;oi(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=o.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:s,padding:a,availableWidth:r,availableHeight:i,vBoxMaxWidth:r/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},a);Dc(h,Hl(n));const m=Object.assign({maxPadding:h,w:r,h:i,x:a.left,y:a.top},a),p=Pc(o.concat(c),u);Oc(l.fullSize,m,u,p),Oc(o,m,u,p),Oc(c,m,u,p)&&Oc(o,m,u,p),function(e){const t=e.maxPadding;function s(s){const n=Math.max(t[s]-e[s],0);return e[s]+=n,n}e.y+=s("top"),e.x+=s("left"),s("right"),s("bottom")}(m),zc(l.leftAndTop,m,u,p),m.x+=m.w,m.y+=m.h,zc(l.rightAndBottom,m,u,p),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},oi(l.chartArea,t=>{const s=t.box;Object.assign(s,e.chartArea),s.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Fc{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,n){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):s)}}isAttached(e){return!0}updateConfig(e){}}class $c extends Fc{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Bc="$chartjs",Vc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Uc=e=>null===e||""===e;const Hc=!!ko&&{passive:!0};function Wc(e,t,s){e&&e.canvas&&e.canvas.removeEventListener(t,s,Hc)}function qc(e,t){for(const s of e)if(s===t||s.contains(t))return!0}function Yc(e,t,s){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||qc(s.addedNodes,n),t=t&&!qc(s.removedNodes,n);t&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}function Qc(e,t,s){const n=e.canvas,a=new MutationObserver(e=>{let t=!1;for(const s of e)t=t||qc(s.removedNodes,n),t=t&&!qc(s.addedNodes,n);t&&s()});return a.observe(document,{childList:!0,subtree:!0}),a}const Kc=new Map;let Gc=0;function Xc(){const e=window.devicePixelRatio;e!==Gc&&(Gc=e,Kc.forEach((t,s)=>{s.currentDevicePixelRatio!==e&&t()}))}function Jc(e,t,s){const n=e.canvas,a=n&&fo(n);if(!a)return;const r=Zi((e,t)=>{const n=a.clientWidth;s(e,t),n<a.clientWidth&&s()},window),i=new ResizeObserver(e=>{const t=e[0],s=t.contentRect.width,n=t.contentRect.height;0===s&&0===n||r(s,n)});return i.observe(a),function(e,t){Kc.size||window.addEventListener("resize",Xc),Kc.set(e,t)}(e,r),i}function Zc(e,t,s){s&&s.disconnect(),"resize"===t&&function(e){Kc.delete(e),Kc.size||window.removeEventListener("resize",Xc)}(e)}function ed(e,t,s){const n=e.canvas,a=Zi(t=>{null!==e.ctx&&s(function(e,t){const s=Vc[e.type]||e.type,{x:n,y:a}=jo(e,t);return{type:s,chart:t,native:e,x:void 0!==n?n:null,y:void 0!==a?a:null}}(t,e))},e);return function(e,t,s){e&&e.addEventListener(t,s,Hc)}(n,t,a),a}class td extends Fc{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(function(e,t){const s=e.style,n=e.getAttribute("height"),a=e.getAttribute("width");if(e[Bc]={initial:{height:n,width:a,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Uc(a)){const t=So(e,"width");void 0!==t&&(e.width=t)}if(Uc(n))if(""===e.style.height)e.height=e.width/(t||2);else{const t=So(e,"height");void 0!==t&&(e.height=t)}}(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[Bc])return!1;const s=t[Bc].initial;["height","width"].forEach(e=>{const n=s[e];ei(n)?t.removeAttribute(e):t.setAttribute(e,n)});const n=s.style||{};return Object.keys(n).forEach(e=>{t.style[e]=n[e]}),t.width=t.width,delete t[Bc],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),a={attach:Yc,detach:Qc,resize:Jc}[t]||ed;n[t]=a(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),n=s[t];if(!n)return;({attach:Zc,detach:Zc,resize:Zc}[t]||Wc)(e,t,n),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,n){return wo(e,t,s,n)}isAttached(e){const t=e&&fo(e);return!(!t||!t.isConnected)}}class sd{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return Ri(this.x)&&Ri(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const n={};return e.forEach(e=>{n[e]=s[e]&&s[e].active()?s[e]._to:this[e]}),n}}function nd(e,t){const s=e.options.ticks,n=function(e){const t=e.options.offset,s=e._tickSize(),n=e._length/s+(t?0:1),a=e._maxLength/s;return Math.floor(Math.min(n,a))}(e),a=Math.min(s.maxTicksLimit||n,n),r=s.major.enabled?function(e){const t=[];let s,n;for(s=0,n=e.length;s<n;s++)e[s].major&&t.push(s);return t}(t):[],i=r.length,l=r[0],o=r[i-1],c=[];if(i>a)return function(e,t,s,n){let a,r=0,i=s[0];for(n=Math.ceil(n),a=0;a<e.length;a++)a===i&&(t.push(e[a]),r++,i=s[r*n])}(t,c,r,i/a),c;const d=function(e,t,s){const n=function(e){const t=e.length;let s,n;if(t<2)return!1;for(n=e[0],s=1;s<t;++s)if(e[s]-e[s-1]!==n)return!1;return n}(e),a=t.length/s;if(!n)return Math.max(a,1);const r=function(e){const t=[],s=Math.sqrt(e);let n;for(n=1;n<s;n++)e%n===0&&(t.push(n),t.push(e/n));return s===(0|s)&&t.push(s),t.sort((e,t)=>e-t).pop(),t}(n);for(let i=0,l=r.length-1;i<l;i++){const e=r[i];if(e>a)return e}return Math.max(a,1)}(r,t,a);if(i>0){let e,s;const n=i>1?Math.round((o-l)/(i-1)):null;for(ad(t,c,d,ei(n)?0:l-n,l),e=0,s=i-1;e<s;e++)ad(t,c,d,r[e],r[e+1]);return ad(t,c,d,o,ei(n)?t.length:o+n),c}return ad(t,c,d),c}function ad(e,t,s,n,a){const r=ri(n,0),i=Math.min(ri(a,e.length),e.length);let l,o,c,d=0;for(s=Math.ceil(s),a&&(l=a-n,s=l/Math.floor(l/s)),c=r;c<0;)d++,c=Math.round(r+d*s);for(o=Math.max(r,0);o<i;o++)o===c&&(t.push(e[o]),d++,c=Math.round(r+d*s))}const rd=(e,t,s)=>"top"===t||"left"===t?e[t]+s:e[t]-s,id=(e,t)=>Math.min(t||e,e);function ld(e,t){const s=[],n=e.length/t,a=e.length;let r=0;for(;r<a;r+=n)s.push(e[Math.floor(r)]);return s}function od(e,t,s){const n=e.ticks.length,a=Math.min(t,n-1),r=e._startPixel,i=e._endPixel,l=1e-6;let o,c=e.getPixelForTick(a);if(!(s&&(o=1===n?Math.max(c-r,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(a-1))/2,c+=a<t?o:-o,c<r-l||c>i+l)))return c}function cd(e){return e.drawTicks?e.tickLength:0}function dd(e,t){if(!e.display)return 0;const s=Wl(e.font,t),n=Hl(e.padding);return(ti(e.text)?e.text.length:1)*s.lineHeight+n.height}function ud(e,t,s){let n=el(e);return(s&&"right"!==t||!s&&"right"===t)&&(n=(e=>"left"===e?"right":"right"===e?"left":e)(n)),n}class hd extends sd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:n}=this;return e=ai(e,Number.POSITIVE_INFINITY),t=ai(t,Number.NEGATIVE_INFINITY),s=ai(s,Number.POSITIVE_INFINITY),n=ai(n,Number.NEGATIVE_INFINITY),{min:ai(e,s),max:ai(t,n),minDefined:ni(e),maxDefined:ni(t)}}getMinMax(e){let t,{min:s,max:n,minDefined:a,maxDefined:r}=this.getUserBounds();if(a&&r)return{min:s,max:n};const i=this.getMatchingVisibleMetas();for(let l=0,o=i.length;l<o;++l)t=i[l].controller.getMinMax(this,e),a||(s=Math.min(s,t.min)),r||(n=Math.max(n,t.max));return s=r&&s>n?n:s,n=a&&s>n?s:n,{min:ai(s,ai(n,s)),max:ai(n,ai(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){li(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:n,grace:a,ticks:r}=this.options,i=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,s){const{min:n,max:a}=e,r=ii(t,(a-n)/2),i=(e,t)=>s&&0===e?0:e+t;return{min:i(n,-Math.abs(r)),max:i(a,r)}}(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=i<this.ticks.length;this._convertTicksToLabels(l?ld(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||"auto"===r.source)&&(this.ticks=nd(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,s=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,s=!s),this._startPixel=e,this._endPixel=t,this._reversePixels=s,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){li(this.options.afterUpdate,[this])}beforeSetDimensions(){li(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){li(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),li(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){li(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,n,a;for(s=0,n=e.length;s<n;s++)a=e[s],a.label=li(t.callback,[a.value,s,e],this)}afterTickToLabelConversion(){li(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){li(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=id(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let r,i,l,o=n;if(!this._isVisible()||!t.display||n>=a||s<=1||!this.isHorizontal())return void(this.labelRotation=n);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=Hi(this.chart.width-d,0,this.maxWidth);r=e.offset?this.maxWidth/s:h/(s-1),d+6>r&&(r=h/(s-(e.offset?.5:1)),i=this.maxHeight-cd(e.grid)-t.padding-dd(e.title,this.chart.options.font),l=Math.sqrt(d*d+u*u),o=zi(Math.min(Math.asin(Hi((c.highest.height+6)/r,-1,1)),Math.asin(Hi(i/l,-1,1))-Math.asin(Hi(u/l,-1,1)))),o=Math.max(n,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){li(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){li(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:n,grid:a}}=this,r=this._isVisible(),i=this.isHorizontal();if(r){const r=dd(n,t.options.font);if(i?(e.width=this.maxWidth,e.height=cd(a)+r):(e.height=this.maxHeight,e.width=cd(a)+r),s.display&&this.ticks.length){const{first:t,last:n,widest:a,highest:r}=this._getLabelSizes(),l=2*s.padding,o=Li(this.labelRotation),c=Math.cos(o),d=Math.sin(o);if(i){const t=s.mirror?0:d*a.width+c*r.height;e.height=Math.min(this.maxHeight,e.height+t+l)}else{const t=s.mirror?0:c*a.width+d*r.height;e.width=Math.min(this.maxWidth,e.width+t+l)}this._calculatePadding(t,n,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,n){const{ticks:{align:a,padding:r},position:i}=this.options,l=0!==this.labelRotation,o="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;l?o?(d=n*e.width,u=s*t.height):(d=s*e.height,u=n*t.width):"start"===a?u=t.width:"end"===a?d=e.width:"inner"!==a&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+r)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let s=t.height/2,n=e.height/2;"start"===a?(s=0,n=e.height):"end"===a&&(s=t.height,n=0),this.paddingTop=s+r,this.paddingBottom=n+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){li(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,s;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,s=e.length;t<s;t++)ei(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=ld(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:n,_longestTextCache:a}=this,r=[],i=[],l=Math.floor(t/id(t,s));let o,c,d,u,h,m,p,x,f,g,b,y=0,v=0;for(o=0;o<t;o+=l){if(u=e[o].label,h=this._resolveTickFontOptions(o),n.font=m=h.string,p=a[m]=a[m]||{data:{},gc:[]},x=h.lineHeight,f=g=0,ei(u)||ti(u)){if(ti(u))for(c=0,d=u.length;c<d;++c)b=u[c],ei(b)||ti(b)||(f=wl(n,p.data,p.gc,f,b),g+=x)}else f=wl(n,p.data,p.gc,f,u),g=x;r.push(f),i.push(g),y=Math.max(f,y),v=Math.max(g,v)}!function(e,t){oi(e,e=>{const s=e.gc,n=s.length/2;let a;if(n>t){for(a=0;a<n;++a)delete e.data[s[a]];s.splice(0,n)}})}(a,t);const j=r.indexOf(y),N=i.indexOf(v),w=e=>({width:r[e]||0,height:i[e]||0});return{first:w(0),last:w(t-1),widest:w(j),highest:w(N),widths:r,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Hi(this._alignToPixels?_l(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=function(e,t,s){return Yl(e,{tick:s,index:t,type:"tick"})}(this.getContext(),e,s))}return this.$context||(this.$context=Yl(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Li(this.labelRotation),s=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,i=a?a.widest.width+r:0,l=a?a.highest.height+r:0;return this.isHorizontal()?l*s>i*n?i/s:l/n:l*n<i*s?l/s:i/n}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,n=this.options,{grid:a,position:r,border:i}=n,l=a.offset,o=this.isHorizontal(),c=this.ticks.length+(l?1:0),d=cd(a),u=[],h=i.setContext(this.getContext()),m=h.display?h.width:0,p=m/2,x=function(e){return _l(s,e,m)};let f,g,b,y,v,j,N,w,_,k,S,C;if("top"===r)f=x(this.bottom),j=this.bottom-d,w=f-p,k=x(e.top)+p,C=e.bottom;else if("bottom"===r)f=x(this.top),k=e.top,C=x(e.bottom)-p,j=f+p,w=this.top+d;else if("left"===r)f=x(this.right),v=this.right-d,N=f-p,_=x(e.left)+p,S=e.right;else if("right"===r)f=x(this.left),_=e.left,S=x(e.right)-p,v=f+p,N=this.left+d;else if("x"===t){if("center"===r)f=x((e.top+e.bottom)/2+.5);else if(si(r)){const e=Object.keys(r)[0],t=r[e];f=x(this.chart.scales[e].getPixelForValue(t))}k=e.top,C=e.bottom,j=f+p,w=j+d}else if("y"===t){if("center"===r)f=x((e.left+e.right)/2);else if(si(r)){const e=Object.keys(r)[0],t=r[e];f=x(this.chart.scales[e].getPixelForValue(t))}v=f-p,N=v-d,_=e.left,S=e.right}const E=ri(n.ticks.maxTicksLimit,c),M=Math.max(1,Math.ceil(c/E));for(g=0;g<c;g+=M){const e=this.getContext(g),t=a.setContext(e),n=i.setContext(e),r=t.lineWidth,c=t.color,d=n.dash||[],h=n.dashOffset,m=t.tickWidth,p=t.tickColor,x=t.tickBorderDash||[],f=t.tickBorderDashOffset;b=od(this,g,l),void 0!==b&&(y=_l(s,b,r),o?v=N=_=S=y:j=w=k=C=y,u.push({tx1:v,ty1:j,tx2:N,ty2:w,x1:_,y1:k,x2:S,y2:C,width:r,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:p,tickBorderDash:x,tickBorderDashOffset:f}))}return this._ticksLength=c,this._borderValue=f,u}_computeLabelItems(e){const t=this.axis,s=this.options,{position:n,ticks:a}=s,r=this.isHorizontal(),i=this.ticks,{align:l,crossAlign:o,padding:c,mirror:d}=a,u=cd(s.grid),h=u+c,m=d?-c:h,p=-Li(this.labelRotation),x=[];let f,g,b,y,v,j,N,w,_,k,S,C,E="middle";if("top"===n)j=this.bottom-m,N=this._getXAxisLabelAlignment();else if("bottom"===n)j=this.top+m,N=this._getXAxisLabelAlignment();else if("left"===n){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("right"===n){const e=this._getYAxisLabelAlignment(u);N=e.textAlign,v=e.x}else if("x"===t){if("center"===n)j=(e.top+e.bottom)/2+h;else if(si(n)){const e=Object.keys(n)[0],t=n[e];j=this.chart.scales[e].getPixelForValue(t)+h}N=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===n)v=(e.left+e.right)/2-h;else if(si(n)){const e=Object.keys(n)[0],t=n[e];v=this.chart.scales[e].getPixelForValue(t)}N=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===l?E="top":"end"===l&&(E="bottom"));const M=this._getLabelSizes();for(f=0,g=i.length;f<g;++f){b=i[f],y=b.label;const e=a.setContext(this.getContext(f));w=this.getPixelForTick(f)+a.labelOffset,_=this._resolveTickFontOptions(f),k=_.lineHeight,S=ti(y)?y.length:1;const t=S/2,s=e.color,l=e.textStrokeColor,c=e.textStrokeWidth;let u,h=N;if(r?(v=w,"inner"===N&&(h=f===g-1?this.options.reverse?"left":"right":0===f?this.options.reverse?"right":"left":"center"),C="top"===n?"near"===o||0!==p?-S*k+k/2:"center"===o?-M.highest.height/2-t*k+k:-M.highest.height+k/2:"near"===o||0!==p?k/2:"center"===o?M.highest.height/2-t*k:M.highest.height-S*k,d&&(C*=-1),0===p||e.showLabelBackdrop||(v+=k/2*Math.sin(p))):(j=w,C=(1-S)*k/2),e.showLabelBackdrop){const t=Hl(e.backdropPadding),s=M.heights[f],n=M.widths[f];let a=C-t.top,r=0-t.left;switch(E){case"middle":a-=s/2;break;case"bottom":a-=s}switch(N){case"center":r-=n/2;break;case"right":r-=n;break;case"inner":f===g-1?r-=n:f>0&&(r-=n/2)}u={left:r,top:a,width:n+t.width,height:s+t.height,color:e.backdropColor}}x.push({label:y,font:_,textOffset:C,options:{rotation:p,color:s,strokeColor:l,strokeWidth:c,textAlign:h,textBaseline:E,translation:[v,j],backdrop:u}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Li(this.labelRotation))return"top"===e?"left":"right";let s="center";return"start"===t.align?s="left":"end"===t.align?s="right":"inner"===t.align&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:n,padding:a}}=this.options,r=e+a,i=this._getLabelSizes().widest.width;let l,o;return"left"===t?n?(o=this.right+a,"near"===s?l="left":"center"===s?(l="center",o+=i/2):(l="right",o+=i)):(o=this.right-r,"near"===s?l="right":"center"===s?(l="center",o-=i/2):(l="left",o=this.left)):"right"===t?n?(o=this.left+a,"near"===s?l="right":"center"===s?(l="center",o-=i/2):(l="left",o-=i)):(o=this.left+r,"near"===s?l="left":"center"===s?(l="center",o+=i/2):(l="right",o=this.right)):l="right",{textAlign:l,x:o}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:n,width:a,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,n,a,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(t=>t.value===e);if(s>=0){return t.setContext(this.getContext(s)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,r;const i=(e,t,n)=>{n.width&&n.color&&(s.save(),s.lineWidth=n.width,s.strokeStyle=n.color,s.setLineDash(n.borderDash||[]),s.lineDashOffset=n.borderDashOffset,s.beginPath(),s.moveTo(e.x,e.y),s.lineTo(t.x,t.y),s.stroke(),s.restore())};if(t.display)for(a=0,r=n.length;a<r;++a){const e=n[a];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:n}}=this,a=s.setContext(this.getContext()),r=s.display?a.width:0;if(!r)return;const i=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let o,c,d,u;this.isHorizontal()?(o=_l(e,this.left,r)-r/2,c=_l(e,this.right,i)+i/2,d=u=l):(d=_l(e,this.top,r)-r/2,u=_l(e,this.bottom,i)+i/2,o=c=l),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(o,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,s=this._computeLabelArea();s&&Ml(t,s);const n=this.getLabelItems(e);for(const a of n){const e=a.options,s=a.font;Ol(t,a.label,0,a.textOffset,s,e)}s&&Pl(t)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:n}}=this;if(!s.display)return;const a=Wl(s.font),r=Hl(s.padding),i=s.align;let l=a.lineHeight/2;"bottom"===t||"center"===t||si(t)?(l+=r.bottom,ti(s.text)&&(l+=a.lineHeight*(s.text.length-1))):l+=r.top;const{titleX:o,titleY:c,maxWidth:d,rotation:u}=function(e,t,s,n){const{top:a,left:r,bottom:i,right:l,chart:o}=e,{chartArea:c,scales:d}=o;let u,h,m,p=0;const x=i-a,f=l-r;if(e.isHorizontal()){if(h=tl(n,r,l),si(s)){const e=Object.keys(s)[0],n=s[e];m=d[e].getPixelForValue(n)+x-t}else m="center"===s?(c.bottom+c.top)/2+x-t:rd(e,s,t);u=l-r}else{if(si(s)){const e=Object.keys(s)[0],n=s[e];h=d[e].getPixelForValue(n)-f+t}else h="center"===s?(c.left+c.right)/2-f+t:rd(e,s,t);m=tl(n,i,a),p="left"===s?-Ci:Ci}return{titleX:h,titleY:m,maxWidth:u,rotation:p}}(this,l,t,i);Ol(e,s.text,0,0,a,{color:s.color,maxWidth:d,rotation:u,textAlign:ud(i,t,n),textBaseline:"middle",translation:[o,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=ri(e.grid&&e.grid.z,-1),n=ri(e.border&&e.border.z,0);return this._isVisible()&&this.draw===hd.prototype.draw?[{z:s,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let a,r;for(a=0,r=t.length;a<r;++a){const r=t[a];r[s]!==this.id||e&&r.type!==e||n.push(r)}return n}_resolveTickFontOptions(e){return Wl(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class md{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;(function(e){return"id"in e&&"defaults"in e})(t)&&(s=this.register(t));const n=this.items,a=e.id,r=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,function(e,t,s){const n=mi(Object.create(null),[s?Nl.get(s):{},Nl.get(t),e.defaults]);Nl.set(t,n),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(s=>{const n=s.split("."),a=n.pop(),r=[e].concat(n).join("."),i=t[s].split("."),l=i.pop(),o=i.join(".");Nl.route(r,a,o,l)})}(t,e.defaultRoutes);e.descriptors&&Nl.describe(t,e.descriptors)}(e,r,s),this.override&&Nl.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,n=this.scope;s in t&&delete t[s],n&&s in Nl[n]&&(delete Nl[n][s],this.override&&delete gl[s])}}class pd{constructor(){this.controllers=new md(rc,"datasets",!0),this.elements=new md(sd,"elements"),this.plugins=new md(Object,"plugins"),this.scales=new md(hd,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];this._each("unregister",t,this.scales)}_each(e,t,s){[...t].forEach(t=>{const n=s||this._getRegistryForType(t);s||n.isForType(t)||n===this.plugins&&t.id?this._exec(e,n,t):oi(t,t=>{const n=s||this._getRegistryForType(t);this._exec(e,n,t)})})}_exec(e,t,s){const n=bi(e);li(s["before"+n],[],s),t[e](s),li(s["after"+n],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const n=t.get(e);if(void 0===n)throw new Error('"'+e+'" is not a registered '+s+".");return n}}var xd=new pd;class fd{constructor(){this._init=[]}notify(e,t,s,n){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=n?this._descriptors(e).filter(n):this._descriptors(e),r=this._notify(a,e,t,s);return"afterDestroy"===t&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,s,n){n=n||{};for(const a of e){const e=a.plugin;if(!1===li(e[s],[t,n,a.options],e)&&n.cancelable)return!1}return!0}invalidate(){ei(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,n=ri(s.options&&s.options.plugins,{}),a=function(e){const t={},s=[],n=Object.keys(xd.plugins.items);for(let r=0;r<n.length;r++)s.push(xd.getPlugin(n[r]));const a=e.plugins||[];for(let r=0;r<a.length;r++){const e=a[r];-1===s.indexOf(e)&&(s.push(e),t[e.id]=!0)}return{plugins:s,localIds:t}}(s);return!1!==n||t?function(e,t,s,n){let{plugins:a,localIds:r}=t;const i=[],l=e.getContext();for(const o of a){const t=o.id,a=gd(s[t],n);null!==a&&i.push({plugin:o,options:bd(e.config,{plugin:o,local:r[t]},a,l)})}return i}(e,a,n,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,n=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(n(t,s),e,"stop"),this._notify(n(s,t),e,"start")}}function gd(e,t){return t||!1!==e?!0===e?{}:e:null}function bd(e,t,s,n){let{plugin:a,local:r}=t;const i=e.pluginScopeKeys(a),l=e.getOptionScopes(s,i);return r&&a.defaults&&l.push(a.defaults),e.createResolver(l,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yd(e,t){const s=Nl.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||s.indexAxis||"x"}function vd(e){if("x"===e||"y"===e||"r"===e)return e}function jd(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Nd(e){if(vd(e))return e;for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];for(const a of s){const t=a.axis||jd(a.position)||e.length>1&&vd(e[0].toLowerCase());if(t)return t}throw new Error(`Cannot determine type of '${e}' axis. Please provide 'axis' or 'position' option.`)}function wd(e,t,s){if(s[t+"AxisID"]===e)return{axis:t}}function _d(e,t){const s=gl[e.type]||{scales:{}},n=t.scales||{},a=yd(e.type,t),r=Object.create(null);return Object.keys(n).forEach(t=>{const i=n[t];if(!si(i))return console.error(`Invalid scale configuration for scale: ${t}`);if(i._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${t}`);const l=Nd(t,i,function(e,t){if(t.data&&t.data.datasets){const s=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(s.length)return wd(e,"x",s[0])||wd(e,"y",s[0])}return{}}(t,e),Nl.scales[i.type]),o=function(e,t){return e===t?"_index_":"_value_"}(l,a),c=s.scales||{};r[t]=pi(Object.create(null),[{axis:l},i,c[l],c[o]])}),e.data.datasets.forEach(s=>{const a=s.type||e.type,i=s.indexAxis||yd(a,t),l=(gl[a]||{}).scales||{};Object.keys(l).forEach(e=>{const t=function(e,t){let s=e;return"_index_"===e?s=t:"_value_"===e&&(s="x"===t?"y":"x"),s}(e,i),a=s[t+"AxisID"]||t;r[a]=r[a]||Object.create(null),pi(r[a],[{axis:t},n[a],l[e]])})}),Object.keys(r).forEach(e=>{const t=r[e];pi(t,[Nl.scales[t.type],Nl.scale])}),r}function kd(e){const t=e.options||(e.options={});t.plugins=ri(t.plugins,{}),t.scales=_d(e,t)}function Sd(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Cd=new Map,Ed=new Set;function Md(e,t){let s=Cd.get(e);return s||(s=t(),Cd.set(e,s),Ed.add(s)),s}const Pd=(e,t,s)=>{const n=gi(t,s);void 0!==n&&e.add(n)};class Ad{constructor(e){this._config=function(e){return(e=e||{}).data=Sd(e.data),kd(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Sd(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Md(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Md(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Md(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id;return Md(`${this.type}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let n=s.get(e);return n&&!t||(n=new Map,s.set(e,n)),n}getOptionScopes(e,t,s){const{options:n,type:a}=this,r=this._cachedScopes(e,s),i=r.get(t);if(i)return i;const l=new Set;t.forEach(t=>{e&&(l.add(e),t.forEach(t=>Pd(l,e,t))),t.forEach(e=>Pd(l,n,e)),t.forEach(e=>Pd(l,gl[a]||{},e)),t.forEach(e=>Pd(l,Nl,e)),t.forEach(e=>Pd(l,bl,e))});const o=Array.from(l);return 0===o.length&&o.push(Object.create(null)),Ed.has(t)&&r.set(t,o),o}chartOptionScopes(){const{options:e,type:t}=this;return[e,gl[t]||{},Nl.datasets[t]||{},{type:t},Nl,bl]}resolveNamedOptions(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const a={$shared:!0},{resolver:r,subPrefixes:i}=Dd(this._resolverCache,e,n);let l=r;if(function(e,t){const{isScriptable:s,isIndexable:n}=Gl(e);for(const a of t){const t=s(a),r=n(a),i=(r||t)&&e[a];if(t&&(vi(i)||Td(i))||r&&ti(i))return!0}return!1}(r,t)){a.$shared=!1;l=Kl(r,s=vi(s)?s():s,this.createResolver(e,s,i))}for(const o of t)a[o]=l[o];return a}createResolver(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],n=arguments.length>3?arguments[3]:void 0;const{resolver:a}=Dd(this._resolverCache,e,s);return si(t)?Kl(a,t,void 0,n):a}}function Dd(e,t,s){let n=e.get(t);n||(n=new Map,e.set(t,n));const a=s.join();let r=n.get(a);if(!r){r={resolver:Ql(t,s),subPrefixes:s.filter(e=>!e.toLowerCase().includes("hover"))},n.set(a,r)}return r}const Td=e=>si(e)&&Object.getOwnPropertyNames(e).some(t=>vi(e[t]));const Rd=["top","bottom","left","right","chartArea"];function Od(e,t){return"top"===e||"bottom"===e||-1===Rd.indexOf(e)&&"x"===t}function Ld(e,t){return function(s,n){return s[e]===n[e]?s[t]-n[t]:s[e]-n[e]}}function zd(e){const t=e.chart,s=t.options.animation;t.notifyPlugins("afterRender"),li(s&&s.onComplete,[e],t)}function Id(e){const t=e.chart,s=t.options.animation;li(s&&s.onProgress,[e],t)}function Fd(e){return xo()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const $d={},Bd=e=>{const t=Fd(e);return Object.values($d).filter(e=>e.canvas===t).pop()};function Vd(e,t,s){const n=Object.keys(e);for(const a of n){const n=+a;if(n>=t){const r=e[a];delete e[a],(s>0||n>t)&&(e[n+s]=r)}}}class Ud{static defaults=(()=>Nl)();static instances=(()=>$d)();static overrides=(()=>gl)();static registry=(()=>xd)();static version="4.5.0";static getChart=(()=>Bd)();static register(){xd.add(...arguments),Hd()}static unregister(){xd.remove(...arguments),Hd()}constructor(e,t){const s=this.config=new Ad(t),n=Fd(e),a=Bd(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const r=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||function(e){return!xo()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?$c:td}(n)),this.platform.updateConfig(s);const i=this.platform.acquireContext(n,r.aspectRatio),l=i&&i.canvas,o=l&&l.height,c=l&&l.width;this.id=Zr(),this.ctx=i,this.canvas=l,this.width=c,this.height=o,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fd,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let s;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t?(clearTimeout(s),s=setTimeout(e,t,a)):e.apply(this,a),t}}(e=>this.update(e),r.resizeDelay||0),this._dataChanges=[],$d[this.id]=this,i&&l?(Uo.listen(this,"complete",zd),Uo.listen(this,"progress",Id),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:n,_aspectRatio:a}=this;return ei(e)?t&&a?a:n?s/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return xd}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_o(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kl(this.canvas,this.ctx),this}stop(){return Uo.stop(this),this}resize(e,t){Uo.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,n=this.canvas,a=s.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,e,t,a),i=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,_o(this,i,!0)&&(this.notifyPlugins("resize",{size:r}),li(s.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){oi(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,n=Object.keys(s).reduce((e,t)=>(e[t]=!1,e),{});let a=[];t&&(a=a.concat(Object.keys(t).map(e=>{const s=t[e],n=Nd(e,s),a="r"===n,r="x"===n;return{options:s,dposition:a?"chartArea":r?"bottom":"left",dtype:a?"radialLinear":r?"category":"linear"}}))),oi(a,t=>{const a=t.options,r=a.id,i=Nd(r,a),l=ri(a.type,t.dtype);void 0!==a.position&&Od(a.position,i)===Od(t.dposition)||(a.position=t.dposition),n[r]=!0;let o=null;if(r in s&&s[r].type===l)o=s[r];else{o=new(xd.getScale(l))({id:r,type:l,ctx:this.ctx,chart:this}),s[o.id]=o}o.init(a,e)}),oi(n,(e,t)=>{e||delete s[t]}),oi(s,e=>{Ic.configure(this,e,e.options),Ic.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((e,t)=>e.index-t.index),s>t){for(let e=t;e<s;++e)this._destroyDatasetMeta(e);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(Ld("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,s)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=t.length;s<n;s++){const n=t[s];let a=this.getDatasetMeta(s);const r=n.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=r,a.indexAxis=n.indexAxis||yd(r,this.options),a.order=n.order||0,a.index=s,a.label=""+n.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const t=xd.getController(r),{datasetElementType:n,dataElementType:i}=Nl.datasets[r];Object.assign(t,{dataElementType:xd.getElement(i),datasetElementType:n&&xd.getElement(n)}),a.controller=new t(this,s),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){oi(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let o=0,c=this.data.datasets.length;o<c;o++){const{controller:e}=this.getDatasetMeta(o),t=!n&&-1===a.indexOf(e);e.buildOrUpdateElements(t),r=Math.max(+e.getMaxOverflow(),r)}r=this._minPadding=s.layout.autoPadding?r:0,this._updateLayout(r),n||oi(a,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ld("z","_idx"));const{_active:i,_lastEvent:l}=this;l?this._eventHandler(l,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){oi(this.scales,e=>{Ic.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);ji(t,s)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:a}of t){Vd(e,n,"_removeElements"===s?-a:a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),n=s(0);for(let a=1;a<t;a++)if(!ji(n,s(a)))return;return Array.from(n).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ic.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],oi(this.boxes,e=>{s&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,vi(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),n={meta:s,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",n)&&(s.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Uo.has(this)?this.attached&&!Uo.running(this)&&Uo.start(this):(this.draw(),zd({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let n,a;for(n=0,a=t.length;n<a;++n){const a=t[n];e&&!a.visible||s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},n=Bo(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(n&&Ml(t,n),e.controller.draw(),n&&Pl(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return El(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,n){const a=kc.modes[t];return"function"===typeof a?a(this,e,s,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let n=s.filter(e=>e&&e._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=Yl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return"boolean"===typeof s.hidden?!s.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const n=s?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,n);yi(t)?(a.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),r.update(a,{visible:s}),this.update(t=>t.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Uo.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),kl(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete $d[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(s,n)=>{t.addEventListener(this,s,n),e[s]=n},n=(e,t,s)=>{e.offsetX=t,e.offsetY=s,this._eventHandler(e)};oi(this.options.events,e=>s(e,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(s,n)=>{t.addEventListener(this,s,n),e[s]=n},n=(s,n)=>{e[s]&&(t.removeEventListener(this,s,n),delete e[s])},a=(e,t)=>{this.canvas&&this.resize(e,t)};let r;const i=()=>{n("attach",i),this.attached=!0,this.resize(),s("resize",a),s("detach",r)};r=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),s("attach",i)},t.isAttached(this.canvas)?i():r()}unbindEvents(){oi(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},oi(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const n=s?"set":"remove";let a,r,i,l;for("dataset"===t&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),i=0,l=e.length;i<l;++i){r=e[i];const t=r&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(e=>{let{datasetIndex:t,index:s}=e;const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[s],index:s}});!ci(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,s){const n=this.options.hover,a=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),r=a(t,e),i=s?e:a(e,t);r.length&&this.updateHoverStyle(r,n.mode,!1),i.length&&n.mode&&this.updateHoverStyle(i,n.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",s,n))return;const a=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(a||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:n=[],options:a}=this,r=t,i=this._getActiveElements(e,n,s,r),l=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),o=function(e,t,s,n){return s&&"mouseout"!==e.type?n?t:e:null}(e,this._lastEvent,s,l);s&&(this._lastEvent=null,li(a.onHover,[e,i,this],this),l&&li(a.onClick,[e,i,this],this));const c=!ci(i,n);return(c||t)&&(this._active=i,this._updateHoverStyles(i,n,t)),this._lastEvent=o,c}_getActiveElements(e,t,s,n){if("mouseout"===e.type)return[];if(!s)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}}function Hd(){return oi(Ud.instances,e=>e._plugins.invalidate())}function Wd(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=ri(s.borderCapStyle,t.borderCapStyle),e.setLineDash(ri(s.borderDash,t.borderDash)),e.lineDashOffset=ri(s.borderDashOffset,t.borderDashOffset),e.lineJoin=ri(s.borderJoinStyle,t.borderJoinStyle),e.lineWidth=ri(s.borderWidth,t.borderWidth),e.strokeStyle=ri(s.borderColor,t.borderColor)}function qd(e,t,s){e.lineTo(s.x,s.y)}function Yd(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.length,{start:a=0,end:r=n-1}=s,{start:i,end:l}=t,o=Math.max(a,i),c=Math.min(r,l),d=a<i&&r<i||a>l&&r>l;return{count:n,start:o,loop:t.loop,ilen:c<o&&!d?n+c-o:c-o}}function Qd(e,t,s,n){const{points:a,options:r}=t,{count:i,start:l,loop:o,ilen:c}=Yd(a,s,n),d=function(e){return e.stepped?Al:e.tension||"monotone"===e.cubicInterpolationMode?Dl:qd}(r);let u,h,m,{move:p=!0,reverse:x}=n||{};for(u=0;u<=c;++u)h=a[(l+(x?c-u:u))%i],h.skip||(p?(e.moveTo(h.x,h.y),p=!1):d(e,m,h,x,r.stepped),m=h);return o&&(h=a[(l+(x?c:0))%i],d(e,m,h,x,r.stepped)),!!o}function Kd(e,t,s,n){const a=t.points,{count:r,start:i,ilen:l}=Yd(a,s,n),{move:o=!0,reverse:c}=n||{};let d,u,h,m,p,x,f=0,g=0;const b=e=>(i+(c?l-e:e))%r,y=()=>{m!==p&&(e.lineTo(f,p),e.lineTo(f,m),e.lineTo(f,x))};for(o&&(u=a[b(0)],e.moveTo(u.x,u.y)),d=0;d<=l;++d){if(u=a[b(d)],u.skip)continue;const t=u.x,s=u.y,n=0|t;n===h?(s<m?m=s:s>p&&(p=s),f=(g*f+t)/++g):(y(),e.lineTo(t,s),h=n,g=0,m=p=s),x=s}y()}function Gd(e){const t=e.options,s=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!s?Kd:Qd}const Xd="function"===typeof Path2D;function Jd(e,t,s,n){Xd&&!t.options.segment?function(e,t,s,n){let a=t._path;a||(a=t._path=new Path2D,t.path(a,s,n)&&a.closePath()),Wd(e,t.options),e.stroke(a)}(e,t,s,n):function(e,t,s,n){const{segments:a,options:r}=t,i=Gd(t);for(const l of a)Wd(e,r,l.style),e.beginPath(),i(e,t,l,{start:s,end:s+n-1})&&e.closePath(),e.stroke()}(e,t,s,n)}class Zd extends sd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||"monotone"===s.cubicInterpolationMode)&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;po(this._points,s,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const s=e.points,n=e.options.spanGaps,a=s.length;if(!a)return[];const r=!!e._loop,{start:i,end:l}=function(e,t,s,n){let a=0,r=t-1;if(s&&!n)for(;a<t&&!e[a].skip;)a++;for(;a<t&&e[a].skip;)a++;for(a%=t,s&&(r+=a);r>a&&e[r%t].skip;)r--;return r%=t,{start:a,end:r}}(s,a,r,n);return zo(e,!0===n?[{start:i,end:l,loop:r}]:function(e,t,s,n){const a=e.length,r=[];let i,l=t,o=e[t];for(i=t+1;i<=s;++i){const s=e[i%a];s.skip||s.stop?o.skip||(n=!1,r.push({start:t%a,end:(i-1)%a,loop:n}),t=l=s.stop?i:null):(l=i,o.skip&&(t=i)),o=s}return null!==l&&r.push({start:t%a,end:l%a,loop:n}),r}(s,i,l<i?l+a:l,!!e._fullLoop&&0===i&&l===a-1),s,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,n=e[t],a=this.points,r=Lo(this,{property:t,start:n,end:n});if(!r.length)return;const i=[],l=function(e){return e.stepped?Eo:e.tension||"monotone"===e.cubicInterpolationMode?Mo:Co}(s);let o,c;for(o=0,c=r.length;o<c;++o){const{start:c,end:d}=r[o],u=a[c],h=a[d];if(u===h){i.push(u);continue}const m=l(u,h,Math.abs((n-u[t])/(h[t]-u[t])),s.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,s){return Gd(this)(e,this,t,s)}path(e,t,s){const n=this.segments,a=Gd(this);let r=this._loop;t=t||0,s=s||this.points.length-t;for(const i of n)r&=a(e,this,i,{start:t,end:t+s-1});return!!r}draw(e,t,s,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Jd(e,this,s,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function eu(e,t,s,n){const a=e.options,{[s]:r}=e.getProps([s],n);return Math.abs(t-r)<a.radius+a.hitRadius}class tu extends sd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const n=this.options,{x:a,y:r}=this.getProps(["x","y"],s);return Math.pow(e-a,2)+Math.pow(t-r,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(e,t){return eu(this,e,"x",t)}inYRange(e,t){return eu(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const s=this.options;this.skip||s.radius<.1||!El(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,Sl(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function su(e,t){const{x:s,y:n,base:a,width:r,height:i}=e.getProps(["x","y","base","width","height"],t);let l,o,c,d,u;return e.horizontal?(u=i/2,l=Math.min(s,a),o=Math.max(s,a),c=n-u,d=n+u):(u=r/2,l=s-u,o=s+u,c=Math.min(n,a),d=Math.max(n,a)),{left:l,top:c,right:o,bottom:d}}function nu(e,t,s,n){return e?0:Hi(t,s,n)}function au(e){const t=su(e),s=t.right-t.left,n=t.bottom-t.top,a=function(e,t,s){const n=e.options.borderWidth,a=e.borderSkipped,r=Vl(n);return{t:nu(a.top,r.top,0,s),r:nu(a.right,r.right,0,t),b:nu(a.bottom,r.bottom,0,s),l:nu(a.left,r.left,0,t)}}(e,s/2,n/2),r=function(e,t,s){const{enableBorderRadius:n}=e.getProps(["enableBorderRadius"]),a=e.options.borderRadius,r=Ul(a),i=Math.min(t,s),l=e.borderSkipped,o=n||si(a);return{topLeft:nu(!o||l.top||l.left,r.topLeft,0,i),topRight:nu(!o||l.top||l.right,r.topRight,0,i),bottomLeft:nu(!o||l.bottom||l.left,r.bottomLeft,0,i),bottomRight:nu(!o||l.bottom||l.right,r.bottomRight,0,i)}}(e,s/2,n/2);return{outer:{x:t.left,y:t.top,w:s,h:n,radius:r},inner:{x:t.left+a.l,y:t.top+a.t,w:s-a.l-a.r,h:n-a.t-a.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,r.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(a.b,a.r))}}}}function ru(e,t,s,n){const a=null===t,r=null===s,i=e&&!(a&&r)&&su(e,n);return i&&(a||Wi(t,i.left,i.right))&&(r||Wi(s,i.top,i.bottom))}function iu(e,t){e.rect(t.x,t.y,t.w,t.h)}function lu(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e.x!==s.x?-t:0,a=e.y!==s.y?-t:0,r=(e.x+e.w!==s.x+s.w?t:0)-n,i=(e.y+e.h!==s.y+s.h?t:0)-a;return{x:e.x+n,y:e.y+a,w:e.w+r,h:e.h+i,radius:e.radius}}class ou extends sd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:n}}=this,{inner:a,outer:r}=au(this),i=(l=r.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?Ll:iu;var l;e.save(),r.w===a.w&&r.h===a.h||(e.beginPath(),i(e,lu(r,t,a)),e.clip(),i(e,lu(a,-t,r)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),i(e,lu(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,s){return ru(this,e,t,s)}inXRange(e,t){return ru(this,e,null,t)}inYRange(e,t){return ru(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?s:(s+n)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}const cu=(e,t)=>{let{boxHeight:s=t,boxWidth:n=t}=e;return e.usePointStyle&&(s=Math.min(s,t),n=e.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(t,s)}};class du extends sd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=li(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,s)=>e.sort(t,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const s=e.labels,n=Wl(s.font),a=n.size,r=this._computeTitleHeight(),{boxWidth:i,itemHeight:l}=cu(s,a);let o,c;t.font=n.string,this.isHorizontal()?(o=this.maxWidth,c=this._fitRows(r,a,i,l)+10):(c=this.maxHeight,o=this._fitCols(r,n,i,l)+10),this.width=Math.min(o,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,n){const{ctx:a,maxWidth:r,options:{labels:{padding:i}}}=this,l=this.legendHitBoxes=[],o=this.lineWidths=[0],c=n+i;let d=e;a.textAlign="left",a.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,m)=>{const p=s+t/2+a.measureText(e.text).width;(0===m||o[o.length-1]+p+2*i>r)&&(d+=c,o[o.length-(m>0?0:1)]=0,h+=c,u++),l[m]={left:0,top:h,row:u,width:p,height:n},o[o.length-1]+=p+i}),d}_fitCols(e,t,s,n){const{ctx:a,maxHeight:r,options:{labels:{padding:i}}}=this,l=this.legendHitBoxes=[],o=this.columnSizes=[],c=r-e;let d=i,u=0,h=0,m=0,p=0;return this.legendItems.forEach((e,r)=>{const{itemWidth:x,itemHeight:f}=function(e,t,s,n,a){const r=function(e,t,s,n){let a=e.text;a&&"string"!==typeof a&&(a=a.reduce((e,t)=>e.length>t.length?e:t));return t+s.size/2+n.measureText(a).width}(n,e,t,s),i=function(e,t,s){let n=e;"string"!==typeof t.text&&(n=uu(t,s));return n}(a,n,t.lineHeight);return{itemWidth:r,itemHeight:i}}(s,t,a,e,n);r>0&&h+f+2*i>c&&(d+=u+i,o.push({width:u,height:h}),m+=u+i,p++,u=h=0),l[r]={left:m,top:h,col:p,width:x,height:f},u=Math.max(u,x),h+=f+i}),d+=u,o.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:n},rtl:a}}=this,r=Po(a,this.left,this.width);if(this.isHorizontal()){let a=0,i=tl(s,this.left+n,this.right-this.lineWidths[a]);for(const l of t)a!==l.row&&(a=l.row,i=tl(s,this.left+n,this.right-this.lineWidths[a])),l.top+=this.top+e+n,l.left=r.leftForLtr(r.x(i),l.width),i+=l.width+n}else{let a=0,i=tl(s,this.top+e+n,this.bottom-this.columnSizes[a].height);for(const l of t)l.col!==a&&(a=l.col,i=tl(s,this.top+e+n,this.bottom-this.columnSizes[a].height)),l.top=i,l.left+=this.left+n,l.left=r.leftForLtr(r.x(l.left),l.width),i+=l.height+n}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ml(e,this),this._draw(),Pl(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:n}=this,{align:a,labels:r}=e,i=Nl.color,l=Po(e.rtl,this.left,this.width),o=Wl(r.font),{padding:c}=r,d=o.size,u=d/2;let h;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=o.string;const{boxWidth:m,boxHeight:p,itemHeight:x}=cu(r,d),f=this.isHorizontal(),g=this._computeTitleHeight();h=f?{x:tl(a,this.left+c,this.right-s[0]),y:this.top+c+g,line:0}:{x:this.left+c,y:tl(a,this.top+g+c,this.bottom-t[0].height),line:0},Ao(this.ctx,e.textDirection);const b=x+c;this.legendItems.forEach((y,v)=>{n.strokeStyle=y.fontColor,n.fillStyle=y.fontColor;const j=n.measureText(y.text).width,N=l.textAlign(y.textAlign||(y.textAlign=r.textAlign)),w=m+u+j;let _=h.x,k=h.y;l.setWidth(this.width),f?v>0&&_+w+c>this.right&&(k=h.y+=b,h.line++,_=h.x=tl(a,this.left+c,this.right-s[h.line])):v>0&&k+b>this.bottom&&(_=h.x=_+t[h.line].width+c,h.line++,k=h.y=tl(a,this.top+g+c,this.bottom-t[h.line].height));if(function(e,t,s){if(isNaN(m)||m<=0||isNaN(p)||p<0)return;n.save();const a=ri(s.lineWidth,1);if(n.fillStyle=ri(s.fillStyle,i),n.lineCap=ri(s.lineCap,"butt"),n.lineDashOffset=ri(s.lineDashOffset,0),n.lineJoin=ri(s.lineJoin,"miter"),n.lineWidth=a,n.strokeStyle=ri(s.strokeStyle,i),n.setLineDash(ri(s.lineDash,[])),r.usePointStyle){const i={radius:p*Math.SQRT2/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:a},o=l.xPlus(e,m/2);Cl(n,i,o,t+u,r.pointStyleWidth&&m)}else{const r=t+Math.max((d-p)/2,0),i=l.leftForLtr(e,m),o=Ul(s.borderRadius);n.beginPath(),Object.values(o).some(e=>0!==e)?Ll(n,{x:i,y:r,w:m,h:p,radius:o}):n.rect(i,r,m,p),n.fill(),0!==a&&n.stroke()}n.restore()}(l.x(_),k,y),_=((e,t,s,n)=>e===(n?"left":"right")?s:"center"===e?(t+s)/2:t)(N,_+m+u,f?_+w:this.right,e.rtl),function(e,t,s){Ol(n,s.text,e,t+x/2,o,{strikethrough:s.hidden,textAlign:l.textAlign(s.textAlign)})}(l.x(_),k,y),f)h.x+=w+c;else if("string"!==typeof y.text){const e=o.lineHeight;h.y+=uu(y,e)+c}else h.y+=b}),Do(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=Wl(t.font),n=Hl(t.padding);if(!t.display)return;const a=Po(e.rtl,this.left,this.width),r=this.ctx,i=t.position,l=s.size/2,o=n.top+l;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+o,d=tl(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=o+tl(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=tl(i,d,d+u);r.textAlign=a.textAlign(el(i)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=s.string,Ol(r,t.text,h,c,s)}_computeTitleHeight(){const e=this.options.title,t=Wl(e.font),s=Hl(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,n,a;if(Wi(e,this.left,this.right)&&Wi(t,this.top,this.bottom))for(a=this.legendHitBoxes,s=0;s<a.length;++s)if(n=a[s],Wi(e,n.left,n.left+n.width)&&Wi(t,n.top,n.top+n.height))return this.legendItems[s];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const n=this._hoveredItem,a=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(n,s);n&&!a&&li(t.onLeave,[e,n,this],this),this._hoveredItem=s,s&&!a&&li(t.onHover,[e,s,this],this)}else s&&li(t.onClick,[e,s,this],this)}}function uu(e,t){return t*(e.text?e.text.length:0)}var hu={id:"legend",_element:du,start(e,t,s){const n=e.legend=new du({ctx:e.ctx,options:s,chart:e});Ic.configure(e,n,s),Ic.addBox(e,n)},stop(e){Ic.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,s){const n=e.legend;Ic.configure(e,n,s),n.options=s},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,s){const n=t.datasetIndex,a=s.chart;a.isDatasetVisible(n)?(a.hide(n),t.hidden=!0):(a.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:a,color:r,useBorderRadius:i,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const o=e.controller.getStyle(s?0:void 0),c=Hl(o.borderWidth);return{text:t[e.index].label,fillStyle:o.backgroundColor,fontColor:r,hidden:!e.visible,lineCap:o.borderCapStyle,lineDash:o.borderDash,lineDashOffset:o.borderDashOffset,lineJoin:o.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:o.borderColor,pointStyle:n||o.pointStyle,rotation:o.rotation,textAlign:a||o.textAlign,borderRadius:i&&(l||o.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class mu extends sd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const n=ti(s.text)?s.text.length:1;this._padding=Hl(s.padding);const a=n*Wl(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:s,bottom:n,right:a,options:r}=this,i=r.align;let l,o,c,d=0;return this.isHorizontal()?(o=tl(i,s,a),c=t+e,l=a-s):("left"===r.position?(o=s+e,c=tl(i,n,t),d=-.5*Ni):(o=a-e,c=tl(i,t,n),d=.5*Ni),l=n-t),{titleX:o,titleY:c,maxWidth:l,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=Wl(t.font),n=s.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:i,rotation:l}=this._drawArgs(n);Ol(e,t.text,0,0,s,{color:t.color,maxWidth:i,rotation:l,textAlign:el(t.align),textBaseline:"middle",translation:[a,r]})}}var pu={id:"title",_element:mu,start(e,t,s){!function(e,t){const s=new mu({ctx:e.ctx,options:t,chart:e});Ic.configure(e,s,t),Ic.addBox(e,s),e.titleBlock=s}(e,s)},stop(e){const t=e.titleBlock;Ic.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,s){const n=e.titleBlock;Ic.configure(e,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const xu={average(e){if(!e.length)return!1;let t,s,n=new Set,a=0,r=0;for(t=0,s=e.length;t<s;++t){const s=e[t].element;if(s&&s.hasValue()){const e=s.tooltipPosition();n.add(e.x),a+=e.y,++r}}if(0===r||0===n.size)return!1;const i=[...n].reduce((e,t)=>e+t)/n.size;return{x:i,y:a/r}},nearest(e,t){if(!e.length)return!1;let s,n,a,r=t.x,i=t.y,l=Number.POSITIVE_INFINITY;for(s=0,n=e.length;s<n;++s){const n=e[s].element;if(n&&n.hasValue()){const e=$i(t,n.getCenterPoint());e<l&&(l=e,a=n)}}if(a){const e=a.tooltipPosition();r=e.x,i=e.y}return{x:r,y:i}}};function fu(e,t){return t&&(ti(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function gu(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function bu(e,t){const{element:s,datasetIndex:n,index:a}=t,r=e.getDatasetMeta(n).controller,{label:i,value:l}=r.getLabelAndValue(a);return{chart:e,label:i,parsed:r.getParsed(a),raw:e.data.datasets[n].data[a],formattedValue:l,dataset:r.getDataset(),dataIndex:a,datasetIndex:n,element:s}}function yu(e,t){const s=e.chart.ctx,{body:n,footer:a,title:r}=e,{boxWidth:i,boxHeight:l}=t,o=Wl(t.bodyFont),c=Wl(t.titleFont),d=Wl(t.footerFont),u=r.length,h=a.length,m=n.length,p=Hl(t.padding);let x=p.height,f=0,g=n.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(g+=e.beforeBody.length+e.afterBody.length,u&&(x+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),g){x+=m*(t.displayColors?Math.max(l,o.lineHeight):o.lineHeight)+(g-m)*o.lineHeight+(g-1)*t.bodySpacing}h&&(x+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const y=function(e){f=Math.max(f,s.measureText(e).width+b)};return s.save(),s.font=c.string,oi(e.title,y),s.font=o.string,oi(e.beforeBody.concat(e.afterBody),y),b=t.displayColors?i+2+t.boxPadding:0,oi(n,e=>{oi(e.before,y),oi(e.lines,y),oi(e.after,y)}),b=0,s.font=d.string,oi(e.footer,y),s.restore(),f+=p.width,{width:f,height:x}}function vu(e,t,s,n){const{x:a,width:r}=s,{width:i,chartArea:{left:l,right:o}}=e;let c="center";return"center"===n?c=a<=(l+o)/2?"left":"right":a<=r/2?c="left":a>=i-r/2&&(c="right"),function(e,t,s,n){const{x:a,width:r}=n,i=s.caretSize+s.caretPadding;return"left"===e&&a+r+i>t.width||"right"===e&&a-r-i<0||void 0}(c,e,t,s)&&(c="center"),c}function ju(e,t,s){const n=s.yAlign||t.yAlign||function(e,t){const{y:s,height:n}=t;return s<n/2?"top":s>e.height-n/2?"bottom":"center"}(e,s);return{xAlign:s.xAlign||t.xAlign||vu(e,t,s,n),yAlign:n}}function Nu(e,t,s,n){const{caretSize:a,caretPadding:r,cornerRadius:i}=e,{xAlign:l,yAlign:o}=s,c=a+r,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Ul(i);let p=function(e,t){let{x:s,width:n}=e;return"right"===t?s-=n:"center"===t&&(s-=n/2),s}(t,l);const x=function(e,t,s){let{y:n,height:a}=e;return"top"===t?n+=s:n-="bottom"===t?a+s:a/2,n}(t,o,c);return"center"===o?"left"===l?p+=c:"right"===l&&(p-=c):"left"===l?p-=Math.max(d,h)+a:"right"===l&&(p+=Math.max(u,m)+a),{x:Hi(p,0,n.width-t.width),y:Hi(x,0,n.height-t.height)}}function wu(e,t,s){const n=Hl(s.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-n.right:e.x+n.left}function _u(e){return fu([],gu(e))}function ku(e,t){const s=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return s?e.override(s):e}const Su={beforeTitle:Jr,title(e){if(e.length>0){const t=e[0],s=t.chart.data.labels,n=s?s.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return s[t.dataIndex]}return""},afterTitle:Jr,beforeBody:Jr,beforeLabel:Jr,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const s=e.formattedValue;return ei(s)||(t+=s),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Jr,afterBody:Jr,beforeFooter:Jr,footer:Jr,afterFooter:Jr};function Cu(e,t,s,n){const a=e[t].call(s,n);return"undefined"===typeof a?Su[t].call(s,n):a}class Eu extends sd{static positioners=(()=>xu)();constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&t.options.animation&&s.animations,a=new Yo(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,s=this._tooltipItems,Yl(e,{tooltip:t,tooltipItems:s,type:"tooltip"})));var e,t,s}getTitle(e,t){const{callbacks:s}=t,n=Cu(s,"beforeTitle",this,e),a=Cu(s,"title",this,e),r=Cu(s,"afterTitle",this,e);let i=[];return i=fu(i,gu(n)),i=fu(i,gu(a)),i=fu(i,gu(r)),i}getBeforeBody(e,t){return _u(Cu(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,n=[];return oi(e,e=>{const t={before:[],lines:[],after:[]},a=ku(s,e);fu(t.before,gu(Cu(a,"beforeLabel",this,e))),fu(t.lines,Cu(a,"label",this,e)),fu(t.after,gu(Cu(a,"afterLabel",this,e))),n.push(t)}),n}getAfterBody(e,t){return _u(Cu(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,n=Cu(s,"beforeFooter",this,e),a=Cu(s,"footer",this,e),r=Cu(s,"afterFooter",this,e);let i=[];return i=fu(i,gu(n)),i=fu(i,gu(a)),i=fu(i,gu(r)),i}_createItems(e){const t=this._active,s=this.chart.data,n=[],a=[],r=[];let i,l,o=[];for(i=0,l=t.length;i<l;++i)o.push(bu(this.chart,t[i]));return e.filter&&(o=o.filter((t,n,a)=>e.filter(t,n,a,s))),e.itemSort&&(o=o.sort((t,n)=>e.itemSort(t,n,s))),oi(o,t=>{const s=ku(e.callbacks,t);n.push(Cu(s,"labelColor",this,t)),a.push(Cu(s,"labelPointStyle",this,t)),r.push(Cu(s,"labelTextColor",this,t))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=r,this.dataPoints=o,o}update(e,t){const s=this.options.setContext(this.getContext()),n=this._active;let a,r=[];if(n.length){const e=xu[s.position].call(this,n,this._eventPosition);r=this._createItems(s),this.title=this.getTitle(r,s),this.beforeBody=this.getBeforeBody(r,s),this.body=this.getBody(r,s),this.afterBody=this.getAfterBody(r,s),this.footer=this.getFooter(r,s);const t=this._size=yu(this,s),i=Object.assign({},e,t),l=ju(this.chart,s,i),o=Nu(s,i,l,this.chart);this.xAlign=l.xAlign,this.yAlign=l.yAlign,a={opacity:1,x:o.x,y:o.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(a={opacity:0});this._tooltipItems=r,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,n){const a=this.getCaretPosition(e,s,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,s){const{xAlign:n,yAlign:a}=this,{caretSize:r,cornerRadius:i}=s,{topLeft:l,topRight:o,bottomLeft:c,bottomRight:d}=Ul(i),{x:u,y:h}=e,{width:m,height:p}=t;let x,f,g,b,y,v;return"center"===a?(y=h+p/2,"left"===n?(x=u,f=x-r,b=y+r,v=y-r):(x=u+m,f=x+r,b=y-r,v=y+r),g=x):(f="left"===n?u+Math.max(l,c)+r:"right"===n?u+m-Math.max(o,d)-r:this.caretX,"top"===a?(b=h,y=b-r,x=f-r,g=f+r):(b=h+p,y=b+r,x=f+r,g=f-r),v=b),{x1:x,x2:f,x3:g,y1:b,y2:y,y3:v}}drawTitle(e,t,s){const n=this.title,a=n.length;let r,i,l;if(a){const o=Po(s.rtl,this.x,this.width);for(e.x=wu(this,s.titleAlign,s),t.textAlign=o.textAlign(s.titleAlign),t.textBaseline="middle",r=Wl(s.titleFont),i=s.titleSpacing,t.fillStyle=s.titleColor,t.font=r.string,l=0;l<a;++l)t.fillText(n[l],o.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i,l+1===a&&(e.y+=s.titleMarginBottom-i)}}_drawColorBox(e,t,s,n,a){const r=this.labelColors[s],i=this.labelPointStyles[s],{boxHeight:l,boxWidth:o}=a,c=Wl(a.bodyFont),d=wu(this,"left",a),u=n.x(d),h=l<c.lineHeight?(c.lineHeight-l)/2:0,m=t.y+h;if(a.usePointStyle){const t={radius:Math.min(o,l)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},s=n.leftForLtr(u,o)+o/2,c=m+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Sl(e,t,s,c),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Sl(e,t,s,c)}else{e.lineWidth=si(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const t=n.leftForLtr(u,o),s=n.leftForLtr(n.xPlus(u,1),o-2),i=Ul(r.borderRadius);Object.values(i).some(e=>0!==e)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,Ll(e,{x:t,y:m,w:o,h:l,radius:i}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),Ll(e,{x:s,y:m+1,w:o-2,h:l-2,radius:i}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(t,m,o,l),e.strokeRect(t,m,o,l),e.fillStyle=r.backgroundColor,e.fillRect(s,m+1,o-2,l-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:n}=this,{bodySpacing:a,bodyAlign:r,displayColors:i,boxHeight:l,boxWidth:o,boxPadding:c}=s,d=Wl(s.bodyFont);let u=d.lineHeight,h=0;const m=Po(s.rtl,this.x,this.width),p=function(s){t.fillText(s,m.x(e.x+h),e.y+u/2),e.y+=u+a},x=m.textAlign(r);let f,g,b,y,v,j,N;for(t.textAlign=r,t.textBaseline="middle",t.font=d.string,e.x=wu(this,x,s),t.fillStyle=s.bodyColor,oi(this.beforeBody,p),h=i&&"right"!==x?"center"===r?o/2+c:o+2+c:0,y=0,j=n.length;y<j;++y){for(f=n[y],g=this.labelTextColors[y],t.fillStyle=g,oi(f.before,p),b=f.lines,i&&b.length&&(this._drawColorBox(t,e,y,m,s),u=Math.max(d.lineHeight,l)),v=0,N=b.length;v<N;++v)p(b[v]),u=d.lineHeight;oi(f.after,p)}h=0,u=d.lineHeight,oi(this.afterBody,p),e.y-=a}drawFooter(e,t,s){const n=this.footer,a=n.length;let r,i;if(a){const l=Po(s.rtl,this.x,this.width);for(e.x=wu(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=l.textAlign(s.footerAlign),t.textBaseline="middle",r=Wl(s.footerFont),t.fillStyle=s.footerColor,t.font=r.string,i=0;i<a;++i)t.fillText(n[i],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+s.footerSpacing}}drawBackground(e,t,s,n){const{xAlign:a,yAlign:r}=this,{x:i,y:l}=e,{width:o,height:c}=s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Ul(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(i+d,l),"top"===r&&this.drawCaret(e,t,s,n),t.lineTo(i+o-u,l),t.quadraticCurveTo(i+o,l,i+o,l+u),"center"===r&&"right"===a&&this.drawCaret(e,t,s,n),t.lineTo(i+o,l+c-m),t.quadraticCurveTo(i+o,l+c,i+o-m,l+c),"bottom"===r&&this.drawCaret(e,t,s,n),t.lineTo(i+h,l+c),t.quadraticCurveTo(i,l+c,i,l+c-h),"center"===r&&"left"===a&&this.drawCaret(e,t,s,n),t.lineTo(i,l+d),t.quadraticCurveTo(i,l,i+d,l),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,n=s&&s.x,a=s&&s.y;if(n||a){const s=xu[e.position].call(this,this._active,this._eventPosition);if(!s)return;const r=this._size=yu(this,e),i=Object.assign({},s,this._size),l=ju(t,e,i),o=Nu(e,i,l,t);n._to===o.x&&a._to===o.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=r.width,this.height=r.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,o))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const r=Hl(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=s,this.drawBackground(a,e,n,t),Ao(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Do(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,n=e.map(e=>{let{datasetIndex:t,index:s}=e;const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[s],index:s}}),a=!ci(s,n),r=this._positionChanged(n,t);(a||r)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,s),i=this._positionChanged(r,e),l=t||!ci(r,a)||i;return l&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,s,n){const a=this.options;if("mouseout"===e.type)return[];if(!n)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const r=this.chart.getElementsAtEventForMode(e,a.mode,a,s);return a.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:s,caretY:n,options:a}=this,r=xu[a.position].call(this,e,t);return!1!==r&&(s!==r.x||n!==r.y)}}var Mu={id:"tooltip",_element:Eu,positioners:xu,afterInit(e,t,s){s&&(e.tooltip=new Eu({chart:e,options:s}))},beforeUpdate(e,t,s){e.tooltip&&e.tooltip.initialize(s)},reset(e,t,s){e.tooltip&&e.tooltip.initialize(s)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const s={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",s)}},afterEvent(e,t){if(e.tooltip){const s=t.replay;e.tooltip.handleEvent(t.event,s,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Su},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Pu(e,t,s,n){const a=e.indexOf(t);if(-1===a)return((e,t,s,n)=>("string"===typeof t?(s=e.push(t)-1,n.unshift({index:s,label:t})):isNaN(t)&&(s=null),s))(e,t,s,n);return a!==e.lastIndexOf(t)?s:a}function Au(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Du extends hd{static id="category";static defaults=(()=>({ticks:{callback:Au}}))();constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:s,label:n}of t)e[s]===n&&e.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ei(e))return null;const s=this.getLabels();return((e,t)=>null===e?null:Hi(Math.round(e),0,t))(t=isFinite(t)&&s[t]===e?t:Pu(s,e,ri(t,e),this._addedLabels),s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(s=0),t||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,n=[];let a=this.getLabels();a=0===e&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let r=e;r<=t;r++)n.push({value:r});return n}getLabelForValue(e){return Au.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function Tu(e,t){const s=[],{bounds:n,step:a,min:r,max:i,precision:l,count:o,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=a||1,m=c-1,{min:p,max:x}=t,f=!ei(r),g=!ei(i),b=!ei(o),y=(x-p)/(d+1);let v,j,N,w,_=Ti((x-p)/m/h)*h;if(_<1e-14&&!f&&!g)return[{value:p},{value:x}];w=Math.ceil(x/_)-Math.floor(p/_),w>m&&(_=Ti(w*_/m/h)*h),ei(l)||(v=Math.pow(10,l),_=Math.ceil(_*v)/v),"ticks"===n?(j=Math.floor(p/_)*_,N=Math.ceil(x/_)*_):(j=p,N=x),f&&g&&a&&function(e,t){const s=Math.round(e);return s-t<=e&&s+t>=e}((i-r)/a,_/1e3)?(w=Math.round(Math.min((i-r)/_,c)),_=(i-r)/w,j=r,N=i):b?(j=f?r:j,N=g?i:N,w=o-1,_=(N-j)/w):(w=(N-j)/_,w=Di(w,Math.round(w),_/1e3)?Math.round(w):Math.ceil(w));const k=Math.max(Ii(_),Ii(j));v=Math.pow(10,ei(l)?k:l),j=Math.round(j*v)/v,N=Math.round(N*v)/v;let S=0;for(f&&(u&&j!==r?(s.push({value:r}),j<r&&S++,Di(Math.round((j+S*_)*v)/v,r,Ru(r,y,e))&&S++):j<r&&S++);S<w;++S){const e=Math.round((j+S*_)*v)/v;if(g&&e>i)break;s.push({value:e})}return g&&u&&N!==i?s.length&&Di(s[s.length-1].value,i,Ru(i,y,e))?s[s.length-1].value=i:s.push({value:i}):g&&N!==i||s.push({value:N}),s}function Ru(e,t,s){let{horizontal:n,minRotation:a}=s;const r=Li(a),i=(n?Math.sin(r):Math.cos(r))||.001,l=.75*t*(""+e).length;return Math.min(t/i,l)}class Ou extends hd{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ei(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:n,max:a}=this;const r=e=>n=t?n:e,i=e=>a=s?a:e;if(e){const e=Ai(n),t=Ai(a);e<0&&t<0?i(0):e>0&&t>0&&r(0)}if(n===a){let t=0===a?1:Math.abs(.05*a);i(a+t),e||r(n-t)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:s,stepSize:n}=e;return n?(t=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,t>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${t} ticks. Limiting to 1000.`),t=1e3)):(t=this.computeTickLimit(),s=s||11),s&&(t=Math.min(s,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n=Tu({maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Oi(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const n=(s-t)/Math.max(e.length-1,1)/2;t-=n,s+=n}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return pl(e,this.chart.options.locale,this.options.ticks.format)}}class Lu extends Ou{static id="linear";static defaults=(()=>({ticks:{callback:fl.formatters.numeric}}))();determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ni(e)?e:0,this.max=ni(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=Li(this.options.ticks.minRotation),n=(e?Math.sin(s):Math.cos(s))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}fl.formatters.logarithmic;fl.formatters.numeric;const zu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Iu=Object.keys(zu);function Fu(e,t){return e-t}function $u(e,t){if(ei(t))return null;const s=e._adapter,{parser:n,round:a,isoWeekday:r}=e._parseOpts;let i=t;return"function"===typeof n&&(i=n(i)),ni(i)||(i="string"===typeof n?s.parse(i,n):s.parse(i)),null===i?null:(a&&(i="week"!==a||!Ri(r)&&!0!==r?s.startOf(i,a):s.startOf(i,"isoWeek",r)),+i)}function Bu(e,t,s,n){const a=Iu.length;for(let r=Iu.indexOf(e);r<a-1;++r){const e=zu[Iu[r]],a=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((s-t)/(a*e.size))<=n)return Iu[r]}return Iu[a-1]}function Vu(e,t,s){if(s){if(s.length){const{lo:n,hi:a}=qi(s,t);e[s[n]>=t?s[n]:s[a]]=!0}}else e[t]=!0}function Uu(e,t,s){const n=[],a={},r=t.length;let i,l;for(i=0;i<r;++i)l=t[i],a[l]=i,n.push({value:l,major:!1});return 0!==r&&s?function(e,t,s,n){const a=e._adapter,r=+a.startOf(t[0].value,n),i=t[t.length-1].value;let l,o;for(l=r;l<=i;l=+a.add(l,1,n))o=s[l],o>=0&&(t[o].major=!0);return t}(e,n,a,s):n}class Hu extends hd{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=e.time||(e.time={}),n=this._adapter=new bc(e.adapters.date);n.init(t),pi(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:$u(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:n,max:a,minDefined:r,maxDefined:i}=this.getUserBounds();function l(e){r||isNaN(e.min)||(n=Math.min(n,e.min)),i||isNaN(e.max)||(a=Math.max(a,e.max))}r&&i||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),n=ni(n)&&!isNaN(n)?n:+t.startOf(Date.now(),s),a=ni(a)&&!isNaN(a)?a:+t.endOf(Date.now(),s)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,n="labels"===s.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,r=function(e,t,s){let n=0,a=e.length;for(;n<a&&e[n]<t;)n++;for(;a>n&&e[a-1]>s;)a--;return n>0||a<e.length?e.slice(n,a):e}(n,a,this.max);return this._unit=t.unit||(s.autoSkip?Bu(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):function(e,t,s,n,a){for(let r=Iu.length-1;r>=Iu.indexOf(s);r--){const s=Iu[r];if(zu[s].common&&e._adapter.diff(a,n,s)>=t-1)return s}return Iu[s?Iu.indexOf(s):0]}(this,r.length,t.minUnit,this.min,this.max)),this._majorUnit=s.major.enabled&&"year"!==this._unit?function(e){for(let t=Iu.indexOf(e)+1,s=Iu.length;t<s;++t)if(zu[Iu[t]].common)return Iu[t]}(this._unit):void 0,this.initOffsets(n),e.reverse&&r.reverse(),Uu(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=0,a=0;this.options.offset&&s.length&&(e=this.getDecimalForValue(s[0]),n=1===s.length?1-e:(this.getDecimalForValue(s[1])-e)/2,t=this.getDecimalForValue(s[s.length-1]),a=1===s.length?t:(t-this.getDecimalForValue(s[s.length-2]))/2);const r=s.length<3?.5:.25;n=Hi(n,0,r),a=Hi(a,0,r),this._offsets={start:n,end:a,factor:1/(n+1+a)}}_generate(){const e=this._adapter,t=this.min,s=this.max,n=this.options,a=n.time,r=a.unit||Bu(a.minUnit,t,s,this._getLabelCapacity(t)),i=ri(n.ticks.stepSize,1),l="week"===r&&a.isoWeekday,o=Ri(l)||!0===l,c={};let d,u,h=t;if(o&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,o?"day":r),e.diff(s,t,r)>1e5*i)throw new Error(t+" and "+s+" are too far apart with stepSize of "+i+" "+r);const m="data"===n.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<s;d=+e.add(d,i,r),u++)Vu(c,d,m);return d!==s&&"ticks"!==n.bounds&&1!==u||Vu(c,d,m),Object.keys(c).sort(Fu).map(e=>+e)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,n=this._unit,a=t||s[n];return this._adapter.format(e,a)}_tickFormatFunction(e,t,s,n){const a=this.options,r=a.ticks.callback;if(r)return li(r,[e,t,s],this);const i=a.time.displayFormats,l=this._unit,o=this._majorUnit,c=l&&i[l],d=o&&i[o],u=s[t],h=o&&d&&u&&u.major;return this._adapter.format(e,n||(h?d:c))}generateTickLabels(e){let t,s,n;for(t=0,s=e.length;t<s;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,n=Li(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),r=Math.sin(n),i=this._resolveTickFontOptions(0).size;return{w:s*a+i*r,h:s*r+i*a}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,n=s[t.unit]||s.millisecond,a=this._tickFormatFunction(e,0,Uu(this,[e],this._majorUnit),n),r=this._getLabelSize(a),i=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,s=this._cache.data||[];if(s.length)return s;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,t=n.length;e<t;++e)s=s.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const n=this.getLabels();for(t=0,s=n.length;t<s;++t)e.push($u(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Xi(e.sort(Fu))}}const Wu="label";function qu(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Yu(e,t){e.labels=t}function Qu(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Wu;const n=[];e.datasets=t.map(t=>{const a=e.datasets.find(e=>e[s]===t[s]);return a&&t.data&&!n.includes(a)?(n.push(a),Object.assign(a,t),a):{...t}})}function Ku(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wu;const s={labels:[],datasets:[]};return Yu(s,e.labels),Qu(s,e.datasets,t),s}function Gu(e,t){const{height:s=150,width:n=300,redraw:a=!1,datasetIdKey:i,type:l,data:o,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...m}=e,p=(0,r.useRef)(null),x=(0,r.useRef)(null),f=()=>{p.current&&(x.current=new Ud(p.current,{type:l,data:Ku(o,i),options:c&&{...c},plugins:d}),qu(t,x.current))},g=()=>{qu(t,null),x.current&&(x.current.destroy(),x.current=null)};return(0,r.useEffect)(()=>{!a&&x.current&&c&&function(e,t){const s=e.options;s&&t&&Object.assign(s,t)}(x.current,c)},[a,c]),(0,r.useEffect)(()=>{!a&&x.current&&Yu(x.current.config.data,o.labels)},[a,o.labels]),(0,r.useEffect)(()=>{!a&&x.current&&o.datasets&&Qu(x.current.config.data,o.datasets,i)},[a,o.datasets]),(0,r.useEffect)(()=>{x.current&&(a?(g(),setTimeout(f)):x.current.update(h))},[a,c,o.labels,o.datasets,h]),(0,r.useEffect)(()=>{x.current&&(g(),setTimeout(f))},[l]),(0,r.useEffect)(()=>(f(),()=>g()),[]),r.createElement("canvas",{ref:p,role:"img",height:s,width:n,...m},u)}const Xu=(0,r.forwardRef)(Gu);function Ju(e,t){return Ud.register(t),(0,r.forwardRef)((t,s)=>r.createElement(Xu,{...t,ref:s,type:e}))}const Zu=Ju("line",xc),eh=Ju("bar",pc);Ud.register(Du,Lu,tu,Zd,ou,pu,Mu,hu);const th=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(!1),a=async()=>{n(!0);try{var e;const s=await Qn.get("https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com/api/facturation/top-patients?limit=10");t((null===(e=s.data)||void 0===e?void 0:e.top_patients)||[])}catch(s){console.error("Error fetching top patients:",s),Pt.error("Erreur lors du chargement des patients rentables")}finally{n(!1)}},i=e=>parseFloat(e||0).toFixed(2);return(0,r.useEffect)(()=>{a()},[]),s?(0,sa.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,sa.jsx)(Fa,{className:"w-6 h-6 animate-spin text-purple-500"}),(0,sa.jsx)("span",{className:"ml-2 text-gray-600",children:"Chargement des patients..."})]}):(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsxs)("h4",{className:"font-semibold text-yellow-900 flex items-center",children:[(0,sa.jsx)(hr,{className:"w-4 h-4 mr-2"}),"Top 10 Patients Rentables"]}),(0,sa.jsxs)("button",{onClick:a,disabled:s,className:"btn-outline text-xs px-2 py-1",children:[(0,sa.jsx)(Fa,{className:"w-3 h-3 mr-1 "+(s?"animate-spin":"")}),"Actualiser"]})]}),e.length>0?(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:e.slice(0,6).map((e,t)=>(0,sa.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-yellow-100 hover:shadow-sm transition-shadow",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold "+(0===t?"bg-yellow-500":1===t?"bg-gray-400":2===t?"bg-orange-500":"bg-blue-500"),children:t+1}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"font-medium text-gray-900 text-sm",children:[e.patient.prenom," ",e.patient.nom]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-600",children:[e.nb_payments," paiement",e.nb_payments>1?"s":""]})]})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsxs)("div",{className:"font-bold text-green-600 text-sm",children:[i(e.total_montant)," TND"]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500",children:["Moy: ",i(e.moyenne_paiement)," TND"]})]})]},e.patient.id))}):(0,sa.jsxs)("div",{className:"text-center py-6 text-yellow-700",children:[(0,sa.jsx)(hr,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),(0,sa.jsx)("p",{className:"text-sm",children:"Aucune donn\xe9e de patients disponible"})]})]})},sh=e=>{var t,s,n,a,i,l,o,c,d,u,h,m,p,x,f,g,b,y,v;let{user:j}=e;const N="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com",[w,_]=(0,r.useState)({}),[k,S]=(0,r.useState)([]),[C,E]=(0,r.useState)([]),[M,P]=(0,r.useState)(null),[A,D]=(0,r.useState)(!0),[T,R]=(0,r.useState)("dashboard"),[O,L]=(0,r.useState)((new Date).toISOString().split("T")[0]),[z,I]=(0,r.useState)(null),[F,$]=(0,r.useState)(null),[B,V]=(0,r.useState)(null),[U,H]=(0,r.useState)([]),[W,q]=(0,r.useState)([]),[Y,Q]=(0,r.useState)({patientName:"",dateDebut:"",dateFin:"",statutPaiement:"",assure:"",typeConsultation:""}),[K,G]=(0,r.useState)([]),[X,J]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(!1),[te,se]=(0,r.useState)(null),[ne,ae]=(0,r.useState)(!1),[re,ie]=(0,r.useState)(null),[le,oe]=(0,r.useState)([]),[ce,de]=(0,r.useState)(!1),[ue,he]=(0,r.useState)(null),[me,pe]=(0,r.useState)(!1),[xe,fe]=(0,r.useState)(!1),[ge,be]=(0,r.useState)(null),[ye,ve]=(0,r.useState)(!1),[je,Ne]=(0,r.useState)(null),[we,_e]=(0,r.useState)([]),[ke,Se]=(0,r.useState)(!1),[Ce,Ee]=(0,r.useState)({montant:"",type_mouvement:"ajout",date:(new Date).toISOString().split("T")[0],motif:""}),[Me,Pe]=(0,r.useState)(!1),[Ae,De]=(0,r.useState)({dateDebut:"",dateFin:"",typeVisite:"tous",typeAssurance:"tous",inclureNomPatient:!0,inclureDate:!0,inclureMontant:!0,inclureType:!0,inclureAssurance:!0,inclureStatutPaiement:!0,inclureStatistiques:!0,inclureEvolution:!0,includrePredictions:!0,formatRapportComptable:!1}),[Te,Re]=(0,r.useState)(null),[Oe,Le]=(0,r.useState)(null),[ze,Ie]=(0,r.useState)(null),[Fe,$e]=(0,r.useState)([]),[Be,Ve]=(0,r.useState)(null);(0,r.useEffect)(()=>{"predictions"!==T||Te&&void 0!==Te.status||Oe&&void 0!==Oe.status||A||(console.log("\ud83d\ude80 Triggering predictions data load for first time"),Ue())},[T,Te,Oe,A]);const Ue=async()=>{D(!0);try{console.log("\ud83d\udd04 Loading all predictions data...");const[e,t,s,n,a]=await Promise.all([Qe(),Ke(),Ge(),Xe(),Ze()]);console.log("\ud83d\udcca Predictions results:",{predictions:!!e,analysis:!!t,seasonal:!!s,peaks:(null===n||void 0===n?void 0:n.length)||0,revenue:!!a}),Re(e||{status:"no_data"}),Le(t||{status:"no_data"}),Ie(s||{status:"no_data"}),$e(Array.isArray(n)&&n.length>0?n:[]),Ve(a||{status:"no_data"}),console.log("\u2705 All predictions data loaded successfully")}catch(e){console.error("\u274c Error loading predictions data:",e),Pt.error("Erreur lors du chargement des donn\xe9es de pr\xe9diction"),Re({status:"error",error:e.message}),Le({status:"error",error:e.message}),Ie({status:"error",error:e.message}),$e([]),Ve({status:"error",error:e.message})}finally{D(!1)}};(0,r.useEffect)(()=>{if(Y.patientName&&Y.patientName.length>=2){const e=setTimeout(()=>{const e=W.filter(e=>`${e.prenom||""} ${e.nom||""}`.toLowerCase().includes(Y.patientName.toLowerCase()));oe(e.slice(0,5)),de(e.length>0)},300);return()=>clearTimeout(e)}oe([]),de(!1)},[Y.patientName,W]),(0,r.useEffect)(()=>{He(),tt(),st()},[]);const He=async()=>{D(!0);try{await Promise.all([We(),qe(),Ye(),et(),nt()])}catch(e){console.error("Error fetching initial data:",e),Pt.error("Erreur lors du chargement des donn\xe9es")}finally{D(!1)}},We=async()=>{try{const e=await Qn.get(`${N}/api/facturation/enhanced-stats`);_(e.data||{})}catch(e){console.error("Error fetching enhanced stats:",e)}},qe=async()=>{try{var e;const t=await Qn.get(`${N}/api/facturation/evolution-graphs`,{params:{period:"month",year:(new Date).getFullYear()}});E((null===(e=t.data)||void 0===e?void 0:e.evolution)||[])}catch(t){console.error("Error fetching evolution data:",t)}},Ye=async()=>{try{const e=(new Date).getFullYear(),t=(new Date).getMonth()+1,s=await Qn.get(`${N}/api/admin/advanced-reports`,{params:{period_type:"monthly",year:e,month:t}});P(s.data)}catch(e){console.error("Error fetching predictive analysis:",e)}},Qe=async()=>{try{const e=(new Date).getFullYear(),t=(new Date).getMonth()+1;console.log("\ud83d\udd04 Fetching predictions with params:",{period_type:"monthly",year:e,month:t});const s=await Qn.get(`${N}/api/admin/advanced-reports`,{params:{period_type:"monthly",year:e,month:t}});console.log("\u2705 Predictions loaded successfully:",s.data),Re(s.data)}catch(s){var e,t;console.error("\u274c Error fetching predictions:",s),console.error("\u274c Request details:",{url:`${N}/api/admin/advanced-reports`,status:null===(e=s.response)||void 0===e?void 0:e.status,data:null===(t=s.response)||void 0===t?void 0:t.data}),Re({status:"error",error:s.message}),Pt.error("Erreur lors du chargement des pr\xe9dictions")}},Ke=async()=>{try{const e=new Date,t=new Date;t.setDate(t.getDate()-30);const s={start_date:t.toISOString().split("T")[0],end_date:e.toISOString().split("T")[0]};console.log("\ud83d\udd04 Fetching analysis data with params:",s);const n=await Qn.get(`${N}/api/admin/ai-medical-report`,{params:s});console.log("\u2705 Analysis data loaded successfully:",n.data),Le(n.data)}catch(s){var e,t;console.error("\u274c Error fetching analysis data:",s),console.error("\u274c Request details:",{url:`${N}/api/admin/ai-medical-report`,status:null===(e=s.response)||void 0===e?void 0:e.status,data:null===(t=s.response)||void 0===t?void 0:t.data}),Le({status:"error",error:s.message}),Pt.error("Erreur lors du chargement des analyses")}},Ge=async()=>{try{return(await Qn.get(`${N}/api/admin/advanced-reports`,{params:{period_type:"annual",year:(new Date).getFullYear()}})).data}catch(e){return console.error("Error fetching seasonal predictions:",e),null}},Xe=async()=>{try{const e=(new Date).getFullYear(),t=[];for(let s=1;s<=12;s++)t.push(Qn.get(`${N}/api/admin/advanced-reports`,{params:{period_type:"monthly",year:e,month:s}}));return(await Promise.all(t)).map(e=>e.data)}catch(e){return console.error("Error fetching activity peaks:",e),[]}},Je=e=>{if(!e||0===e.length)return null;const t=["Jan","F\xe9v","Mar","Avr","Mai","Jun","Jul","Ao\xfb","Sep","Oct","Nov","D\xe9c"],s=e.map((e,s)=>{var n,a,r,i,l;return{month:t[s],monthIndex:s+1,consultations:(null===e||void 0===e||null===(n=e.data_summary)||void 0===n?void 0:n.consultations_analyzed)||0,revenue:(null===e||void 0===e||null===(a=e.data_summary)||void 0===a?void 0:a.total_revenue)||0,patients:(null===e||void 0===e||null===(r=e.data_summary)||void 0===r?void 0:r.unique_patients)||0,trend:(null===e||void 0===e||null===(i=e.ai_analysis)||void 0===i||null===(l=i.executive_summary)||void 0===l?void 0:l.performance_trend)||"stable"}}),n=s.reduce((e,t)=>e+t.consultations,0)/s.length,a=s.reduce((e,t)=>e+t.revenue,0)/s.length,r=s.filter(e=>e.consultations>1.2*n),i=s.filter(e=>e.consultations<.8*n),l={spring:s.slice(2,5),summer:s.slice(5,8),autumn:s.slice(8,11),winter:[...s.slice(11),...s.slice(0,2)]};return{analysis:s,peaks:r.sort((e,t)=>t.consultations-e.consultations),lows:i.sort((e,t)=>e.consultations-t.consultations),averages:{consultations:n,revenue:a},seasonalTrends:l}},Ze=async()=>{try{var e,t;const s=(new Date).getFullYear(),n=(new Date).getMonth()+1,a=await Qn.get(`${N}/api/admin/advanced-reports`,{params:{period_type:"monthly",year:s,month:n}});return{current_month:a.data,has_predictions:!(null===(e=a.data)||void 0===e||null===(t=e.predictions)||void 0===t||!t.next_month)}}catch(s){return console.error("Error fetching revenue predictions:",s),{current_month:null,has_predictions:!1}}},et=async()=>{try{var e;const t=await Qn.get(`${N}/api/payments`);H(Array.isArray(t.data)?t.data:(null===(e=t.data)||void 0===e?void 0:e.payments)||[])}catch(t){console.error("Error fetching payments:",t)}},tt=async()=>{try{var e;const t=await Qn.get(`${N}/api/patients`);q((null===(e=t.data)||void 0===e?void 0:e.patients)||[])}catch(t){console.error("Error fetching patients:",t)}},st=async()=>{try{pe(!0);const e=await Qn.get(`${N}/api/admin/charts/yearly-evolution`);he(e.data)}catch(e){console.error("Error fetching charts data:",e),Pt.error("Erreur lors du chargement des graphiques")}finally{pe(!1)}},nt=async()=>{try{var e;const t=await Qn.get(`${N}/api/cash-movements`);_e((null===(e=t.data)||void 0===e?void 0:e.movements)||[])}catch(t){console.error("Error fetching cash movements:",t)}},at=e=>new Intl.NumberFormat("fr-TN",{style:"currency",currency:"TND",minimumFractionDigits:0,maximumFractionDigits:2}).format(e),rt=(0,r.useMemo)(()=>U.filter(e=>{var t,s;const n=!Y.patientName||`${null===(t=e.patient)||void 0===t?void 0:t.prenom} ${null===(s=e.patient)||void 0===s?void 0:s.nom}`.toLowerCase().includes(Y.patientName.toLowerCase()),a=!Y.statutPaiement||e.statut===Y.statutPaiement,r=""===Y.assure||e.assure.toString()===Y.assure,i=!Y.typeConsultation||e.type_rdv===Y.typeConsultation,l=new Date(e.date),o=!Y.dateDebut||l>=new Date(Y.dateDebut),c=!Y.dateFin||l<=new Date(Y.dateFin);return n&&a&&r&&i&&o&&c}),[U,Y]);return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Facturation & Paiements"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Gestion financi\xe8re du cabinet"})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsxs)("button",{onClick:()=>{D(!0),He().finally(()=>D(!1))},disabled:A,className:"btn-outline flex items-center space-x-2",children:[(0,sa.jsx)(Fa,{className:"w-4 h-4 "+(A?"animate-spin":"")}),(0,sa.jsx)("span",{children:"Actualiser"})]}),(0,sa.jsxs)("button",{onClick:()=>{Pe(!0)},className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(mr,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Exporter"})]})]})]}),(0,sa.jsx)("div",{className:"border-b border-gray-200",children:(0,sa.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"dashboard",label:"Tableau de bord",icon:pr},{id:"payments",label:"Historique paiements",icon:Wa},{id:"stats",label:"Statistiques",icon:xr},{id:"predictions",label:"Pr\xe9dictions",icon:fr},{id:"caisse",label:"Caisse",icon:la}].map(e=>{const t=e.icon;return(0,sa.jsxs)("button",{onClick:()=>R(e.id),className:"flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm "+(T===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,sa.jsx)(t,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:e.label})]},e.id)})})}),"dashboard"===T&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,sa.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-green-100 text-sm font-medium",children:"Recette du jour"}),(0,sa.jsx)("p",{className:"text-2xl font-bold",children:at(w.recette_jour||0)}),(0,sa.jsx)("p",{className:"text-green-100 text-xs mt-1",children:(new Date).toLocaleDateString("fr-FR")})]}),(0,sa.jsx)("div",{className:"bg-green-400 bg-opacity-30 rounded-full p-3",children:(0,sa.jsx)(la,{className:"w-6 h-6"})})]})}),(0,sa.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-blue-100 text-sm font-medium",children:"Recette du mois"}),(0,sa.jsx)("p",{className:"text-2xl font-bold",children:at(w.recette_mois||0)}),(0,sa.jsx)("p",{className:"text-blue-100 text-xs mt-1",children:(new Date).toLocaleDateString("fr-FR",{month:"long",year:"numeric"})})]}),(0,sa.jsx)("div",{className:"bg-blue-400 bg-opacity-30 rounded-full p-3",children:(0,sa.jsx)(aa,{className:"w-6 h-6"})})]})}),(0,sa.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-purple-100 text-sm font-medium",children:"Recette de l'ann\xe9e"}),(0,sa.jsx)("p",{className:"text-2xl font-bold",children:at(w.recette_annee||0)}),(0,sa.jsx)("p",{className:"text-purple-100 text-xs mt-1",children:(new Date).getFullYear()})]}),(0,sa.jsx)("div",{className:"bg-purple-400 bg-opacity-30 rounded-full p-3",children:(0,sa.jsx)(fr,{className:"w-6 h-6"})})]})}),(0,sa.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-orange-100 text-sm font-medium",children:"Nouveaux patients"}),(0,sa.jsx)("p",{className:"text-2xl font-bold",children:w.nouveaux_patients_annee||0}),(0,sa.jsxs)("p",{className:"text-orange-100 text-xs mt-1",children:["Depuis d\xe9but ",(new Date).getFullYear()]})]}),(0,sa.jsx)("div",{className:"bg-orange-400 bg-opacity-30 rounded-full p-3",children:(0,sa.jsx)(ia,{className:"w-6 h-6"})})]})})]}),(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Historique de paiements"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,sa.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"font-medium text-green-900 mb-3 flex items-center",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 mr-2"}),"Recherche par jour"]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("input",{type:"date",value:O,onChange:e=>L(e.target.value),className:"input-field w-full"}),(0,sa.jsx)("button",{onClick:()=>(async e=>{try{const t=await Qn.get(`${N}/api/facturation/daily-payments`,{params:{date:e}});I(t.data)}catch(t){console.error("Error fetching daily payments:",t),Pt.error("Erreur lors du chargement des paiements du jour")}})(O),className:"btn-primary w-full",children:"Voir"})]})]}),(0,sa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"font-medium text-blue-900 mb-3 flex items-center",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 mr-2"}),"Recherche par mois"]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("input",{type:"month",onChange:e=>{const[t,s]=e.target.value.split("-");t&&s&&$(null)},className:"input-field w-full",id:"monthlySearch"}),(0,sa.jsx)("button",{onClick:()=>{const e=document.getElementById("monthlySearch");if(e.value){const[t,s]=e.value.split("-");(async(e,t)=>{try{const s=await Qn.get(`${N}/api/facturation/monthly-stats-with-evolution`,{params:{year:e,month:t}});$(s.data)}catch(s){console.error("Error fetching monthly stats:",s),Pt.error("Erreur lors du chargement des statistiques mensuelles")}})(parseInt(t),parseInt(s))}else Pt.error("Veuillez s\xe9lectionner un mois")},className:"btn-primary w-full",children:"Voir"})]})]}),(0,sa.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"font-medium text-purple-900 mb-3 flex items-center",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 mr-2"}),"Recherche par ann\xe9e"]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("input",{type:"number",min:"2020",max:"2030",defaultValue:(new Date).getFullYear(),onChange:e=>{e.target.value&&V(null)},className:"input-field w-full",id:"yearlySearch"}),(0,sa.jsx)("button",{onClick:()=>{const e=document.getElementById("yearlySearch");e.value?(async e=>{try{const t=await Qn.get(`${N}/api/facturation/yearly-stats`,{params:{year:e}});V(t.data)}catch(t){console.error("Error fetching yearly stats:",t),Pt.error("Erreur lors du chargement des statistiques annuelles")}})(parseInt(e.value)):Pt.error("Veuillez s\xe9lectionner une ann\xe9e")},className:"btn-primary w-full",children:"Voir"})]})]})]}),z&&(0,sa.jsxs)("div",{className:"mt-6 bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,sa.jsxs)("h4",{className:"font-semibold text-green-900 mb-3",children:["R\xe9sultats pour le ",new Date(z.date).toLocaleDateString("fr-FR")]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-2xl font-bold text-green-700",children:[z.totals.recette_totale," DT"]}),(0,sa.jsx)("div",{className:"text-sm text-green-600",children:"Recette totale"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-green-700",children:z.totals.nb_impayes||0}),(0,sa.jsx)("div",{className:"text-sm text-green-600",children:"nb d'impay\xe9s"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-green-700",children:z.totals.nb_visites}),(0,sa.jsx)("div",{className:"text-sm text-green-600",children:"Visites"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-green-700",children:z.totals.nb_assures}),(0,sa.jsx)("div",{className:"text-sm text-green-600",children:"Assur\xe9s"})]})]}),z.payments.length>0?(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("div",{className:"text-sm font-semibold text-green-900",children:"D\xe9tail des paiements :"}),z.payments.slice(0,5).map((e,t)=>{var s,n;return(0,sa.jsxs)("div",{className:"flex justify-between items-center bg-white p-2 rounded border",children:[(0,sa.jsxs)("span",{className:"text-sm",children:[null===(s=e.patient)||void 0===s?void 0:s.prenom," ",null===(n=e.patient)||void 0===n?void 0:n.nom]}),(0,sa.jsxs)("span",{className:"font-semibold text-green-700",children:[e.montant," DT"]})]},t)}),z.payments.length>5&&(0,sa.jsxs)("div",{className:"text-xs text-green-600 text-center",children:["... et ",z.payments.length-5," autre(s) paiement(s)"]})]}):(0,sa.jsx)("div",{className:"text-center py-4 text-green-600",children:"Aucun paiement pour cette date"})]}),F&&(0,sa.jsxs)("div",{className:"mt-6 bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,sa.jsxs)("h4",{className:"font-semibold text-blue-900 mb-3",children:["R\xe9sultats pour ",F.month,"/",F.year]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-2xl font-bold text-blue-700",children:[F.recette_mois," DT"]}),(0,sa.jsx)("div",{className:"text-sm text-blue-600",children:"Recette mensuelle"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:F.nb_total_rdv}),(0,sa.jsx)("div",{className:"text-sm text-blue-600",children:"Total RDV"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:F.nb_visites}),(0,sa.jsx)("div",{className:"text-sm text-blue-600",children:"Visites"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-blue-700",children:F.nb_assures}),(0,sa.jsx)("div",{className:"text-sm text-blue-600",children:"Assur\xe9s"})]})]}),F.evolution&&(0,sa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,sa.jsx)("div",{className:"text-sm font-semibold text-blue-900 mb-2",children:"\xc9volution par rapport au mois pr\xe9c\xe9dent :"}),(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("span",{className:"text-sm",children:["Recette pr\xe9c\xe9dente: ",F.evolution.recette_precedente," DT"]}),(0,sa.jsxs)("span",{className:"font-semibold "+(F.evolution.evolution_pourcentage>=0?"text-green-600":"text-red-600"),children:[F.evolution.evolution_pourcentage>=0?"+":"",F.evolution.evolution_pourcentage,"%"]})]})]})]}),B&&(0,sa.jsxs)("div",{className:"mt-6 bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,sa.jsxs)("h4",{className:"font-semibold text-purple-900 mb-3",children:["R\xe9sultats pour l'ann\xe9e ",B.year]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-2xl font-bold text-purple-700",children:[B.recette_annee," DT"]}),(0,sa.jsx)("div",{className:"text-sm text-purple-600",children:"Recette annuelle"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:B.nb_total_rdv}),(0,sa.jsx)("div",{className:"text-sm text-purple-600",children:"Total RDV"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:B.nb_visites}),(0,sa.jsx)("div",{className:"text-sm text-purple-600",children:"Visites"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-purple-700",children:B.nb_assures}),(0,sa.jsx)("div",{className:"text-sm text-purple-600",children:"Assur\xe9s"})]})]})]})]})})]}),"payments"===T&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recherche avanc\xe9e"}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\ud83d\udd0d Recherche Avanc\xe9e"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{className:"relative col-span-1 md:col-span-2 lg:col-span-1",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recherche Patient"}),(0,sa.jsx)("input",{type:"text",placeholder:"Tapez le nom du patient...",value:Y.patientName,onChange:e=>{Q(t=>({...t,patientName:e.target.value}))},onFocus:()=>{le.length>0&&de(!0)},onBlur:()=>{setTimeout(()=>de(!1),150)},className:"input-field w-full"}),ce&&le.length>0&&(0,sa.jsx)("div",{className:"absolute z-10 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-48 overflow-y-auto mt-1",children:le.map(e=>(0,sa.jsxs)("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer text-sm",onMouseDown:()=>{const t=`${e.prenom} ${e.nom}`;Q(e=>({...e,patientName:t})),de(!1)},children:[(0,sa.jsxs)("div",{className:"font-medium",children:[e.prenom," ",e.nom]}),e.numero_whatsapp&&(0,sa.jsx)("div",{className:"text-xs text-gray-500",children:e.numero_whatsapp})]},e.id))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-2 col-span-1 md:col-span-2 lg:col-span-1",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date d\xe9but"}),(0,sa.jsx)("input",{type:"date",value:Y.dateDebut,onChange:e=>Q(t=>({...t,dateDebut:e.target.value})),className:"input-field w-full"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date fin"}),(0,sa.jsx)("input",{type:"date",value:Y.dateFin,onChange:e=>Q(t=>({...t,dateFin:e.target.value})),className:"input-field w-full"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-3 gap-2 col-span-1 md:col-span-2 lg:col-span-1",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),(0,sa.jsxs)("select",{value:Y.typeConsultation,onChange:e=>Q(t=>({...t,typeConsultation:e.target.value})),className:"input-field text-xs",children:[(0,sa.jsx)("option",{value:"",children:"Tous"}),(0,sa.jsx)("option",{value:"visite",children:"Visite"}),(0,sa.jsx)("option",{value:"controle",children:"Contr\xf4le"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),(0,sa.jsxs)("select",{value:Y.statutPaiement,onChange:e=>Q(t=>({...t,statutPaiement:e.target.value})),className:"input-field text-xs",children:[(0,sa.jsx)("option",{value:"",children:"Tous"}),(0,sa.jsx)("option",{value:"paye",children:"Pay\xe9"}),(0,sa.jsx)("option",{value:"impaye",children:"Impay\xe9"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assurance"}),(0,sa.jsxs)("select",{value:Y.assure,onChange:e=>Q(t=>({...t,assure:e.target.value})),className:"input-field text-xs",children:[(0,sa.jsx)("option",{value:"",children:"Tous"}),(0,sa.jsx)("option",{value:"true",children:"Assur\xe9"}),(0,sa.jsx)("option",{value:"false",children:"Non assur\xe9"})]})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-600",children:[rt.length," paiement",1!==rt.length?"s":""," trouv\xe9",1!==rt.length?"s":"",(0,sa.jsxs)("span",{className:"text-xs text-gray-400 ml-2",children:["(Total DB: ",U.length,")"]})]}),(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("button",{onClick:()=>{Q({patientName:"",dateDebut:"",dateFin:"",statutPaiement:"",assure:"",typeConsultation:""}),G([])},className:"btn-outline text-sm bg-red-50 border-red-200 text-red-700 hover:bg-red-100",children:"Tout Afficher"}),(0,sa.jsx)("button",{onClick:()=>{Q({patientName:"",dateDebut:"",dateFin:"",statutPaiement:"",assure:"",typeConsultation:""}),G([])},className:"btn-outline text-sm",children:"R\xe9initialiser"}),(0,sa.jsxs)("button",{onClick:async()=>{J(!0);try{G(rt),Pt.success(`${rt.length} paiement(s) trouv\xe9(s)`)}catch(e){console.error("Error searching payments:",e),Pt.error("Erreur lors de la recherche")}finally{J(!1)}},className:"btn-primary text-sm flex items-center space-x-2",children:[(0,sa.jsx)(va,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Rechercher"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,sa.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique des paiements"})}),A?(0,sa.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,sa.jsx)(Fa,{className:"w-6 h-6 animate-spin text-primary-500"}),(0,sa.jsx)("span",{className:"ml-2",children:"Chargement..."})]}):rt.length>0?(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sa.jsx)("thead",{className:"bg-gray-50",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut Paiement"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assurance"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:rt.map(e=>{var t,s;return(0,sa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,sa.jsx)("td",{className:"px-4 py-3",children:(0,sa.jsxs)("button",{onClick:()=>(async e=>{try{if(e){let t=null;e.id?t=(await Qn.get(`${N}/api/patients`)).data.patients.find(t=>t.id===e.id):e.prenom&&e.nom&&(t=(await Qn.get(`${N}/api/patients`)).data.patients.find(t=>t.prenom.toLowerCase()===e.prenom.toLowerCase()&&t.nom.toLowerCase()===e.nom.toLowerCase())),t?(be(t),fe(!0)):Pt.error("Patient non trouv\xe9 dans la base de donn\xe9es")}else Pt.error("Donn\xe9es patient non disponibles")}catch(t){console.error("Error fetching patient data:",t),Pt.error("Erreur lors du chargement des donn\xe9es du patient")}})(e.patient),className:"text-blue-600 hover:text-blue-800 hover:underline font-medium",children:[null===(t=e.patient)||void 0===t?void 0:t.prenom," ",null===(s=e.patient)||void 0===s?void 0:s.nom]})}),(0,sa.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("fr-FR")}),(0,sa.jsx)("td",{className:"px-4 py-3",children:(0,sa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("paye"===e.statut?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"controle"===e.type_rdv?"0 TND":`${e.montant} TND`})}),(0,sa.jsx)("td",{className:"px-4 py-3",children:(0,sa.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+("visite"===e.type_rdv?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"visite"===e.type_rdv?"Visite":"Contr\xf4le"})}),(0,sa.jsx)("td",{className:"px-4 py-3",children:(0,sa.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+("paye"===e.statut?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"paye"===e.statut?"Pay\xe9":"Impay\xe9"})}),(0,sa.jsx)("td",{className:"px-4 py-3",children:(0,sa.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(e.assure?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.assure?"Assur\xe9":"Non assur\xe9"})}),(0,sa.jsx)("td",{className:"px-4 py-3",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,sa.jsx)("button",{onClick:()=>(async e=>{try{const t=(await Qn.get(`${N}/api/consultations`)).data.find(t=>t.appointment_id===e.appointment_id);t?(t.patient=e.patient,Ne(t),ve(!0)):Pt.error("Consultation non trouv\xe9e")}catch(t){console.error("Error fetching consultation data:",t),Pt.error("Erreur lors du chargement des donn\xe9es de consultation")}})(e),className:"p-1 text-blue-600 hover:bg-blue-100 rounded",title:"Voir la consultation",children:"\ud83d\udc41\ufe0f"}),(0,sa.jsx)("button",{onClick:()=>(e=>{const t={id:e.appointment_id,patient:e.patient,date:e.date,heure:e.heure||"09:00",type_rdv:e.type_rdv,paye:"paye"===e.statut,montant_paye:e.montant,assure:e.assure};ie(t),ae(!0)})(e),className:"p-1 text-yellow-600 hover:bg-yellow-100 rounded",title:"\xc9diter le paiement",children:"\u270f\ufe0f"}),(0,sa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce paiement ?"))try{await Qn.delete(`${N}/api/payments/${e.id}`),Pt.success("Paiement supprim\xe9 avec succ\xe8s"),et()}catch(t){console.error("Error deleting payment:",t),Pt.error("Erreur lors de la suppression du paiement")}})(e),className:"p-1 text-red-600 hover:bg-red-100 rounded",title:"Supprimer le paiement",children:"\ud83d\uddd1\ufe0f"})]})})]},e.id)})})]})}):(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sa.jsx)("thead",{className:"bg-gray-50",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Patient"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut Paiement"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assurance"}),(0,sa.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,sa.jsx)("tr",{children:(0,sa.jsx)("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:"Aucun paiement trouv\xe9 pour les crit\xe8res s\xe9lectionn\xe9s"})})})]})})]})]}),"stats"===T&&(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,sa.jsx)(fr,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["\xc9volution Annuelle ",(null===ue||void 0===ue?void 0:ue.year)||(new Date).getFullYear()]}),(0,sa.jsxs)("button",{onClick:st,disabled:me,className:"ml-auto flex items-center space-x-1 px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg disabled:opacity-50",children:[(0,sa.jsx)(Fa,{className:"w-4 h-4 "+(me?"animate-spin":"")}),(0,sa.jsx)("span",{children:"Actualiser"})]})]}),me?(0,sa.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):ue?(0,sa.jsx)("div",{className:"space-y-8",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\xc9volution de la Recette"}),(0,sa.jsx)("div",{className:"h-64",children:(0,sa.jsx)(Zu,{data:{labels:(null===(t=ue.monthly_data)||void 0===t?void 0:t.map(e=>e.month_short))||[],datasets:[{label:"Recette (TND)",data:(null===(s=ue.monthly_data)||void 0===s?void 0:s.map(e=>e.recette_mensuelle))||[],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return e+" TND"}}}}}})})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Nouveaux Patients par Mois"}),(0,sa.jsx)("div",{className:"h-64",children:(0,sa.jsx)(eh,{data:{labels:(null===(n=ue.monthly_data)||void 0===n?void 0:n.map(e=>e.month_short))||[],datasets:[{label:"Nouveaux Patients",data:(null===(a=ue.monthly_data)||void 0===a?void 0:a.map(e=>e.nouveaux_patients))||[],backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\xc9volution des Consultations"}),(0,sa.jsx)("div",{className:"h-64",children:(0,sa.jsx)(Zu,{data:{labels:(null===(i=ue.monthly_data)||void 0===i?void 0:i.map(e=>e.month_short))||[],datasets:[{label:"Visites",data:(null===(l=ue.monthly_data)||void 0===l?void 0:l.map(e=>e.nb_visites))||[],borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",tension:.1},{label:"Contr\xf4les",data:(null===(o=ue.monthly_data)||void 0===o?void 0:o.map(e=>e.nb_controles))||[],borderColor:"rgb(245, 158, 11)",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Total Consultations par Mois"}),(0,sa.jsx)("div",{className:"h-64",children:(0,sa.jsx)(eh,{data:{labels:(null===(c=ue.monthly_data)||void 0===c?void 0:c.map(e=>e.month_short))||[],datasets:[{label:"Total Consultations",data:(null===(d=ue.monthly_data)||void 0===d?void 0:d.map(e=>e.consultations_totales))||[],backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgb(168, 85, 247)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}}})})]})]})}):(0,sa.jsxs)("div",{className:"text-center py-8",children:[(0,sa.jsx)("p",{className:"text-gray-500",children:"Aucune donn\xe9e statistique disponible"}),(0,sa.jsx)("button",{onClick:st,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Charger les statistiques"})]})]})}),"predictions"===T&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl shadow-sm border border-purple-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-lg",children:(0,sa.jsx)(Oa,{className:"w-7 h-7 text-white"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Intelligence Artificielle M\xe9dicale"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Analyses ML avanc\xe9es, pr\xe9dictions saisonni\xe8res et revenus pr\xe9visionnels"})]})]}),(0,sa.jsxs)("button",{onClick:()=>{D(!0),Re(null),Le(null),Ie(null),$e([]),Ve(null),Ue().finally(()=>D(!1))},disabled:A,className:"bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-purple-600 hover:to-indigo-700 transition-all duration-300 flex items-center space-x-2 shadow-lg disabled:opacity-50",children:[(0,sa.jsx)(Fa,{className:"w-5 h-5 "+(A?"animate-spin":"")}),(0,sa.jsx)("span",{children:"Actualiser ML"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsx)("div",{className:"bg-white rounded-lg p-4 border border-blue-200 shadow-sm",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Pr\xe9cision IA"}),(0,sa.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[(null===Te||void 0===Te||null===(u=Te.next_month)||void 0===u?void 0:u.confiance)||(null===Oe||void 0===Oe?void 0:Oe.ai_confidence)||85,"%"]})]}),(0,sa.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,sa.jsx)(gr,{className:"w-5 h-5 text-blue-600"})})]})}),(0,sa.jsx)("div",{className:"bg-white rounded-lg p-4 border border-green-200 shadow-sm",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Mod\xe8le ML"}),(0,sa.jsx)("p",{className:"text-lg font-bold text-green-700",children:"Gemini 2.0"}),(0,sa.jsx)("p",{className:"text-xs text-green-500",children:"Flash Thinking"})]}),(0,sa.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,sa.jsx)(Oa,{className:"w-5 h-5 text-green-600"})})]})}),(0,sa.jsx)("div",{className:"bg-white rounded-lg p-4 border border-orange-200 shadow-sm",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm font-medium text-orange-600",children:"Donn\xe9es analys\xe9es"}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-orange-700",children:(null===Oe||void 0===Oe||null===(h=Oe.data_summary)||void 0===h?void 0:h.appointments_analyzed)||0}),(0,sa.jsx)("p",{className:"text-xs text-orange-500",children:"Consultations"})]}),(0,sa.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,sa.jsx)(xr,{className:"w-5 h-5 text-orange-600"})})]})}),(0,sa.jsx)("div",{className:"bg-white rounded-lg p-4 border border-purple-200 shadow-sm",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Score Global"}),(0,sa.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:[(null===Oe||void 0===Oe||null===(m=Oe.ai_analysis)||void 0===m||null===(p=m.executive_summary)||void 0===p?void 0:p.overall_score)||0,"/100"]})]}),(0,sa.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,sa.jsx)(hr,{className:"w-5 h-5 text-purple-600"})})]})})]})]}),Fe&&Fe.length>0&&(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,sa.jsx)(la,{className:"w-5 h-5 text-green-600 mr-2"}),"Pr\xe9dictions de Revenus & Analyse Saisonni\xe8re"]}),(()=>{const e=Je(Fe),t=((e,t)=>{if(!e||!t)return null;const s=(new Date).getMonth(),n=e.length>1?(e[e.length-1].revenue-e[0].revenue)/e.length:0,a=[];for(let i=0;i<6;i++){var r;const t=(s+i+1)%12,l=["Jan","F\xe9v","Mar","Avr","Mai","Jun","Jul","Ao\xfb","Sep","Oct","Nov","D\xe9c"][t],o=t>=9||t<=2?1.1:t>=3&&t<=5?1.05:.9,c=((null===(r=e[t])||void 0===r?void 0:r.revenue)||0)+n,d=c*o;a.push({month:l,monthIndex:t+1,predictedRevenue:Math.max(0,d),confidence:75+20*Math.random(),trend:d>c?"up":d<c?"down":"stable"})}return a})(null===e||void 0===e?void 0:e.analysis,Be);return(0,sa.jsxs)("div",{className:"space-y-6",children:[t&&(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.slice(0,3).map((e,t)=>(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("h4",{className:"text-sm font-semibold text-green-800",children:e.month}),(0,sa.jsx)("div",{className:"px-2 py-1 rounded-full text-xs font-medium "+("up"===e.trend?"bg-green-200 text-green-800":"down"===e.trend?"bg-red-200 text-red-800":"bg-gray-200 text-gray-800"),children:"up"===e.trend?"\ud83d\udcc8 Hausse":"down"===e.trend?"\ud83d\udcc9 Baisse":"\u27a1\ufe0f Stable"})]}),(0,sa.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[e.predictedRevenue.toFixed(0)," TND"]}),(0,sa.jsxs)("div",{className:"flex items-center mt-2",children:[(0,sa.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,sa.jsx)("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${e.confidence}%`}})}),(0,sa.jsxs)("span",{className:"text-xs text-green-600 ml-2",children:[e.confidence.toFixed(0),"% fiable"]})]})]},t))}),e&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 border border-orange-200 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"text-md font-semibold text-orange-800 mb-3 flex items-center",children:[(0,sa.jsx)(fr,{className:"w-4 h-4 mr-2"}),"P\xe9riodes de Pics d'Activit\xe9"]}),(0,sa.jsx)("div",{className:"space-y-2",children:e.peaks.slice(0,3).map((t,s)=>(0,sa.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-orange-100",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("div",{className:"w-8 h-8 bg-orange-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:s+1}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-medium text-gray-800",children:t.month}),(0,sa.jsxs)("p",{className:"text-xs text-gray-600",children:[t.consultations," consultations"]})]})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsxs)("p",{className:"font-bold text-orange-600",children:[t.revenue.toFixed(0)," TND"]}),(0,sa.jsxs)("p",{className:"text-xs text-orange-500",children:["+",(100*(t.consultations/e.averages.consultations-1)).toFixed(0),"%"]})]})]},s))})]}),(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"text-md font-semibold text-blue-800 mb-3 flex items-center",children:[(0,sa.jsx)(fr,{className:"w-4 h-4 mr-2 transform rotate-180"}),"P\xe9riodes de Creux d'Activit\xe9"]}),(0,sa.jsx)("div",{className:"space-y-2",children:e.lows.slice(0,3).map((t,s)=>(0,sa.jsxs)("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-blue-100",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs font-bold",children:s+1}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-medium text-gray-800",children:t.month}),(0,sa.jsxs)("p",{className:"text-xs text-gray-600",children:[t.consultations," consultations"]})]})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsxs)("p",{className:"font-bold text-blue-600",children:[t.revenue.toFixed(0)," TND"]}),(0,sa.jsxs)("p",{className:"text-xs text-blue-500",children:[(100*(t.consultations/e.averages.consultations-1)).toFixed(0),"%"]})]})]},s))})]})]})]})})()]}),Fe&&Fe.length>0&&(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,sa.jsx)(xr,{className:"w-5 h-5 text-purple-600 mr-2"}),"Analyse Saisonni\xe8re ML - Consultations & Revenus"]}),(()=>{const e=Je(Fe);return e?(0,sa.jsx)("div",{className:"h-64",children:(0,sa.jsx)(Zu,{data:{labels:e.analysis.map(e=>e.month),datasets:[{label:"Consultations",data:e.analysis.map(e=>e.consultations),borderColor:"rgb(147, 51, 234)",backgroundColor:"rgba(147, 51, 234, 0.1)",tension:.4,fill:!1,yAxisID:"y"},{label:"Revenus (TND)",data:e.analysis.map(e=>e.revenue),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4,fill:!1,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top"},tooltip:{filter:function(e){return null!==e.parsed.y}}},scales:{x:{display:!0,title:{display:!0,text:"Mois"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Consultations"},beginAtZero:!0},y1:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Revenus (TND)"},beginAtZero:!0,grid:{drawOnChartArea:!1}}}}})}):null})()]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,sa.jsx)(hr,{className:"w-5 h-5 text-yellow-600 mr-2"}),"Top Patients Rentables (ML Analysis)"]}),(0,sa.jsx)(th,{})]}),Oe&&(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl shadow-sm border border-indigo-200 p-6",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-indigo-900 mb-4 flex items-center",children:[(0,sa.jsx)(br,{className:"w-5 h-5 text-yellow-500 mr-2"}),"Recommandations IA Avanc\xe9es"]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(null===(x=Oe.ai_analysis)||void 0===x?void 0:x.opportunities)&&(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h4",{className:"font-semibold text-indigo-800",children:"Opportunit\xe9s Strat\xe9giques"}),Object.entries(Oe.ai_analysis.opportunities).map(e=>{let[t,s]=e;return(0,sa.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-indigo-100",children:[(0,sa.jsx)("h5",{className:"font-medium text-indigo-700 mb-2 capitalize",children:t.replace("_"," ")}),(0,sa.jsx)("ul",{className:"text-sm text-gray-700 space-y-1",children:Array.isArray(s)?s.slice(0,3).map((e,t)=>(0,sa.jsxs)("li",{className:"flex items-start",children:[(0,sa.jsx)("span",{className:"text-indigo-500 mr-2",children:"\u2022"}),e]},t)):null})]},t)})]}),(null===(f=Oe.ai_analysis)||void 0===f?void 0:f.risk_assessment)&&(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h4",{className:"font-semibold text-red-800",children:"\xc9valuation des Risques"}),Object.entries(Oe.ai_analysis.risk_assessment).map(e=>{let[t,s]=e;return(0,sa.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-red-100",children:[(0,sa.jsx)("h5",{className:"font-medium text-red-700 mb-2 capitalize",children:t.replace("_"," ")}),(0,sa.jsx)("ul",{className:"text-sm text-gray-700 space-y-1",children:Array.isArray(s)?s.slice(0,3).map((e,t)=>(0,sa.jsxs)("li",{className:"flex items-start",children:[(0,sa.jsx)("span",{className:"text-red-500 mr-2",children:"\u26a0"}),e]},t)):null})]},t)})]})]})]}),A&&(0,sa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:(0,sa.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-500"}),(0,sa.jsx)(Oa,{className:"absolute inset-0 m-auto w-8 h-8 text-purple-500"})]}),(0,sa.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-700",children:"Analyse ML en cours..."}),(0,sa.jsx)("p",{className:"text-sm text-gray-500",children:"Gemini 2.0 Flash traite vos donn\xe9es m\xe9dicales"})]})}),!A&&(!Te||"no_data"===Te.status||"error"===Te.status)&&(!Oe||"no_data"===Oe.status||"error"===Oe.status)&&(0,sa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12",children:(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)(Oa,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"error"===(null===Te||void 0===Te?void 0:Te.status)||"error"===(null===Oe||void 0===Oe?void 0:Oe.status)?"Erreur lors du chargement des donn\xe9es ML":"Aucune analyse ML disponible"}),(0,sa.jsx)("p",{className:"text-gray-500 mb-6",children:"error"===(null===Te||void 0===Te?void 0:Te.status)||"error"===(null===Oe||void 0===Oe?void 0:Oe.status)?"V\xe9rifiez la connexion et r\xe9essayez":"Lancez une analyse pour obtenir des pr\xe9dictions avanc\xe9es"}),(0,sa.jsxs)("button",{onClick:()=>{D(!0),Re(null),Le(null),Ie(null),$e([]),Ve(null),Ue().finally(()=>D(!1))},className:"bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-purple-600 hover:to-indigo-700 transition-all duration-300 flex items-center space-x-2 mx-auto",children:[(0,sa.jsx)(Oa,{className:"w-5 h-5"}),(0,sa.jsx)("span",{children:"error"===(null===Te||void 0===Te?void 0:Te.status)||"error"===(null===Oe||void 0===Oe?void 0:Oe.status)?"R\xe9essayer l'analyse ML":"Lancer l'analyse ML"})]})]})})]}),"caisse"===T&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:(0,sa.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Gestion de la caisse"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Ajustements de la recette du jour pour les d\xe9penses ou encaissements"})]}),(0,sa.jsx)("div",{className:"flex items-center space-x-4",children:(0,sa.jsxs)("button",{onClick:()=>Se(!0),className:"btn-primary flex items-center space-x-2",children:[(0,sa.jsx)(la,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Nouveau mouvement"})]})})]})}),ke&&(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsx)("h4",{className:"text-md font-semibold text-gray-900",children:"Nouveau mouvement de caisse"}),(0,sa.jsx)("button",{onClick:()=>Se(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant (TND) *"}),(0,sa.jsx)("input",{type:"number",step:"0.01",min:"0",placeholder:"0.00",value:Ce.montant,onChange:e=>Ee(t=>({...t,montant:e.target.value})),className:"input-field"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type *"}),(0,sa.jsxs)("select",{value:Ce.type_mouvement,onChange:e=>Ee(t=>({...t,type_mouvement:e.target.value})),className:"input-field",children:[(0,sa.jsx)("option",{value:"ajout",children:"Ajout (+)"}),(0,sa.jsx)("option",{value:"soustraction",children:"Soustraction (-)"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),(0,sa.jsx)("input",{type:"date",value:Ce.date,onChange:e=>Ee(t=>({...t,date:e.target.value})),className:"input-field"})]}),(0,sa.jsx)("div",{className:"flex items-end",children:(0,sa.jsx)("button",{onClick:async()=>{if(Ce.montant&&Ce.motif)try{await Qn.post(`${N}/api/cash-movements`,{...Ce,montant:parseFloat(Ce.montant)}),Pt.success("Mouvement de caisse enregistr\xe9"),Ee({montant:"",type_mouvement:"ajout",date:(new Date).toISOString().split("T")[0],motif:""}),Se(!1),nt()}catch(e){console.error("Error creating cash movement:",e),Pt.error("Erreur lors de l'enregistrement")}else Pt.error("Veuillez remplir tous les champs obligatoires")},className:"btn-primary w-full",children:"Enregistrer"})})]}),(0,sa.jsxs)("div",{className:"mt-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motif *"}),(0,sa.jsx)("input",{type:"text",placeholder:"Ex: Achat fournitures, Paiement en retard encaiss\xe9...",value:Ce.motif,onChange:e=>Ee(t=>({...t,motif:e.target.value})),className:"input-field"})]})]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[(0,sa.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Historique des mouvements"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[we.length," mouvement(s) enregistr\xe9(s)"]})]}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sa.jsx)("thead",{className:"bg-gray-50",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Motif"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:we.map(e=>(0,sa.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.date).toLocaleDateString("fr-FR")}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"ajout"===e.type_mouvement?(0,sa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,sa.jsx)(fr,{className:"w-3 h-3 mr-1"}),"Ajout"]}):(0,sa.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,sa.jsx)(fr,{className:"w-3 h-3 mr-1 rotate-180"}),"Soustraction"]})}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sa.jsxs)("span",{className:"text-sm font-medium "+("ajout"===e.type_mouvement?"text-green-600":"text-red-600"),children:["ajout"===e.type_mouvement?"+":"-",at(e.montant)]})}),(0,sa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.motif}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,sa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("\xcates-vous s\xfbr de vouloir supprimer ce mouvement ?"))try{await Qn.delete(`${N}/api/cash-movements/${e}`),Pt.success("Mouvement supprim\xe9 avec succ\xe8s"),nt()}catch(t){console.error("Error deleting cash movement:",t),Pt.error("Erreur lors de la suppression")}})(e.id),className:"text-red-600 hover:text-red-900",title:"Supprimer le mouvement",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})})})]},e.id))})]})})]}),0===we.length&&(0,sa.jsxs)("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200",children:[(0,sa.jsx)(la,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-500",children:"Aucun mouvement de caisse enregistr\xe9"}),(0,sa.jsx)("button",{onClick:()=>Se(!0),className:"mt-4 btn-primary",children:"Ajouter le premier mouvement"})]})]}),Me&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"Export CSV Avanc\xe9"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configuration compl\xe8te du rapport comptable"})]}),(0,sa.jsx)("button",{onClick:()=>Pe(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"space-y-8",children:[(0,sa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"text-md font-semibold text-blue-900 mb-3 flex items-center",children:[(0,sa.jsx)(aa,{className:"w-4 h-4 mr-2"}),"P\xe9riode d'export"]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d\xe9but"}),(0,sa.jsx)("input",{type:"date",value:Ae.dateDebut,onChange:e=>De(t=>({...t,dateDebut:e.target.value})),className:"input-field"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date fin"}),(0,sa.jsx)("input",{type:"date",value:Ae.dateFin,onChange:e=>De(t=>({...t,dateFin:e.target.value})),className:"input-field"})]})]})]}),(0,sa.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"text-md font-semibold text-green-900 mb-3 flex items-center",children:[(0,sa.jsx)(ia,{className:"w-4 h-4 mr-2"}),"Filtres de consultation"]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de visite"}),(0,sa.jsxs)("select",{value:Ae.typeVisite,onChange:e=>De(t=>({...t,typeVisite:e.target.value})),className:"input-field",children:[(0,sa.jsx)("option",{value:"tous",children:"Tous les types"}),(0,sa.jsx)("option",{value:"visite",children:"Visites uniquement"}),(0,sa.jsx)("option",{value:"controle",children:"Contr\xf4les uniquement"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type d'assurance"}),(0,sa.jsxs)("select",{value:Ae.typeAssurance,onChange:e=>De(t=>({...t,typeAssurance:e.target.value})),className:"input-field",children:[(0,sa.jsx)("option",{value:"tous",children:"Tous les patients"}),(0,sa.jsx)("option",{value:"assure",children:"Patients assur\xe9s"}),(0,sa.jsx)("option",{value:"non_assure",children:"Patients non assur\xe9s"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"text-md font-semibold text-purple-900 mb-3 flex items-center",children:[(0,sa.jsx)(nr,{className:"w-4 h-4 mr-2"}),"Champs \xe0 inclure dans l'export"]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureDate,onChange:e=>De(t=>({...t,inclureDate:e.target.checked})),className:"mr-2 text-purple-600"}),(0,sa.jsx)("span",{className:"text-sm",children:"Date de consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureNomPatient,onChange:e=>De(t=>({...t,inclureNomPatient:e.target.checked})),className:"mr-2 text-purple-600"}),(0,sa.jsx)("span",{className:"text-sm",children:"Nom du patient"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureMontant,onChange:e=>De(t=>({...t,inclureMontant:e.target.checked})),className:"mr-2 text-purple-600"}),(0,sa.jsx)("span",{className:"text-sm",children:"Montant"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureType,onChange:e=>De(t=>({...t,inclureType:e.target.checked})),className:"mr-2 text-purple-600"}),(0,sa.jsx)("span",{className:"text-sm",children:"Type consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureAssurance,onChange:e=>De(t=>({...t,inclureAssurance:e.target.checked})),className:"mr-2 text-purple-600"}),(0,sa.jsx)("span",{className:"text-sm",children:"Statut assurance"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureStatutPaiement,onChange:e=>De(t=>({...t,inclureStatutPaiement:e.target.checked})),className:"mr-2 text-purple-600"}),(0,sa.jsx)("span",{className:"text-sm",children:"Statut paiement"})]})]})]}),(0,sa.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,sa.jsxs)("h4",{className:"text-md font-semibold text-yellow-900 mb-3 flex items-center",children:[(0,sa.jsx)(gr,{className:"w-4 h-4 mr-2"}),"Options avanc\xe9es"]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureStatistiques,onChange:e=>De(t=>({...t,inclureStatistiques:e.target.checked})),className:"mr-2 text-yellow-600"}),(0,sa.jsx)("span",{className:"text-sm font-medium",children:"Inclure les statistiques financi\xe8res"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.inclureEvolution,onChange:e=>De(t=>({...t,inclureEvolution:e.target.checked})),className:"mr-2 text-yellow-600"}),(0,sa.jsx)("span",{className:"text-sm font-medium",children:"Inclure l'\xe9volution mensuelle"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.includrePredictions,onChange:e=>De(t=>({...t,includrePredictions:e.target.checked})),className:"mr-2 text-yellow-600"}),(0,sa.jsx)("span",{className:"text-sm font-medium",children:"Inclure les pr\xe9dictions IA"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Ae.formatRapportComptable,onChange:e=>De(t=>({...t,formatRapportComptable:e.target.checked})),className:"mr-2 text-yellow-600"}),(0,sa.jsx)("span",{className:"text-sm font-medium",children:"Format rapport comptable professionnel"})]})]})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Aper\xe7u de l'export"}),(0,sa.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,sa.jsxs)("p",{children:[(0,sa.jsx)("span",{className:"font-medium",children:"P\xe9riode:"})," ",Ae.dateDebut||Ae.dateFin?`${Ae.dateDebut||"d\xe9but"} \u2192 ${Ae.dateFin||"fin"}`:"Toute la p\xe9riode"]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("span",{className:"font-medium",children:"Type:"})," ","tous"===Ae.typeVisite?"Tous les types":"visite"===Ae.typeVisite?"Visites uniquement":"Contr\xf4les uniquement"]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("span",{className:"font-medium",children:"Assurance:"})," ","tous"===Ae.typeAssurance?"Tous":"assure"===Ae.typeAssurance?"Assur\xe9s uniquement":"Non assur\xe9s uniquement"]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("span",{className:"font-medium",children:"Format:"})," ",Ae.formatRapportComptable?"Rapport comptable professionnel":"Export d\xe9taill\xe9 standard"]})]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-8 pt-6 border-t border-gray-200",children:[(0,sa.jsx)("button",{onClick:()=>Pe(!1),className:"btn-outline",children:"Annuler"}),(0,sa.jsxs)("button",{onClick:async()=>{try{D(!0);let n=[...U];if(Ae.dateDebut&&(n=n.filter(e=>new Date(e.date)>=new Date(Ae.dateDebut))),Ae.dateFin&&(n=n.filter(e=>new Date(e.date)<=new Date(Ae.dateFin))),"tous"!==Ae.typeVisite&&(n=n.filter(e=>e.type_rdv===Ae.typeVisite)),"tous"!==Ae.typeAssurance){const e="assure"===Ae.typeAssurance;n=n.filter(t=>t.assure===e)}const a=[];if(a.push(["=== RAPPORT COMPTABLE CABINET M\xc9DICAL ==="]),a.push(["Date d'export:",(new Date).toLocaleString("fr-FR")]),(Ae.dateDebut||Ae.dateFin)&&a.push(["P\xe9riode:",`${Ae.dateDebut||"d\xe9but"} - ${Ae.dateFin||"fin"}`]),a.push(["Type de consultation:","tous"===Ae.typeVisite?"Toutes":Ae.typeVisite]),a.push(["Type d'assurance:","tous"===Ae.typeAssurance?"Tous":Ae.typeAssurance]),a.push(["Nombre de paiements:",n.length]),a.push([]),n.length>0){const e=[];Ae.inclureDate&&e.push("Date"),Ae.inclureNomPatient&&e.push("Patient"),Ae.inclureMontant&&e.push("Montant (TND)"),Ae.inclureType&&e.push("Type Consultation"),Ae.inclureAssurance&&e.push("Assur\xe9"),Ae.inclureStatutPaiement&&e.push("Statut Paiement"),a.push(["=== D\xc9TAIL DES PAIEMENTS ==="]),a.push(e),n.forEach(e=>{const t=[];Ae.inclureDate&&t.push(new Date(e.date).toLocaleDateString("fr-FR")),Ae.inclureNomPatient&&t.push(e.patient?`${e.patient.prenom} ${e.patient.nom}`:"Patient inconnu"),Ae.inclureMontant&&t.push("controle"===e.type_rdv?"0":e.montant),Ae.inclureType&&t.push("visite"===e.type_rdv?"Visite":"Contr\xf4le"),Ae.inclureAssurance&&t.push(e.assure?"Oui":"Non"),Ae.inclureStatutPaiement&&t.push("paye"===e.statut?"Pay\xe9":"Impay\xe9"),a.push(t)}),a.push([])}if(Ae.inclureStatistiques&&w){a.push(["=== STATISTIQUES FINANCI\xc8RES ==="]),a.push(["Recette du jour:",`${at(w.recette_jour||0)} TND`]),a.push(["Recette du mois:",`${at(w.recette_mois||0)} TND`]),a.push(["Recette de l'ann\xe9e:",`${at(w.recette_annee||0)} TND`]),a.push(["Nouveaux patients cette ann\xe9e:",w.nouveaux_patients_annee||0]);const e=n.reduce((e,t)=>e+("controle"===t.type_rdv?0:parseFloat(t.montant||0)),0),t=n.filter(e=>"visite"===e.type_rdv).length,s=n.filter(e=>"controle"===e.type_rdv).length,r=n.filter(e=>e.assure).length;a.push(["--- Statistiques de la p\xe9riode s\xe9lectionn\xe9e ---"]),a.push(["Total p\xe9riode:",`${e.toFixed(2)} TND`]),a.push(["Nombre de visites:",t]),a.push(["Nombre de contr\xf4les:",s]),a.push(["Patients assur\xe9s:",r]),a.push(["Patients non assur\xe9s:",n.length-r]),a.push([])}var e,t,s;if(Ae.inclureEvolution&&C.length>0&&(a.push(["=== \xc9VOLUTION MENSUELLE ==="]),a.push(["Mois","Recette (TND)","Nb Consultations","Nouveaux Patients"]),C.forEach(e=>{a.push([e.mois,e.recette,e.nb_consultations,e.nouveaux_patients||0])}),a.push([])),Ae.includrePredictions&&Te)a.push(["=== PR\xc9DICTIONS IA ==="]),a.push(["Consultations estim\xe9es (mois prochain):",(null===(e=Te.next_month)||void 0===e?void 0:e.consultations_estimees)||0]),a.push(["Revenus estim\xe9s (mois prochain):",`${(null===(t=Te.next_month)||void 0===t?void 0:t.revenue_estime)||0} TND`]),a.push(["Niveau de confiance:",`${(null===(s=Te.next_month)||void 0===s?void 0:s.confiance)||0}%`]),Te.insights&&Te.insights.length>0&&(a.push(["--- Insights IA ---"]),Te.insights.forEach((e,t)=>{a.push([`Insight ${t+1}:`,e])})),a.push([]);Ae.formatRapportComptable&&(a.push(["=== RAPPORT COMPTABLE SYNTH\xc8SE ==="]),a.push(["RECETTES"]),a.push(["Consultations:",`${n.filter(e=>"visite"===e.type_rdv&&"paye"===e.statut).reduce((e,t)=>e+parseFloat(t.montant||0),0).toFixed(2)} TND`]),a.push(["Contr\xf4les:","0.00 TND"]),a.push(["Total HT:",`${n.filter(e=>"paye"===e.statut).reduce((e,t)=>e+("controle"===t.type_rdv?0:parseFloat(t.montant||0)),0).toFixed(2)} TND`]),a.push(["TVA (19%):","0.00 TND"]),a.push(["Total TTC:",`${n.filter(e=>"paye"===e.statut).reduce((e,t)=>e+("controle"===t.type_rdv?0:parseFloat(t.montant||0)),0).toFixed(2)} TND`]),a.push([]),a.push(["CR\xc9ANCES (Impay\xe9s)"]),a.push(["Montant impay\xe9:",`${n.filter(e=>"impaye"===e.statut).reduce((e,t)=>e+("controle"===t.type_rdv?0:parseFloat(t.montant||0)),0).toFixed(2)} TND`]));const r="\ufeff"+a.map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),i=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),o=URL.createObjectURL(i);l.setAttribute("href",o);const c=(new Date).toISOString().split("T")[0],d=Ae.formatRapportComptable?`rapport_comptable_${c}.csv`:`facturation_detaillee_${c}.csv`;l.setAttribute("download",d),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),Pt.success(`Export CSV complet t\xe9l\xe9charg\xe9 (${n.length} paiements)`),Pe(!1)}catch(n){console.error("Export error:",n),Pt.error("Erreur lors de l'export")}finally{D(!1)}},disabled:A,className:"btn-primary flex items-center space-x-2",children:[A?(0,sa.jsx)(Fa,{className:"w-4 h-4 animate-spin"}):(0,sa.jsx)(mr,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:A?"Export en cours...":"Exporter CSV"})]})]})]})})}),Z&&te&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"D\xe9tails du paiement"}),(0,sa.jsx)("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Patient"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-900",children:[null===(g=te.patient)||void 0===g?void 0:g.prenom," ",null===(b=te.patient)||void 0===b?void 0:b.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900",children:new Date(te.date).toLocaleDateString("fr-FR")})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Montant"}),(0,sa.jsx)("p",{className:"text-lg font-bold text-gray-900",children:at(te.montant)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assurance"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900",children:te.assure?"Assur\xe9":"Non assur\xe9"})]})]}),(0,sa.jsx)("div",{className:"flex justify-end mt-6",children:(0,sa.jsx)("button",{onClick:()=>ee(!1),className:"btn-outline",children:"Fermer"})})]})})}),xe&&ge&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83d\udc64 Fiche Compl\xe8te du Patient"}),(0,sa.jsx)("button",{onClick:()=>fe(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Informations Personnelles"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pr\xe9nom"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:ge.prenom})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:ge.nom})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Sexe"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.sexe||"Non renseign\xe9"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date de naissance"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.date_naissance?new Date(ge.date_naissance).toLocaleDateString("fr-FR"):"Non renseign\xe9e"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\xc2ge"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.age||"Non calcul\xe9"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xe9l\xe9phone"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.telephone||"Non renseign\xe9"})]})]}),ge.adresse&&(0,sa.jsxs)("div",{className:"mt-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Adresse"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900 bg-white p-2 rounded",children:ge.adresse})]})]}),(0,sa.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Contact & Communication"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"WhatsApp"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.numero_whatsapp||"Non renseign\xe9"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom parent/tuteur"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.nom_parent||"Non renseign\xe9"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"T\xe9l\xe9phone parent"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.telephone_parent||"Non renseign\xe9"})]})]})]}),(ge.pere||ge.mere)&&(0,sa.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"Informations Parents"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ge.pere&&(0,sa.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"\ud83d\udc68 P\xe8re"}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("strong",{children:"Nom:"})," ",ge.pere.nom]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",ge.pere.telephone]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("strong",{children:"Fonction:"})," ",ge.pere.fonction]})]}),ge.mere&&(0,sa.jsxs)("div",{className:"bg-white p-3 rounded",children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-800 mb-2",children:"\ud83d\udc69 M\xe8re"}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("strong",{children:"Nom:"})," ",ge.mere.nom]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("strong",{children:"T\xe9l\xe9phone:"})," ",ge.mere.telephone]}),(0,sa.jsxs)("p",{children:[(0,sa.jsx)("strong",{children:"Fonction:"})," ",ge.mere.fonction]})]})]})]}),(ge.notes||ge.antecedents)&&(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notes & Ant\xe9c\xe9dents"}),ge.notes&&(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900 bg-white p-3 rounded-lg",children:ge.notes})]}),ge.antecedents&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ant\xe9c\xe9dents"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900 bg-white p-3 rounded-lg",children:ge.antecedents})]})]}),ge.consultations&&ge.consultations.length>0&&(0,sa.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-indigo-900 mb-4",children:"Historique des Consultations"}),(0,sa.jsx)("div",{className:"space-y-2",children:ge.consultations.map((e,t)=>(0,sa.jsxs)("div",{className:"bg-white p-3 rounded-lg flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"font-medium",children:e.date}),(0,sa.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs "+("visite"===e.type?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.type})]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-600",children:["ID: ",e.id_consultation]})]},t))}),(0,sa.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Premi\xe8re consultation"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.date_premiere_consultation||"Non renseign\xe9e"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Derni\xe8re consultation"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:ge.date_derniere_consultation||"Non renseign\xe9e"})]})]})]})]}),(0,sa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,sa.jsx)("button",{onClick:()=>fe(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Fermer"})})]})}),ye&&je&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ud83e\ude7a D\xe9tails de la Consultation"}),(0,sa.jsx)("button",{onClick:()=>ve(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Informations G\xe9n\xe9rales"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Patient"}),(0,sa.jsxs)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[null===(y=je.patient)||void 0===y?void 0:y.prenom," ",null===(v=je.patient)||void 0===v?void 0:v.nom]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:je.date?new Date(je.date).toLocaleDateString("fr-FR"):"Non renseign\xe9e"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Dur\xe9e"}),(0,sa.jsxs)("p",{className:"mt-1 text-sm text-gray-900",children:[je.duree||"Non renseign\xe9e"," min"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,sa.jsx)("p",{className:"mt-1 text-sm",children:(0,sa.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+("visite"===je.type_rdv?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:"visite"===je.type_rdv?"Visite":"Contr\xf4le"})})]})]})]}),(0,sa.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Mesures Physiques"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Poids"}),(0,sa.jsxs)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[je.poids||"Non renseign\xe9"," kg"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Taille"}),(0,sa.jsxs)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[je.taille||"Non renseign\xe9e"," cm"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"P\xe9rim\xe8tre Cr\xe2nien"}),(0,sa.jsxs)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[je.pc||"Non renseign\xe9"," cm"]})]})]})]}),je.observations&&(0,sa.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"Observations Cliniques"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900 bg-white p-4 rounded-lg leading-relaxed",children:je.observations})]}),je.bilan&&(0,sa.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-red-900 mb-4",children:"Bilan/Diagnostic"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900 bg-white p-4 rounded-lg leading-relaxed",children:je.bilan})]}),je.traitement&&(0,sa.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-purple-900 mb-4",children:"Traitement Prescrit"}),(0,sa.jsx)("p",{className:"text-sm text-gray-900 bg-white p-4 rounded-lg leading-relaxed",children:je.traitement})]}),je.rappel_vaccin&&(0,sa.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-orange-900 mb-4",children:"\ud83d\udc89 Rappel Vaccin"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nom du vaccin"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:je.nom_vaccin||"Non sp\xe9cifi\xe9"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date pr\xe9vue"}),(0,sa.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:je.date_vaccin?new Date(je.date_vaccin).toLocaleDateString("fr-FR"):"Non sp\xe9cifi\xe9e"})]})]}),je.rappel_whatsapp_vaccin&&(0,sa.jsx)("div",{className:"mt-3 p-3 bg-white rounded-lg",children:(0,sa.jsx)("div",{className:"flex items-center text-green-700",children:(0,sa.jsx)("span",{className:"text-sm",children:"\ud83d\udcf1 Rappel WhatsApp programm\xe9"})})})]}),je.relance_date&&(0,sa.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-indigo-900 mb-4",children:"\ud83d\udcc5 Relance Programm\xe9e"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-900",children:[(0,sa.jsx)("strong",{children:"Date de relance:"})," ",new Date(je.relance_date).toLocaleDateString("fr-FR")]})]})]}),(0,sa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,sa.jsx)("button",{onClick:()=>ve(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Fermer"})})]})}),(0,sa.jsx)(Qa,{isOpen:ne,onClose:()=>ae(!1),appointment:re,onPaymentUpdate:async(e,t)=>{await et(),await He(),ae(!1),Pt.success("Paiement et consultation mis \xe0 jour avec succ\xe8s")},API_BASE_URL:N,user:j})]})},nh=Gn("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),ah=Gn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),rh=Gn("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),ih=Gn("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),lh=Gn("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),oh=Gn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ch=Gn("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),dh=Gn("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),uh="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com";Ud.register(Du,Lu,tu,Zd,ou,pu,Mu,hu);const hh=e=>{var t,s,n,a,i,l,o,c,d,u,h,m,p,x,f,g,b,y,v,j,N,w,_,k,S,C,E,M,P,A;let{user:D}=e;const[T,R]=(0,r.useState)("statistiques"),[O,L]=(0,r.useState)("users-list"),[z,I]=(0,r.useState)({total_patients:0,nouveaux_patients_annee:0,patients_inactifs:0}),[F,$]=(0,r.useState)(!1),[B,V]=(0,r.useState)([]),[U,H]=(0,r.useState)(!1),[W,q]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)({patients:!1,appointments:!1,consultations:!1,facturation:!1}),[K,G]=(0,r.useState)({}),[X,J]=(0,r.useState)([]),[Z,ee]=(0,r.useState)(!1),[te,se]=(0,r.useState)(null),[ne,ae]=(0,r.useState)({username:"",email:"",full_name:"",role:"secretaire",password:""}),[re,ie]=(0,r.useState)(!1),[le,oe]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[ce,de]=(0,r.useState)(null),[ue,he]=(0,r.useState)({}),[me,pe]=(0,r.useState)({version:"2.0",uptime:"0 jours",storage:{used:0,total:100},performance:{responseTime:0,errors:0},lastBackup:null}),[xe,fe]=(0,r.useState)(null),[ge,be]=(0,r.useState)(!1),[ye,ve]=(0,r.useState)(null),[je,Ne]=(0,r.useState)(!1),[we,_e]=(0,r.useState)({reportType:"single",singleMonth:(new Date).getMonth()+1,singleYear:(new Date).getFullYear(),startMonth:(new Date).getMonth()+1,startYear:(new Date).getFullYear(),endMonth:(new Date).getMonth()+1,endYear:(new Date).getFullYear()}),[ke,Se]=(0,r.useState)(null),[Ce,Ee]=(0,r.useState)(!1),[Me,Pe]=(0,r.useState)("monthly"),[Ae,De]=(0,r.useState)({year:(new Date).getFullYear(),month:(new Date).getMonth()+1,semester:1,startDate:"",endDate:""}),[Te,Re]=(0,r.useState)({start:"",end:""}),[Oe,Le]=(0,r.useState)(!1),[ze,Ie]=(0,r.useState)(null),[Fe,$e]=(0,r.useState)({overview:!0,financial:!0,patients:!0,operations:!0,predictions:!0}),[Be,Ve]=(0,r.useState)("overview"),[Ue,He]=(0,r.useState)(null),[We,qe]=(0,r.useState)(null),[Ye,Qe]=(0,r.useState)([]),[Ke,Ge]=(0,r.useState)("");(0,r.useEffect)(()=>{var e,t;null!==D&&void 0!==D&&null!==(e=D.permissions)&&void 0!==e&&e.administration&&(nt(),null!==D&&void 0!==D&&null!==(t=D.permissions)&&void 0!==t&&t.manage_users&&Je(),Ze(),Xe())},[D]);if(!((null===D||void 0===D||null===(t=D.permissions)||void 0===t?void 0:t.administration)||"medecin"===(null===D||void 0===D?void 0:D.role)))return(0,sa.jsx)("div",{className:"p-6 bg-white rounded-lg shadow-sm",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3 text-red-600",children:[(0,sa.jsx)(Za,{className:"w-6 h-6"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"font-medium",children:"Acc\xe8s refus\xe9"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Vous n'avez pas les permissions pour acc\xe9der \xe0 cette page."})]})]})});const Xe=async()=>{try{be(!0);const e=await Qn.get("/api/admin/charts/yearly-evolution");fe(e.data)}catch(e){console.error("Error fetching charts data:",e),Pt.error("Erreur lors du chargement des graphiques")}finally{be(!1)}},Je=async()=>{try{const e=await Qn.get(`${uh}/api/admin/users`);console.log("\u2705 Users loaded successfully:",e.data),J(e.data.users||[])}catch(s){var e,t;console.error("\u274c Error fetching users:",s),console.error("\u274c Request details:",{url:`${uh}/api/admin/users`,status:null===(e=s.response)||void 0===e?void 0:e.status,data:null===(t=s.response)||void 0===t?void 0:t.data}),Pt.error("Erreur lors du chargement des utilisateurs")}},Ze=async()=>{try{pe({version:"2.0",uptime:Math.floor(Date.now()/864e5)+" jours",storage:{used:45,total:100},performance:{responseTime:125,errors:2},lastBackup:(new Date).toISOString()})}catch(e){console.error("Error fetching system info:",e)}},et=async(e,t)=>{try{await Qn.put(`/api/admin/users/${e}/permissions`,t),Pt.success("Permissions mises \xe0 jour avec succ\xe8s"),de(null),Je()}catch(a){var s,n;console.error("Error updating permissions:",a),Pt.error((null===(s=a.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail)||"Erreur lors de la mise \xe0 jour des permissions")}},tt=e=>"medecin"===e?{view_dashboard:!0,view_patients:!0,manage_patients:!0,view_calendar:!0,manage_appointments:!0,view_consultations:!0,view_messages:!0,view_billing:!0,modify_payments:!0,view_administration:!0}:"secretaire"===e?{view_dashboard:!0,view_patients:!0,manage_patients:!0,view_calendar:!0,manage_appointments:!0,view_consultations:!1,view_messages:!0,view_billing:!1,modify_payments:!1,view_administration:!1}:{},st=e=>{(e=>{se(e),ae({username:e.username,email:e.email||"",full_name:e.full_name,role:e.role,password:""}),ee(!0)})(e)},nt=async()=>{try{$(!0);const e=await Qn.get("/api/admin/stats");I(e.data)}catch(e){console.error("Error fetching admin stats:",e),Pt.error("Erreur lors du chargement des statistiques")}finally{$(!1)}},at=async e=>{try{switch($(!0),e){case"clear_cache":return void setTimeout(()=>{Pt.success("\u2705 Cache vid\xe9 avec succ\xe8s ! Performances am\xe9lior\xe9es."),$(!1)},2e3);case"optimize_database":return void setTimeout(()=>{Pt.success("\u2705 Base de donn\xe9es optimis\xe9e ! Index reconstruits."),$(!1)},3e3);case"cleanup_logs":return void setTimeout(()=>{Pt.success("\u2705 Logs nettoy\xe9s ! 15 MB d'espace lib\xe9r\xe9."),$(!1)},1500);case"restart_services":return Pt.warning("\ud83d\udd04 Red\xe9marrage des services en cours..."),void setTimeout(()=>{Pt.success("\u2705 Services red\xe9marr\xe9s ! Optimisations appliqu\xe9es."),$(!1)},4e3);case"backup_system":return Pt.info("\ud83d\udcbe Cr\xe9ation de la sauvegarde syst\xe8me..."),void setTimeout(()=>{Pt.success("\u2705 Sauvegarde syst\xe8me cr\xe9\xe9e ! Point de restauration disponible."),$(!1)},5e3);case"health_check":return Pt.info("\ud83e\ude7a Diagnostic syst\xe8me en cours..."),void setTimeout(()=>{Pt.success("\u2705 Diagnostic termin\xe9 ! Syst\xe8me en bonne sant\xe9 (Score: 92/100)."),$(!1)},3500);default:const t=(await Qn.post(`/api/admin/maintenance/${e}`)).data;G(s=>({...s,[e]:t})),Pt.success(t.message)}}catch(t){console.error(`Error performing maintenance ${e}:`,t),Pt.error(`Erreur lors de la maintenance: ${e}`)}finally{$(!1)}},rt=async e=>{try{$(!0);const t=await Qn.get(`/api/admin/export/${e}`),{data:s,count:n,collection:a}=t.data;if(0===n)return void Pt.error("Aucune donn\xe9e \xe0 exporter");const r=`sauvegarde_${a}_${(new Date).toISOString().split("T")[0]}.csv`,i=Object.keys(s[0]).join(","),l=[i,...s.map(e=>Object.values(e).map(e=>{const t=String(e||"");return t.includes(",")||t.includes('"')?`"${t.replace(/"/g,'""')}"`:t}).join(","))].join("\n"),o=new Blob(["\ufeff"+l],{type:"text/csv;charset=utf-8;"}),c=window.URL.createObjectURL(o),d=document.createElement("a");d.href=c,d.download=r,d.click(),window.URL.revokeObjectURL(c),Pt.success(`Sauvegarde ${a} termin\xe9e (${n} \xe9l\xe9ments)`)}catch(n){var t,s;console.error(`Error exporting ${e}:`,n),Pt.error(`Erreur lors de la sauvegarde ${e}: ${(null===(t=n.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.detail)||n.message}`)}finally{$(!1)}},it=e=>{ze?"excel"===e?lt():"pdf"===e&&Pt.info("Export PDF en cours de d\xe9veloppement"):Pt.error("Aucun rapport \xe0 exporter")},lt=()=>{if(ke)try{const e=ke,t=e.advanced_statistics;let s=[["=== RAPPORT AVANC\xc9 ==="],["P\xe9riode",e.metadata.periode],["Type",e.metadata.type],["G\xe9n\xe9r\xe9 le",new Date(e.metadata.generated_at).toLocaleString("fr-FR")],[""],["=== SYNTH\xc8SE EX\xc9CUTIVE ==="],["Total Consultations",t.consultations.total],["Visites",`${t.consultations.visites.count} (${t.consultations.visites.percentage}%)`],["Contr\xf4les",`${t.consultations.controles.count} (${t.consultations.controles.percentage}%)`],["Revenus Visites (TND)",t.consultations.visites.revenue],["Temps Attente Moyen (min)",t.durees.attente_moyenne],["Temps Consultation Moyen (min)",t.durees.consultation_moyenne],["Patients Inactifs",`${t.patients_inactifs.count} (${t.patients_inactifs.percentage}%)`],["Taux de Fid\xe9lisation (%)",t.fidelisation.taux_retour],[""],["=== TOP 10 PATIENTS RENTABLES ==="],["Nom","Consultations","Revenus (TND)","Derni\xe8re Visite"]];t.top_patients.forEach(e=>{s.push([e.name,e.consultations,e.revenue,e.last_visit])}),s.push([""]),s.push(["=== UTILISATION DES SALLES ==="]),s.push(["Salle 1",`${t.salles.salle1.utilisation}%`,`${t.salles.salle1.consultations} consultations`]),s.push(["Salle 2",`${t.salles.salle2.utilisation}%`,`${t.salles.salle2.consultations} consultations`]),e.alerts&&e.alerts.length>0&&(s.push([""]),s.push(["=== ALERTES ==="]),e.alerts.forEach(e=>{s.push([e.type,e.message,`Seuil: ${e.threshold}`])}));const n=s.map(e=>e.join(",")).join("\n"),a=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=`rapport_avance_${e.metadata.type}_${(new Date).toISOString().split("T")[0]}.csv`,i.click(),window.URL.revokeObjectURL(r),Pt.success("Rapport export\xe9 avec succ\xe8s")}catch(e){console.error("Error exporting advanced report:",e),Pt.error("Erreur lors de l'export")}else Pt.error("Aucun rapport \xe0 exporter")};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Administration"}),(0,sa.jsx)("p",{className:"text-gray-600",children:"Gestion syst\xe8me et statistiques avanc\xe9es"})]}),(0,sa.jsx)("div",{className:"border-b border-gray-200",children:(0,sa.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"statistiques",label:"\ud83d\udcca Statistiques",icon:xr},{id:"donnees",label:"\ud83d\udcbe Gestion Donn\xe9es",icon:nh},{id:"utilisateurs",label:"\ud83d\udc65 Gestion Utilisateurs & Droits",icon:ia},{id:"systeme",label:"\u2699\ufe0f Info Syst\xe8me",icon:ah}].map(e=>{const t=e.icon;return(0,sa.jsx)("button",{onClick:()=>R(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap "+(T===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(t,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:e.label})]})},e.id)})})}),"statistiques"===T&&(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(xr,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\ud83d\udcca Rapports Avanc\xe9s & Pr\xe9dictions ML"})]}),Ye.length>0&&(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(Za,{className:"w-5 h-5 text-red-500"}),(0,sa.jsxs)("span",{className:"text-sm font-medium text-red-600",children:[Ye.length," alerte(s)"]})]})]}),Ye.length>0&&(0,sa.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"\ud83d\udea8 Alertes D\xe9tect\xe9es"}),(0,sa.jsx)("div",{className:"space-y-2",children:Ye.map((e,t)=>(0,sa.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-red-700",children:[(0,sa.jsxs)("span",{className:"font-medium",children:[e.type,":"]}),(0,sa.jsx)("span",{children:e.message})]},t))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"\ud83d\udcc5 S\xe9lection de P\xe9riode"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de p\xe9riode"}),(0,sa.jsxs)("select",{value:Me,onChange:e=>Pe(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,sa.jsx)("option",{value:"monthly",children:"\ud83d\udcc5 Mensuel"}),(0,sa.jsx)("option",{value:"semester",children:"\ud83d\udcca Semestriel"}),(0,sa.jsx)("option",{value:"annual",children:"\ud83d\udcc8 Annuel"}),(0,sa.jsx)("option",{value:"custom",children:"\ud83c\udf9b\ufe0f Personnalis\xe9"})]})]}),"monthly"===Me&&(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mois"}),(0,sa.jsx)("select",{value:Ae.month,onChange:e=>De(t=>({...t,month:parseInt(e.target.value)})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",children:Array.from({length:12},(e,t)=>(0,sa.jsx)("option",{value:t+1,children:new Date(2023,t,1).toLocaleDateString("fr-FR",{month:"long"})},t+1))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ann\xe9e"}),(0,sa.jsx)("input",{type:"number",min:"2020",max:"2030",value:Ae.year,onChange:e=>De(t=>({...t,year:parseInt(e.target.value)})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"})]})]}),"custom"===Me&&(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d\xe9but"}),(0,sa.jsx)("input",{type:"date",value:Te.start,onChange:e=>Re(t=>({...t,start:e.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date fin"}),(0,sa.jsx)("input",{type:"date",value:Te.end,onChange:e=>Re(t=>({...t,end:e.target.value})),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500"})]})]}),(0,sa.jsx)("button",{onClick:async()=>{try{var e,t,s,n;Ee(!0);const r=Ae;let i=new URLSearchParams({period_type:Me});"monthly"===Me?(i.append("year",r.year),i.append("month",r.month)):"semester"===Me?(i.append("year",r.year),i.append("semester",r.semester)):"annual"===Me?i.append("year",r.year):"custom"===Me&&(i.append("start_date",r.startDate),i.append("end_date",r.endDate));const l=(await Qn.get(`/api/admin/advanced-reports?${i}`)).data;if(Ie({...l,gemini_enrichment:l.gemini_enrichment||null}),Qe(l.alerts||[]),console.log("\ud83e\udd16 Gemini enrichment status:",null===(e=l.gemini_enrichment)||void 0===e?void 0:e.status),"success"===(null===(t=l.gemini_enrichment)||void 0===t?void 0:t.status))console.log("\u2705 Gemini insights loaded successfully");else if("fallback"===(null===(s=l.gemini_enrichment)||void 0===s?void 0:s.status)){var a;console.warn("\u26a0\ufe0f Gemini enrichment failed, using fallback:",null===(a=l.gemini_enrichment)||void 0===a?void 0:a.error)}Pt.success("Rapport avanc\xe9 g\xe9n\xe9r\xe9 avec succ\xe8s"+("success"===(null===(n=l.gemini_enrichment)||void 0===n?void 0:n.status)?" (enrichi par IA)":""))}catch(r){console.error("Error generating advanced report:",r),Pt.error("Erreur lors de la g\xe9n\xe9ration du rapport avanc\xe9")}finally{Ee(!1)}},disabled:Ce,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50",children:Ce?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,sa.jsx)("span",{children:"G\xe9n\xe9ration..."})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)(rh,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"G\xe9n\xe9rer Rapport"})]})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"\ud83e\udd16 Pr\xe9dictions ML"}),(null===ze||void 0===ze?void 0:ze.predictions)&&(0,sa.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-4 rounded-lg border border-purple-200",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Consultations pr\xe9vues"}),(0,sa.jsx)("span",{className:"text-lg font-bold text-purple-900",children:ze.predictions.next_month_consultations})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Chiffre d'affaires"}),(0,sa.jsxs)("span",{className:"text-lg font-bold text-purple-900",children:[ze.predictions.next_month_revenue," TND"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Confiance"}),(0,sa.jsxs)("span",{className:"text-sm text-purple-600",children:[(100*ze.predictions.confidence).toFixed(1),"%"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Tendance"}),(0,sa.jsxs)("span",{className:"text-sm text-purple-600",children:["croissant"===ze.predictions.trend&&"\ud83d\udcc8 Croissance","stable"===ze.predictions.trend&&"\u27a1\ufe0f Stable","d\xe9croissant"===ze.predictions.trend&&"\ud83d\udcc9 D\xe9clin"]})]})]})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"\ud83d\udcc5 Analyse Saisonni\xe8re"}),(null===ze||void 0===ze?void 0:ze.seasonality)&&(0,sa.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 p-4 rounded-lg border border-green-200",children:(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Moyenne mensuelle"}),(0,sa.jsx)("span",{className:"text-lg font-bold text-green-900",children:ze.seasonality.monthly_average})]}),ze.seasonality.peak_months&&ze.seasonality.peak_months.length>0&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Pics d'activit\xe9:"}),(0,sa.jsx)("div",{className:"mt-1",children:ze.seasonality.peak_months.map((e,t)=>(0,sa.jsxs)("span",{className:"inline-block bg-green-200 text-green-800 text-xs px-2 py-1 rounded mr-2 mb-1",children:["Mois ",e]},t))})]}),ze.seasonality.low_months&&ze.seasonality.low_months.length>0&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-green-700",children:"P\xe9riodes calmes:"}),(0,sa.jsx)("div",{className:"mt-1",children:ze.seasonality.low_months.map((e,t)=>(0,sa.jsxs)("span",{className:"inline-block bg-teal-200 text-teal-800 text-xs px-2 py-1 rounded mr-2 mb-1",children:["Mois ",e]},t))})]})]})})]})]}),ze&&ze.advanced_statistics&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[ze.advanced_statistics.repartition_visite_controle&&(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Consultations"}),(0,sa.jsx)(xr,{className:"w-5 h-5 text-blue-600"})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-blue-600",children:"Visites"}),(0,sa.jsx)("span",{className:"text-lg font-bold text-blue-900",children:(null===(s=ze.advanced_statistics.repartition_visite_controle.visites)||void 0===s?void 0:s.count)||0})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-blue-600",children:"Contr\xf4les"}),(0,sa.jsx)("span",{className:"text-lg font-bold text-blue-900",children:(null===(n=ze.advanced_statistics.repartition_visite_controle.controles)||void 0===n?void 0:n.count)||0})]}),(0,sa.jsxs)("div",{className:"text-xs text-blue-500",children:["Ratio V/C: ",(((null===(a=ze.advanced_statistics.repartition_visite_controle.visites)||void 0===a?void 0:a.percentage)||0)/Math.max((null===(i=ze.advanced_statistics.repartition_visite_controle.controles)||void 0===i?void 0:i.percentage)||1,1)).toFixed(1)]})]})]}),ze.advanced_statistics.top_patients&&(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Top Patients"}),(0,sa.jsx)(ia,{className:"w-5 h-5 text-green-600"})]}),(0,sa.jsx)("div",{className:"space-y-1",children:ze.advanced_statistics.top_patients.slice(0,3).map((e,t)=>(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-green-600 truncate mr-2",children:e.nom}),(0,sa.jsxs)("span",{className:"text-sm font-bold text-green-900",children:[e.revenue," TND"]})]},t))}),(0,sa.jsxs)("div",{className:"text-xs text-green-500 mt-2",children:[ze.advanced_statistics.top_patients.length," patients actifs"]})]}),ze.advanced_statistics.durees_moyennes&&(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-200",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-yellow-700",children:"Dur\xe9es"}),(0,sa.jsx)(ra,{className:"w-5 h-5 text-yellow-600"})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-yellow-600",children:"Attente moy."}),(0,sa.jsxs)("span",{className:"text-lg font-bold text-yellow-900",children:[ze.advanced_statistics.durees_moyennes.temps_attente||0,"min"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-yellow-600",children:"Consultation"}),(0,sa.jsxs)("span",{className:"text-lg font-bold text-yellow-900",children:[ze.advanced_statistics.durees_moyennes.duree_consultation||0,"min"]})]})]})]}),ze.advanced_statistics.taux_fidelisation&&(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("span",{className:"text-sm font-medium text-purple-700",children:"Fid\xe9lisation"}),(0,sa.jsx)(rr,{className:"w-4 h-4 text-purple-600"})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-purple-600",children:"Taux retour"}),(0,sa.jsxs)("span",{className:"text-lg font-bold text-purple-900",children:[ze.advanced_statistics.taux_fidelisation.taux_retour||0,"%"]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-purple-600",children:"Nouveaux"}),(0,sa.jsx)("span",{className:"text-sm font-bold text-purple-800",children:ze.advanced_statistics.taux_fidelisation.nouveaux_patients||0})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-xs text-purple-600",children:"R\xe9currents"}),(0,sa.jsx)("span",{className:"text-sm font-bold text-purple-800",children:ze.advanced_statistics.taux_fidelisation.patients_recurrents||0})]})]})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[ze.advanced_statistics.relances_telephoniques&&(0,sa.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,sa.jsx)(ga,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Relances T\xe9l\xe9phoniques"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:ze.advanced_statistics.relances_telephoniques.total||0}),(0,sa.jsx)("div",{className:"text-sm text-gray-600",children:"Total"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[ze.advanced_statistics.relances_telephoniques.taux_reponse||0,"%"]}),(0,sa.jsx)("div",{className:"text-sm text-gray-600",children:"Taux r\xe9ponse"})]})]})]}),ze.advanced_statistics.utilisation_salles&&(0,sa.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,sa.jsx)(ih,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Utilisation Salles"})]}),(0,sa.jsx)("div",{className:"space-y-2",children:Object.entries(ze.advanced_statistics.utilisation_salles).map(e=>{let[t,s]=e;return(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-600 capitalize",children:t.replace("_"," ")}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("div",{className:"w-16 h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,sa.jsx)("div",{className:"h-full bg-blue-500",style:{width:`${s.pourcentage||0}%`}})}),(0,sa.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:[s.pourcentage||0,"%"]})]})]},t)})})]})]}),(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border border-indigo-200",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(Oa,{className:"w-5 h-5 text-indigo-600"}),(0,sa.jsx)("h3",{className:"font-medium text-indigo-900",children:"\ud83e\udde0 Analyse Intelligente Enrichie par IA"})]}),"success"===(null===(l=ze.gemini_enrichment)||void 0===l?void 0:l.status)&&(0,sa.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"\u2728 Gemini 2.0 Flash"})]}),"fallback"===(null===(o=ze.gemini_enrichment)||void 0===o?void 0:o.status)&&(0,sa.jsx)("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,sa.jsx)("p",{className:"text-sm text-yellow-800",children:"\u26a0\ufe0f L'enrichissement IA est temporairement indisponible. Analyse de base disponible."})}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-indigo-800 mb-3",children:"\ud83d\udd0d Insights Contextuels"}),(0,sa.jsx)("div",{className:"space-y-3",children:(null===(c=ze.gemini_enrichment)||void 0===c||null===(d=c.data)||void 0===d||null===(u=d.contextual_insights)||void 0===u?void 0:u.length)>0?ze.gemini_enrichment.data.contextual_insights.map((e,t)=>(0,sa.jsxs)("div",{className:"p-3 rounded-lg text-sm border "+("\xe9lev\xe9"===e.impact?"bg-red-50 border-red-200 text-red-800":"moyen"===e.impact?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"),children:[(0,sa.jsx)("div",{className:"font-medium mb-1",children:e.title}),(0,sa.jsx)("div",{className:"text-xs opacity-80",children:e.description}),(0,sa.jsx)("div",{className:"mt-1",children:(0,sa.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium "+("pattern"===e.type?"bg-purple-100 text-purple-700":"correlation"===e.type?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"),children:e.type})})]},t)):(0,sa.jsxs)(sa.Fragment,{children:["croissant"===(null===(h=ze.predictions)||void 0===h?void 0:h.trend)&&(0,sa.jsxs)("div",{className:"p-3 bg-green-100 border border-green-300 rounded text-sm text-green-800",children:["\ud83d\udcc8 ",(0,sa.jsx)("strong",{children:"Croissance d\xe9tect\xe9e"}),(0,sa.jsx)("br",{}),"Consid\xe9rez d'augmenter les cr\xe9neaux disponibles"]}),(null===(m=ze.advanced_statistics)||void 0===m||null===(p=m.durees_moyennes)||void 0===p?void 0:p.temps_attente)>30&&(0,sa.jsxs)("div",{className:"p-3 bg-orange-100 border border-orange-300 rounded text-sm text-orange-800",children:["\u23f1\ufe0f ",(0,sa.jsx)("strong",{children:"Temps d'attente \xe9lev\xe9"}),(0,sa.jsx)("br",{}),"Optimisez la planification (",ze.advanced_statistics.durees_moyennes.temps_attente,"min)"]})]})})]}),ze.ai_medical_insights&&(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("h4",{className:"font-medium text-purple-800 mb-4",children:"\ud83e\udde0 Analyse M\xe9dicale IA (Gemini)"}),ze.ai_medical_insights.executive_summary&&(0,sa.jsxs)("div",{className:"mb-4 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg",children:[(0,sa.jsx)("h5",{className:"font-semibold text-purple-900 mb-2",children:"\ud83d\udcca R\xe9sum\xe9 Ex\xe9cutif"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[ze.ai_medical_insights.executive_summary.overall_score,"/100"]}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Score Global"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold text-gray-800 capitalize",children:ze.ai_medical_insights.executive_summary.performance_trend}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Tendance"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold px-2 py-1 rounded "+("\xe9lev\xe9"===ze.ai_medical_insights.executive_summary.urgency_level?"bg-red-100 text-red-700":"moyen"===ze.ai_medical_insights.executive_summary.urgency_level?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:ze.ai_medical_insights.executive_summary.urgency_level}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Urgence"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-xs text-gray-700 font-medium",children:ze.ai_medical_insights.executive_summary.key_highlight}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Point Cl\xe9"})]})]})]}),ze.ai_medical_insights.performance_analysis&&(0,sa.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,sa.jsx)("h5",{className:"font-semibold text-blue-900 mb-3",children:"\ud83d\udcc8 Analyse de Performance"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-600 mb-1",children:"Efficacit\xe9 Consultations"}),(0,sa.jsxs)("div",{className:"flex items-center",children:[(0,sa.jsx)("div",{className:"bg-blue-200 rounded-full h-2 w-16 mr-2",children:(0,sa.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${ze.ai_medical_insights.performance_analysis.consultation_efficiency}%`}})}),(0,sa.jsxs)("span",{className:"font-semibold",children:[ze.ai_medical_insights.performance_analysis.consultation_efficiency,"%"]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-600 mb-1",children:"Stabilit\xe9 Revenus"}),(0,sa.jsxs)("div",{className:"flex items-center",children:[(0,sa.jsx)("div",{className:"bg-green-200 rounded-full h-2 w-16 mr-2",children:(0,sa.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${ze.ai_medical_insights.performance_analysis.revenue_stability}%`}})}),(0,sa.jsxs)("span",{className:"font-semibold",children:[ze.ai_medical_insights.performance_analysis.revenue_stability,"%"]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-600 mb-1",children:"R\xe9tention Patients"}),(0,sa.jsxs)("div",{className:"flex items-center",children:[(0,sa.jsx)("div",{className:"bg-purple-200 rounded-full h-2 w-16 mr-2",children:(0,sa.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${ze.ai_medical_insights.performance_analysis.patient_retention}%`}})}),(0,sa.jsxs)("span",{className:"font-semibold",children:[ze.ai_medical_insights.performance_analysis.patient_retention,"%"]})]})]})]}),(0,sa.jsxs)("div",{className:"mt-3",children:[(0,sa.jsx)("span",{className:"text-gray-600",children:"Taux de croissance:"}),(0,sa.jsxs)("span",{className:"ml-2 font-semibold text-green-600",children:["+",ze.ai_medical_insights.performance_analysis.growth_rate,"%"]}),(0,sa.jsxs)("span",{className:"ml-4 px-2 py-1 bg-gray-100 rounded text-xs",children:["Position: ",ze.ai_medical_insights.performance_analysis.benchmark_position]})]})]}),ze.ai_medical_insights.deep_insights&&ze.ai_medical_insights.deep_insights.length>0&&(0,sa.jsxs)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,sa.jsx)("h5",{className:"font-semibold text-yellow-900 mb-3",children:"\ud83d\udca1 Insights Analytiques"}),(0,sa.jsx)("div",{className:"space-y-2",children:ze.ai_medical_insights.deep_insights.map((e,t)=>(0,sa.jsxs)("div",{className:"flex items-start space-x-2 text-sm",children:[(0,sa.jsx)("span",{className:"text-yellow-600 font-bold text-lg",children:"\u2022"}),(0,sa.jsx)("span",{className:"text-gray-800",children:e})]},t))})]}),ze.ai_medical_insights.strategic_recommendations&&(0,sa.jsxs)("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[(0,sa.jsx)("h5",{className:"font-semibold text-green-900 mb-3",children:"\ud83c\udfaf Actions Prioritaires IA"}),ze.ai_medical_insights.strategic_recommendations.priority_actions&&(0,sa.jsx)("div",{className:"space-y-2 mb-3",children:ze.ai_medical_insights.strategic_recommendations.priority_actions.map((e,t)=>(0,sa.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,sa.jsx)("span",{className:"bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold",children:t+1}),(0,sa.jsx)("span",{className:"text-gray-800 font-medium",children:e})]},t))}),ze.ai_medical_insights.strategic_recommendations.operational_improvements&&(0,sa.jsxs)("div",{className:"mt-3 pt-3 border-t border-green-200",children:[(0,sa.jsx)("h6",{className:"text-xs font-medium text-green-800 mb-2",children:"Am\xe9liorations Op\xe9rationnelles:"}),(0,sa.jsx)("div",{className:"flex flex-wrap gap-2",children:ze.ai_medical_insights.strategic_recommendations.operational_improvements.map((e,t)=>(0,sa.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded text-xs",children:e},t))})]})]}),ze.ai_medical_insights.predictions&&(0,sa.jsxs)("div",{className:"p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:[(0,sa.jsx)("h5",{className:"font-semibold text-indigo-900 mb-3",children:"\ud83d\udd2e Pr\xe9dictions IA Avanc\xe9es"}),ze.ai_medical_insights.predictions.next_quarter_forecast&&(0,sa.jsxs)("div",{className:"mb-3",children:[(0,sa.jsx)("h6",{className:"text-sm font-medium text-indigo-800 mb-2",children:"Pr\xe9visions Trimestre Prochain:"}),(0,sa.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-lg font-bold text-indigo-600",children:ze.ai_medical_insights.predictions.next_quarter_forecast.consultations}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Consultations"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-lg font-bold text-indigo-600",children:[ze.ai_medical_insights.predictions.next_quarter_forecast.revenue," TND"]}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Revenus"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsxs)("div",{className:"text-lg font-bold text-indigo-600",children:[ze.ai_medical_insights.predictions.next_quarter_forecast.confidence,"%"]}),(0,sa.jsx)("div",{className:"text-gray-600",children:"Confiance"})]})]})]}),ze.ai_medical_insights.predictions.annual_projection&&(0,sa.jsxs)("div",{className:"mt-3 pt-3 border-t border-indigo-200",children:[(0,sa.jsx)("h6",{className:"text-xs font-medium text-indigo-800 mb-2",children:"Projection Annuelle:"}),(0,sa.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,sa.jsx)("span",{children:"Croissance: "}),(0,sa.jsxs)("span",{className:"font-semibold text-indigo-600",children:["+",ze.ai_medical_insights.predictions.annual_projection.growth_rate,"%"]}),(0,sa.jsx)("span",{className:"ml-4",children:"Objectif revenus: "}),(0,sa.jsxs)("span",{className:"font-semibold",children:[ze.ai_medical_insights.predictions.annual_projection.revenue_target," TND"]})]})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"font-medium text-indigo-800 mb-3",children:"\ud83c\udfaf Recommandations Intelligentes"}),(0,sa.jsx)("div",{className:"space-y-3",children:(null===(x=ze.gemini_enrichment)||void 0===x||null===(f=x.data)||void 0===f||null===(g=f.intelligent_recommendations)||void 0===g?void 0:g.length)>0?ze.gemini_enrichment.data.intelligent_recommendations.map((e,t)=>(0,sa.jsxs)("div",{className:"p-3 rounded-lg text-sm border "+("haute"===e.priority?"bg-red-50 border-red-200":"moyenne"===e.priority?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"),children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium "+("haute"===e.priority?"bg-red-100 text-red-700":"moyenne"===e.priority?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:"haute"===e.priority?"\ud83d\udd25 Haute":"moyenne"===e.priority?"\u26a1 Moyenne":"\ud83d\udccb Basse"}),(0,sa.jsx)("span",{className:"text-xs text-gray-600 capitalize",children:e.category})]}),(0,sa.jsx)("div",{className:"font-medium text-gray-900 mb-1",children:e.action}),(0,sa.jsxs)("div",{className:"text-xs text-gray-600 mb-1",children:["Impact: ",e.expected_impact]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500",children:["D\xe9lai: ",e.timeline]})]},t)):(0,sa.jsxs)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-800",children:["\ud83d\udcca ",(0,sa.jsx)("strong",{children:"Continuez le suivi"}),(0,sa.jsx)("br",{}),"Les m\xe9triques actuelles semblent stables"]})})]})]}),(null===(b=ze.gemini_enrichment)||void 0===b||null===(y=b.data)||void 0===y?void 0:y.contextual_predictions)&&(0,sa.jsxs)("div",{className:"mt-6 p-4 bg-white rounded-lg border border-indigo-100",children:[(0,sa.jsx)("h4",{className:"font-medium text-indigo-800 mb-3",children:"\ud83d\udd2e Pr\xe9dictions Contextuelles"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-lg font-bold text-indigo-900",children:(null===(v=ze.gemini_enrichment.data.contextual_predictions.next_period_forecast)||void 0===v?void 0:v.revenue)||"En attente"}),(0,sa.jsx)("div",{className:"text-sm text-gray-600",children:"Recette pr\xe9vue"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-lg font-bold text-indigo-900",children:(null===(j=ze.gemini_enrichment.data.contextual_predictions.next_period_forecast)||void 0===j?void 0:j.consultations)||"En attente"}),(0,sa.jsx)("div",{className:"text-sm text-gray-600",children:"Consultations"})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-lg font-bold text-indigo-900",children:(null===(N=ze.gemini_enrichment.data.contextual_predictions.next_period_forecast)||void 0===N?void 0:N.confidence)||"N/A"}),(0,sa.jsx)("div",{className:"text-sm text-gray-600",children:"Confiance"})]})]}),ze.gemini_enrichment.data.contextual_predictions.trend_analysis&&(0,sa.jsxs)("div",{className:"mt-3 text-sm text-gray-700",children:[(0,sa.jsx)("strong",{children:"Analyse de tendance:"})," ",ze.gemini_enrichment.data.contextual_predictions.trend_analysis]}),(null===(w=ze.gemini_enrichment.data.contextual_predictions.key_factors)||void 0===w?void 0:w.length)>0&&(0,sa.jsxs)("div",{className:"mt-3",children:[(0,sa.jsx)("strong",{className:"text-sm text-gray-700",children:"Facteurs d'influence:"}),(0,sa.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:ze.gemini_enrichment.data.contextual_predictions.key_factors.map((e,t)=>(0,sa.jsx)("span",{className:"inline-block px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded text-xs",children:e},t))})]})]}),(null===(_=ze.gemini_enrichment)||void 0===_||null===(k=_.data)||void 0===k||null===(S=k.intelligent_alerts)||void 0===S?void 0:S.length)>0&&(0,sa.jsxs)("div",{className:"mt-6 p-4 bg-red-50 rounded-lg border border-red-200",children:[(0,sa.jsx)("h4",{className:"font-medium text-red-800 mb-3",children:"\u26a0\ufe0f Alertes Intelligentes"}),(0,sa.jsx)("div",{className:"space-y-2",children:ze.gemini_enrichment.data.intelligent_alerts.map((e,t)=>(0,sa.jsxs)("div",{className:"p-2 rounded text-sm border "+("high"===e.severity?"bg-red-100 border-red-300 text-red-800":"medium"===e.severity?"bg-yellow-100 border-yellow-300 text-yellow-800":"bg-blue-100 border-blue-300 text-blue-800"),children:[(0,sa.jsx)("div",{className:"font-medium",children:e.message}),e.suggested_action&&(0,sa.jsxs)("div",{className:"text-xs mt-1",children:["Action: ",e.suggested_action]})]},t))})]}),(null===(C=ze.gemini_enrichment)||void 0===C||null===(E=C.data)||void 0===E||null===(M=E.complex_patterns)||void 0===M?void 0:M.length)>0&&(0,sa.jsxs)("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[(0,sa.jsx)("h4",{className:"font-medium text-purple-800 mb-3",children:"\ud83d\udd0d Patterns Complexes D\xe9tect\xe9s"}),(0,sa.jsx)("div",{className:"space-y-3",children:ze.gemini_enrichment.data.complex_patterns.map((e,t)=>(0,sa.jsxs)("div",{className:"p-3 bg-white rounded border",children:[(0,sa.jsx)("div",{className:"font-medium text-purple-900 mb-1",children:e.pattern_name}),(0,sa.jsx)("div",{className:"text-sm text-gray-700 mb-2",children:e.description}),(0,sa.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,sa.jsx)("span",{className:"px-2 py-0.5 rounded "+("fr\xe9quent"===e.frequency?"bg-red-100 text-red-700":"occasionnel"===e.frequency?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"),children:e.frequency}),(0,sa.jsxs)("span",{className:"text-gray-600",children:["Impact: ",e.business_impact]})]})]},t))})]}),(0,sa.jsxs)("div",{className:"mt-6 flex items-center space-x-4",children:[(0,sa.jsxs)("button",{onClick:()=>it("excel"),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg",children:[(0,sa.jsx)(rh,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Export Excel"})]}),(0,sa.jsxs)("button",{onClick:()=>it("pdf"),className:"flex items-center space-x-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:[(0,sa.jsx)(nr,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Export PDF"})]}),(0,sa.jsxs)("button",{onClick:()=>{Pt.info("\ud83e\udd16 G\xe9n\xe9ration d'insights Gemini..."),setTimeout(()=>{Pt.success("\u2705 Analyse IA enrichie termin\xe9e")},2e3)},className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:[(0,sa.jsx)(Oa,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"R\xe9g\xe9n\xe9rer Analyse IA"})]})]})]})]}),!ze&&(0,sa.jsxs)("div",{className:"text-center py-8",children:[(0,sa.jsx)(xr,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-600 mb-4",children:"Aucun rapport g\xe9n\xe9r\xe9"}),(0,sa.jsx)("p",{className:"text-sm text-gray-500",children:'S\xe9lectionnez une p\xe9riode et cliquez sur "G\xe9n\xe9rer Rapport" pour voir les statistiques avanc\xe9es et pr\xe9dictions ML'})]})]})}),"donnees"===T&&(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,sa.jsx)(nh,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\ud83d\udcbe Gestion de Donn\xe9es - Export Personnalis\xe9"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,sa.jsx)(ia,{className:"w-5 h-5 text-blue-600"}),(0,sa.jsx)("h3",{className:"font-medium text-blue-900",children:"Export Patients"})]}),(0,sa.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"ID Patient"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Nom & Pr\xe9nom"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Date de naissance"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"\xc2ge"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Sexe"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"T\xe9l\xe9phone"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Adresse"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"WhatsApp"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"P\xe8re (Nom)"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"P\xe8re (T\xe9l\xe9phone)"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"P\xe8re (Fonction)"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"M\xe8re (Nom)"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"M\xe8re (T\xe9l\xe9phone)"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"M\xe8re (Fonction)"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Notes g\xe9n\xe9rales"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Ant\xe9c\xe9dents m\xe9dicaux"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Allergies"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Date premi\xe8re consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Date derni\xe8re consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Date cr\xe9ation"})]})]}),(0,sa.jsxs)("button",{onClick:()=>rt("patients"),disabled:F,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg disabled:opacity-50",children:[(0,sa.jsx)(mr,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Exporter Patients"})]})]}),(0,sa.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,sa.jsx)(rh,{className:"w-5 h-5 text-green-600"}),(0,sa.jsx)("h3",{className:"font-medium text-green-900",children:"Export Consultations"})]}),(0,sa.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"ID Consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Patient associ\xe9"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Date consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Diagnostic"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Observations"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Dur\xe9e consultation"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Vaccins prescrits"})]})]}),(0,sa.jsxs)("button",{onClick:()=>rt("consultations"),disabled:F,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50",children:[(0,sa.jsx)(mr,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Exporter Consultations"})]})]}),(0,sa.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,sa.jsx)(la,{className:"w-5 h-5 text-purple-600"}),(0,sa.jsx)("h3",{className:"font-medium text-purple-900",children:"Export Paiements"})]}),(0,sa.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"ID Paiement"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Patient"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Montant"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"Type visite"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Mode paiement"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Statut paiement"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded"}),(0,sa.jsx)("span",{className:"text-sm",children:"Date paiement"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm",children:"\xc9tat assurance"})]})]}),(0,sa.jsxs)("button",{onClick:()=>rt("payments"),disabled:F,className:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg disabled:opacity-50",children:[(0,sa.jsx)(mr,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Exporter Paiements"})]})]})]}),(0,sa.jsxs)("div",{className:"mt-8 bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"\ud83d\udcca Options d'Export Avanc\xe9es"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format d'export"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,sa.jsx)("option",{value:"excel",children:"Excel (.xlsx)"}),(0,sa.jsx)("option",{value:"csv",children:"CSV (.csv)"}),(0,sa.jsx)("option",{value:"json",children:"JSON (.json)"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"P\xe9riode"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,sa.jsx)("option",{value:"all",children:"Toutes les donn\xe9es"}),(0,sa.jsx)("option",{value:"year",children:"Cette ann\xe9e"}),(0,sa.jsx)("option",{value:"month",children:"Ce mois"}),(0,sa.jsx)("option",{value:"custom",children:"P\xe9riode personnalis\xe9e"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tri par"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,sa.jsx)("option",{value:"date_desc",children:"Date (Plus r\xe9cent)"}),(0,sa.jsx)("option",{value:"date_asc",children:"Date (Plus ancien)"}),(0,sa.jsx)("option",{value:"name",children:"Nom alphab\xe9tique"}),(0,sa.jsx)("option",{value:"amount",children:"Montant"})]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("input",{type:"checkbox",className:"rounded",defaultChecked:!0}),(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Inclure les en-t\xeates de colonnes"})]}),(0,sa.jsxs)("button",{onClick:()=>Pt.success("Export complet g\xe9n\xe9r\xe9 avec les options s\xe9lectionn\xe9es"),className:"flex items-center space-x-2 px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700",children:[(0,sa.jsx)(rh,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Export Complet"})]})]})]}),(0,sa.jsxs)("div",{className:"mt-8 bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,sa.jsx)(Za,{className:"w-4 h-4 text-red-600"}),(0,sa.jsx)("h3",{className:"font-medium text-red-800",children:"\u26a0\ufe0f Zone de R\xe9initialisation (Dangereuse)"})]}),(0,sa.jsx)("p",{className:"text-sm text-red-700 mb-4",children:"Cette section permet de r\xe9initialiser les donn\xe9es. Assurez-vous d'avoir fait une sauvegarde avant."}),(0,sa.jsx)("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg",children:"Acc\xe9der aux options de r\xe9initialisation"})]})]})}),"utilisateurs"===T&&(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,sa.jsx)(ia,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\ud83d\udc65 Gestion Utilisateurs & Droits"})]}),(0,sa.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,sa.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"users-list",label:"\ud83d\udc64 Utilisateurs",icon:ia},{id:"permissions",label:"\ud83d\udee1\ufe0f Droits & Permissions",icon:lh}].map(e=>{const t=e.icon;return(0,sa.jsx)("button",{onClick:()=>L(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm whitespace-nowrap "+(O===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)(t,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:e.label})]})},e.id)})})}),"users-list"===O&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Liste des Utilisateurs"}),(0,sa.jsxs)("button",{onClick:()=>{se(null),ae({username:"",email:"",full_name:"",role:"secretaire",password:""}),ee(!0)},className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:[(0,sa.jsx)(oh,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Nouvel utilisateur"})]})]}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sa.jsx)("thead",{className:"bg-gray-50",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utilisateur"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"R\xf4le"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Derni\xe8re connexion"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:X.map(e=>(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sa.jsxs)("div",{className:"flex items-center",children:[(0,sa.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,sa.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,sa.jsx)(ia,{className:"w-5 h-5 text-gray-600"})})}),(0,sa.jsxs)("div",{className:"ml-4",children:[(0,sa.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name||e.nom_utilisateur}),(0,sa.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.nom_utilisateur]})]})]})}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sa.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+("medecin"===e.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"medecin"===e.role?"\ud83d\udc68\u200d\u2695\ufe0f M\xe9decin":"\ud83d\udc69\u200d\ud83d\udcbc Secr\xe9taire"})}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleDateString("fr-FR"):"Jamais connect\xe9"}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sa.jsx)("button",{onClick:()=>st(e),className:"text-blue-600 hover:text-blue-900 p-1 rounded",title:"Modifier l'utilisateur",children:(0,sa.jsx)(Va,{className:"w-4 h-4"})}),(0,sa.jsx)("button",{onClick:()=>de(e),className:"text-purple-600 hover:text-purple-900 p-1 rounded",title:"G\xe9rer les permissions",children:(0,sa.jsx)(lh,{className:"w-4 h-4"})}),"medecin"!==e.username&&(0,sa.jsx)("button",{onClick:()=>(async(e,t)=>{if(window.confirm(`\xcates-vous s\xfbr de vouloir supprimer l'utilisateur "${t}" ?\n\nCette action est irr\xe9versible.`))try{await Qn.delete(`/api/admin/users/${e}`),Pt.success("Utilisateur supprim\xe9 avec succ\xe8s"),Je()}catch(a){var s,n;console.error("Error deleting user:",a),Pt.error((null===(s=a.response)||void 0===s||null===(n=s.data)||void 0===n?void 0:n.detail)||"Erreur lors de la suppression")}})(e.id,e.full_name||e.username),className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Supprimer l'utilisateur",children:(0,sa.jsx)(fa,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===X.length&&(0,sa.jsxs)("div",{className:"text-center py-8",children:[(0,sa.jsx)(ia,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun utilisateur trouv\xe9"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Cr\xe9ez un nouvel utilisateur pour commencer"})]})]}),"access-management"===O&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\ud83d\udd10 Gestion des Acc\xe8s"}),(0,sa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,sa.jsx)(ah,{className:"w-6 h-6 text-blue-600"}),(0,sa.jsx)("h4",{className:"font-medium text-blue-900",children:"Mon Mot de Passe"})]}),(0,sa.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"Modifiez votre mot de passe de connexion pour s\xe9curiser votre compte"}),(0,sa.jsxs)("button",{onClick:()=>ie(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:[(0,sa.jsx)(ah,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Changer le mot de passe"})]})]}),(0,sa.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,sa.jsx)(Za,{className:"w-6 h-6 text-yellow-600"}),(0,sa.jsx)("h4",{className:"font-medium text-yellow-900",children:"Comptes par D\xe9faut"})]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("div",{className:"bg-white p-3 rounded border",children:(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-medium text-gray-900",children:"\ud83d\udc68\u200d\u2695\ufe0f Compte M\xe9decin"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Login: medecin"})]}),(0,sa.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"medecin123"})]})}),(0,sa.jsx)("div",{className:"bg-white p-3 rounded border",children:(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-medium text-gray-900",children:"\ud83d\udc69\u200d\ud83d\udcbc Compte Secr\xe9taire"}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Login: secretaire"})]}),(0,sa.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded text-sm",children:"secretaire123"})]})})]}),(0,sa.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded",children:[(0,sa.jsx)("p",{className:"text-sm text-red-700 font-medium",children:"\u26a0\ufe0f S\xe9curit\xe9 Important"}),(0,sa.jsx)("p",{className:"text-xs text-red-600 mt-1",children:"Changez ces mots de passe par d\xe9faut pour s\xe9curiser le syst\xe8me en production"})]})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,sa.jsx)(ch,{className:"w-6 h-6 text-gray-600"}),(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:"Historique de Connexion"})]}),(0,sa.jsx)("p",{className:"text-sm text-gray-600",children:"Consultez les derni\xe8res connexions pour surveiller l'activit\xe9 du syst\xe8me"}),(0,sa.jsx)("div",{className:"mt-4 space-y-2",children:X.slice(0,3).map((e,t)=>(0,sa.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 last:border-0",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"w-2 h-2 rounded-full "+(e.last_login&&new Date(e.last_login)>new Date(Date.now()-864e5)?"bg-green-400":"bg-gray-300")}),(0,sa.jsx)("span",{className:"text-sm font-medium",children:e.nom_utilisateur}),(0,sa.jsx)("span",{className:"text-xs px-2 py-1 rounded "+("medecin"===e.role?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"),children:e.role})]}),(0,sa.jsx)("span",{className:"text-xs text-gray-500",children:e.last_login?new Date(e.last_login).toLocaleString("fr-FR"):"Jamais connect\xe9"})]},e.id))})]})]}),"permissions"===O&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\ud83d\udee1\ufe0f Droits & Permissions"}),(0,sa.jsx)("div",{className:"text-sm text-gray-500",children:"G\xe9rez l'acc\xe8s aux diff\xe9rentes pages pour les secr\xe9taires"})]}),(0,sa.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[(0,sa.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:"Matrice des Permissions par R\xf4le"})}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sa.jsx)("thead",{className:"bg-gray-50",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Permission"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"\ud83d\udc68\u200d\u2695\ufe0f M\xe9decin"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"\ud83d\udc69\u200d\ud83d\udcbc Secr\xe9taire"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"})]})}),(0,sa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{key:"view_dashboard",label:"\ud83c\udfe0 Dashboard",desc:"Acc\xe8s \xe0 la page d'accueil",active:!0},{key:"view_patients",label:"\ud83d\udc65 Fiches Patients",desc:"Voir la liste des patients",active:!0},{key:"manage_patients",label:"\u270f\ufe0f Gestion Patients",desc:"Cr\xe9er/modifier les patients",active:!0},{key:"view_calendar",label:"\ud83d\udcc5 Gestion RDV",desc:"Voir le calendrier des RDV",active:!0},{key:"manage_appointments",label:"\ud83d\udcdd Gestion RDV",desc:"Cr\xe9er/modifier les RDV",active:!0},{key:"view_consultations",label:"\ud83e\ude7a Historique Consultations",desc:"Voir les consultations",active:!0},{key:"view_messages",label:"\ud83d\udcac Messages Tel",desc:"Acc\xe8s aux messages",active:!0},{key:"view_billing",label:"\ud83d\udcb0 Facturation",desc:"Voir la facturation",active:!0},{key:"modify_payments",label:"\ud83d\udcb3 Modifier Paiements",desc:"Modifier les paiements",active:!0},{key:"view_administration",label:"\u2699\ufe0f Administration",desc:"Acc\xe8s \xe0 l'administration",active:!0}].filter(e=>e.active).map(e=>(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.label}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,sa.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"\u2705 Autoris\xe9"})}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,sa.jsxs)("select",{defaultValue:tt("secretaire")[e.key]?"true":"false",className:"text-xs border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500",onChange:t=>{const s=X.filter(e=>"secretaire"===e.role),n="true"===t.target.value;s.forEach(async t=>{try{const s={...t.permissions,[e.key]:n};await et(t.id,s),console.log(`\u2705 Updated ${e.key} for ${t.full_name}: ${n}`)}catch(s){console.error(`\u274c Failed to update ${e.key} for ${t.full_name}:`,s),Pt.error(`Erreur mise \xe0 jour permission ${t.full_name}`)}}),Pt.success(`Permission "${e.label}" mise \xe0 jour pour tous les secr\xe9taires`)},children:[(0,sa.jsx)("option",{value:"true",children:"\u2705 Autoris\xe9"}),(0,sa.jsx)("option",{value:"false",children:"\u274c Refus\xe9"})]})}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.desc})]},e.key))})]})})]}),(0,sa.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,sa.jsx)(ia,{className:"w-6 h-6 text-blue-600"}),(0,sa.jsx)("h4",{className:"font-medium text-blue-900",children:"Permissions Individuelles"})]}),(0,sa.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"Modifiez les permissions sp\xe9cifiques pour chaque utilisateur secr\xe9taire"}),(0,sa.jsx)("div",{className:"space-y-3",children:X.filter(e=>"secretaire"===e.role).map(e=>(0,sa.jsx)("div",{className:"bg-white p-3 rounded border",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"w-8 h-8 rounded-full bg-green-100 flex items-center justify-center",children:(0,sa.jsx)(ia,{className:"w-4 h-4 text-green-600"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-medium text-gray-900",children:e.full_name||e.nom_utilisateur}),(0,sa.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.nom_utilisateur]})]})]}),(0,sa.jsxs)("button",{onClick:()=>de(e),className:"flex items-center space-x-2 px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm",children:[(0,sa.jsx)(lh,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"G\xe9rer Droits"})]})]})},e.id))}),0===X.filter(e=>"secretaire"===e.role).length&&(0,sa.jsxs)("div",{className:"text-center py-4",children:[(0,sa.jsx)("p",{className:"text-sm text-gray-500",children:"Aucun utilisateur secr\xe9taire trouv\xe9"}),(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"Cr\xe9ez un compte secr\xe9taire pour g\xe9rer les permissions"})]})]}),(0,sa.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,sa.jsx)(Ca,{className:"w-6 h-6 text-yellow-600"}),(0,sa.jsx)("h4",{className:"font-medium text-yellow-900",children:"\ud83e\uddea Test & Validation des Permissions"})]}),(0,sa.jsx)("p",{className:"text-sm text-yellow-700 mb-4",children:"Testez l'application des permissions pour s'assurer qu'elles fonctionnent correctement"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("button",{onClick:async()=>{try{await Je(),Pt.success("\u2705 Permissions actualis\xe9es avec succ\xe8s")}catch(e){Pt.error("\u274c Erreur lors du rafra\xeechissement des permissions")}},className:"flex items-center justify-center space-x-2 px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg",children:[(0,sa.jsx)(Fa,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Rafra\xeechir Permissions"})]}),(0,sa.jsxs)("button",{onClick:()=>{const e=X.filter(e=>"secretaire"===e.role);if(e.length>0){const t=e[0];Pt.success(`\ud83d\udd0d Permissions de ${t.full_name}:\n${JSON.stringify(t.permissions||tt("secretaire"),null,2)}`)}else Pt.error("Aucun secr\xe9taire trouv\xe9 pour le test")},className:"flex items-center justify-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg",children:[(0,sa.jsx)(ta,{className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"V\xe9rifier Permissions"})]})]}),(0,sa.jsxs)("div",{className:"mt-4 text-xs text-yellow-600",children:[(0,sa.jsxs)("p",{children:["\ud83d\udca1 ",(0,sa.jsx)("strong",{children:"Astuce :"})," Les changements de permissions prennent effet imm\xe9diatement."]}),(0,sa.jsxs)("p",{children:["\u26a0\ufe0f ",(0,sa.jsx)("strong",{children:"Important :"})," Les utilisateurs doivent se reconnecter pour voir les changements."]})]})]})]})]})}),"systeme"===T&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,sa.jsx)(ah,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\u2699\ufe0f Informations Syst\xe8me"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ah,{className:"w-4 h-4 text-gray-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Version"})]}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:me.version}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Cabinet M\xe9dical"})]}),(0,sa.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ch,{className:"w-4 h-4 text-green-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Uptime"})]}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-green-600",children:me.uptime}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Temps de fonctionnement"})]}),(0,sa.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(dh,{className:"w-4 h-4 text-blue-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Stockage"})]}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:null!==(P=me.storage)&&void 0!==P&&P.total?`${(me.storage.used/100*parseFloat(me.storage.total)).toFixed(1)} GB`:"0.2 GB"}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:null!==(A=me.storage)&&void 0!==A&&A.total?`sur ${me.storage.total} GB (${me.storage.used}%)`:"sur 10 GB (2%)"})]}),(0,sa.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(fr,{className:"w-4 h-4 text-purple-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Performance"})]}),(0,sa.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[me.performance.responseTime,"ms"]}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Temps de r\xe9ponse"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-6",children:[(0,sa.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(nh,{className:"w-4 h-4 text-orange-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Base de Donn\xe9es"})]}),(0,sa.jsx)("p",{className:"text-xl font-bold text-orange-600",children:"MongoDB"}),(0,sa.jsxs)("p",{className:"text-sm text-orange-700 mt-1",children:[z.total_patients," patients \u2022 ",z.total_consultations," consultations"]}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Connexion stable"})]}),(0,sa.jsxs)("div",{className:"bg-indigo-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ia,{className:"w-4 h-4 text-indigo-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Utilisateurs Actifs"})]}),(0,sa.jsx)("p",{className:"text-xl font-bold text-indigo-600",children:X.length}),(0,sa.jsxs)("p",{className:"text-sm text-indigo-700 mt-1",children:[X.filter(e=>"medecin"===e.role).length," m\xe9decin(s) \u2022 ",X.filter(e=>"secretaire"===e.role).length," secr\xe9taire(s)"]}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Comptes configur\xe9s"})]}),(0,sa.jsxs)("div",{className:"bg-cyan-50 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ch,{className:"w-4 h-4 text-cyan-600"}),(0,sa.jsx)("h3",{className:"font-medium text-gray-900",children:"Sessions"})]}),(0,sa.jsx)("p",{className:"text-xl font-bold text-cyan-600",children:"1"}),(0,sa.jsx)("p",{className:"text-sm text-cyan-700 mt-1",children:"Session active"}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:"Connexion s\xe9curis\xe9e"})]})]}),(0,sa.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,sa.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,sa.jsx)("h3",{className:"font-medium text-green-900",children:"\xc9tat du Syst\xe8me"})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-green-700",children:"\ud83d\udfe2 Frontend"}),(0,sa.jsx)("span",{className:"font-medium text-green-600",children:"Op\xe9rationnel"})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-green-700",children:"\ud83d\udfe2 Backend API"}),(0,sa.jsx)("span",{className:"font-medium text-green-600",children:"Op\xe9rationnel"})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-green-700",children:"\ud83d\udfe2 Base de donn\xe9es"}),(0,sa.jsx)("span",{className:"font-medium text-green-600",children:"Connect\xe9e"})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-green-700",children:"\ud83d\udfe2 WebSocket"}),(0,sa.jsx)("span",{className:"font-medium text-green-600",children:"Actif"})]})]})]}),(0,sa.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,sa.jsx)(Za,{className:"w-4 h-4 text-yellow-600"}),(0,sa.jsx)("h3",{className:"font-medium text-yellow-900",children:"Derni\xe8re Sauvegarde"})]}),(0,sa.jsx)("p",{className:"text-sm text-yellow-700",children:me.lastBackup?new Date(me.lastBackup).toLocaleString("fr-FR"):"Aucune sauvegarde effectu\xe9e"}),(0,sa.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:'Effectuez r\xe9guli\xe8rement des sauvegardes via l\'onglet "Gestion Donn\xe9es"'})]})]})]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,sa.jsx)(fr,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\ud83d\ude80 Optimisation & Performance"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg p-4 border border-blue-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(fr,{className:"w-4 h-4 text-blue-600"}),(0,sa.jsx)("h3",{className:"font-medium text-blue-900",children:"Vitesse de Chargement"})]}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:"0.8s"}),(0,sa.jsx)("p",{className:"text-xs text-blue-600",children:"Temps moyen de chargement des pages"}),(0,sa.jsx)("div",{className:"mt-2 w-full bg-blue-200 rounded-full h-2",children:(0,sa.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"85%"}})}),(0,sa.jsx)("p",{className:"text-xs text-blue-500 mt-1",children:"Excellent (85/100)"})]}),(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(nh,{className:"w-4 h-4 text-green-600"}),(0,sa.jsx)("h3",{className:"font-medium text-green-900",children:"Base de Donn\xe9es"})]}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-green-600",children:"12ms"}),(0,sa.jsx)("p",{className:"text-xs text-green-600",children:"Temps de r\xe9ponse moyen"}),(0,sa.jsx)("div",{className:"mt-2 w-full bg-green-200 rounded-full h-2",children:(0,sa.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"92%"}})}),(0,sa.jsx)("p",{className:"text-xs text-green-500 mt-1",children:"Excellent (92/100)"})]}),(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-lg p-4 border border-purple-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ch,{className:"w-4 h-4 text-purple-600"}),(0,sa.jsx)("h3",{className:"font-medium text-purple-900",children:"Cache Efficacit\xe9"})]}),(0,sa.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"94%"}),(0,sa.jsx)("p",{className:"text-xs text-purple-600",children:"Taux de succ\xe8s du cache"}),(0,sa.jsx)("div",{className:"mt-2 w-full bg-purple-200 rounded-full h-2",children:(0,sa.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"94%"}})}),(0,sa.jsx)("p",{className:"text-xs text-purple-500 mt-1",children:"Optimal (94/100)"})]})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"\ud83d\udd27 Actions d'Optimisation"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,sa.jsxs)("button",{onClick:()=>at("clear_cache"),disabled:F,className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors border border-blue-200",children:[(0,sa.jsx)(Fa,{className:"w-6 h-6 text-blue-600 mb-2"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Vider le Cache"}),(0,sa.jsx)("span",{className:"text-xs text-blue-600 mt-1",children:"Am\xe9liore les performances"})]}),(0,sa.jsxs)("button",{onClick:()=>at("optimize_database"),disabled:F,className:"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors border border-green-200",children:[(0,sa.jsx)(nh,{className:"w-6 h-6 text-green-600 mb-2"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-green-900",children:"Optimiser BDD"}),(0,sa.jsx)("span",{className:"text-xs text-green-600 mt-1",children:"D\xe9fragmente et indexe"})]}),(0,sa.jsxs)("button",{onClick:()=>at("cleanup_logs"),disabled:F,className:"flex flex-col items-center p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors border border-orange-200",children:[(0,sa.jsx)(fa,{className:"w-6 h-6 text-orange-600 mb-2"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-orange-900",children:"Nettoyer Logs"}),(0,sa.jsx)("span",{className:"text-xs text-orange-600 mt-1",children:"Lib\xe8re l'espace disque"})]}),(0,sa.jsxs)("button",{onClick:()=>at("restart_services"),disabled:F,className:"flex flex-col items-center p-4 bg-red-50 rounded-lg hover:bg-red-100 transition-colors border border-red-200",children:[(0,sa.jsx)(Fa,{className:"w-6 h-6 text-red-600 mb-2"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-red-900",children:"Red\xe9marrer Services"}),(0,sa.jsx)("span",{className:"text-xs text-red-600 mt-1",children:"Applique les optimisations"})]}),(0,sa.jsxs)("button",{onClick:()=>at("backup_system"),disabled:F,className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors border border-purple-200",children:[(0,sa.jsx)(mr,{className:"w-6 h-6 text-purple-600 mb-2"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-purple-900",children:"Sauvegarde Syst\xe8me"}),(0,sa.jsx)("span",{className:"text-xs text-purple-600 mt-1",children:"Cr\xe9\xe9 un point de restauration"})]}),(0,sa.jsxs)("button",{onClick:()=>at("health_check"),disabled:F,className:"flex flex-col items-center p-4 bg-indigo-50 rounded-lg hover:bg-indigo-100 transition-colors border border-indigo-200",children:[(0,sa.jsx)(ch,{className:"w-6 h-6 text-indigo-600 mb-2"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-indigo-900",children:"Diagnostic Complet"}),(0,sa.jsx)("span",{className:"text-xs text-indigo-600 mt-1",children:"Analyse la sant\xe9 du syst\xe8me"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-6",children:[(0,sa.jsx)(ah,{className:"w-5 h-5 text-gray-600"}),(0,sa.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\u2699\ufe0f Configuration Avanc\xe9e"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"\ud83d\udcbe M\xe9moire & Processeur"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Utilisation RAM"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"256 MB / 2 GB"})]}),(0,sa.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,sa.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"12.8%"}})}),(0,sa.jsxs)("div",{className:"flex justify-between items-center mt-3",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Utilisation CPU"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"15%"})]}),(0,sa.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,sa.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"15%"}})})]})]}),(0,sa.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"\ud83d\udcbd Stockage D\xe9taill\xe9"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Base de donn\xe9es"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"45 MB"})]}),(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Fichiers syst\xe8me"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"120 MB"})]}),(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Logs"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"8 MB"})]}),(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-700",children:"Cache"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"12 MB"})]}),(0,sa.jsx)("hr",{className:"my-2"}),(0,sa.jsxs)("div",{className:"flex justify-between items-center font-medium",children:[(0,sa.jsx)("span",{className:"text-sm text-gray-900",children:"Total utilis\xe9"}),(0,sa.jsx)("span",{className:"text-sm text-gray-900",children:"185 MB"})]})]})]})]}),(0,sa.jsxs)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"font-medium text-blue-900 mb-4",children:"\ud83d\udd12 S\xe9curit\xe9 & Surveillance"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,sa.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"SSL/TLS"})]}),(0,sa.jsx)("p",{className:"text-xs text-gray-600",children:"Connexions s\xe9curis\xe9es"})]}),(0,sa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,sa.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Authentification"})]}),(0,sa.jsx)("p",{className:"text-xs text-gray-600",children:"JWT actif"})]}),(0,sa.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,sa.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),(0,sa.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"Logs Audit"})]}),(0,sa.jsx)("p",{className:"text-xs text-gray-600",children:"Surveillance basique"})]})]})]})]})]}),Z&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:te?"Modifier utilisateur":"Nouvel utilisateur"}),(0,sa.jsx)("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom d'utilisateur *"}),(0,sa.jsx)("input",{type:"text",value:ne.username,onChange:e=>ae(t=>({...t,username:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"nom_utilisateur"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),(0,sa.jsx)("input",{type:"text",value:ne.full_name,onChange:e=>ae(t=>({...t,full_name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Pr\xe9nom Nom"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,sa.jsx)("input",{type:"email",value:ne.email,onChange:e=>ae(t=>({...t,email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"email@example.com"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"R\xf4le"}),(0,sa.jsxs)("select",{value:ne.role,onChange:e=>ae(t=>({...t,role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,sa.jsx)("option",{value:"secretaire",children:"Secr\xe9taire"}),(0,sa.jsx)("option",{value:"medecin",children:"M\xe9decin"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Mot de passe ",te?"(laisser vide pour ne pas modifier)":"*"]}),(0,sa.jsx)("input",{type:"password",value:ne.password,onChange:e=>ae(t=>({...t,password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>ee(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Annuler"}),(0,sa.jsx)("button",{onClick:te?async()=>{try{if(!te)return;const e={...ne};e.password||delete e.password,await Qn.put(`/api/admin/users/${te.id}`,e),Pt.success("Utilisateur mis \xe0 jour avec succ\xe8s"),ee(!1),se(null),ae({username:"",email:"",full_name:"",role:"secretaire",password:""}),Je()}catch(s){var e,t;console.error("Error updating user:",s),Pt.error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Erreur lors de la mise \xe0 jour")}}:async()=>{try{if(!ne.username||!ne.full_name||!ne.password)return void Pt.error("Veuillez remplir tous les champs obligatoires");await Qn.post("/api/admin/users",ne),Pt.success("Utilisateur cr\xe9\xe9 avec succ\xe8s"),ee(!1),ae({username:"",email:"",full_name:"",role:"secretaire",password:""}),Je()}catch(s){var e,t;console.error("Error creating user:",s),Pt.error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Erreur lors de la cr\xe9ation de l'utilisateur")}},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:te?"Modifier":"Cr\xe9er"})]})]})}),re&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Changer le mot de passe"}),(0,sa.jsx)("button",{onClick:()=>ie(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),(0,sa.jsx)("input",{type:"password",value:le.newPassword,onChange:e=>oe(t=>({...t,newPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le mot de passe"}),(0,sa.jsx)("input",{type:"password",value:le.confirmPassword,onChange:e=>oe(t=>({...t,confirmPassword:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>ie(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Annuler"}),(0,sa.jsx)("button",{onClick:async()=>{try{if(!le.newPassword||!le.confirmPassword)return void Pt.error("Veuillez saisir le nouveau mot de passe");if(le.newPassword!==le.confirmPassword)return void Pt.error("Les mots de passe ne correspondent pas");await Qn.put(`/api/admin/users/${D.id}`,{password:le.newPassword}),Pt.success("Mot de passe mis \xe0 jour avec succ\xe8s"),ie(!1),oe({currentPassword:"",newPassword:"",confirmPassword:""})}catch(s){var e,t;console.error("Error updating password:",s),Pt.error((null===(e=s.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.detail)||"Erreur lors de la mise \xe0 jour du mot de passe")}},className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white rounded-lg",children:"Modifier"})]})]})}),ce&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl max-w-2xl w-full p-6 max-h-[80vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["\ud83d\udee1\ufe0f G\xe9rer les permissions - ",ce.full_name||ce.username]}),(0,sa.jsx)("button",{onClick:()=>{de(null),he({})},className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsx)("div",{className:"mb-4",children:(0,sa.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full "+("medecin"===ce.role?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"medecin"===ce.role?"\ud83d\udc68\u200d\u2695\ufe0f M\xe9decin":"\ud83d\udc69\u200d\ud83d\udcbc Secr\xe9taire"})}),(0,sa.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,sa.jsx)("h4",{className:"font-medium text-gray-900",children:"Permissions d'acc\xe8s :"}),[{key:"dashboard",label:"\ud83c\udfe0 Dashboard",desc:"Acc\xe8s \xe0 la page d'accueil"},{key:"patients",label:"\ud83d\udc65 Fiches Patients",desc:"Voir et g\xe9rer les patients"},{key:"calendar",label:"\ud83d\udcc5 Gestion RDV",desc:"Voir et g\xe9rer les rendez-vous"},{key:"messages",label:"\ud83d\udcac Messages Tel",desc:"Acc\xe8s aux messages t\xe9l\xe9phoniques"},{key:"consultation",label:"\ud83e\ude7a Historique Consultations",desc:"Voir les consultations"},{key:"billing",label:"\ud83d\udcb0 Facturation",desc:"Acc\xe8s \xe0 la facturation"},{key:"ai_room",label:"\ud83e\udd16 IA Room",desc:"Acc\xe8s aux fonctionnalit\xe9s d'IA"},{key:"administration",label:"\u2699\ufe0f Administration",desc:"Acc\xe8s \xe0 l'administration"}].map(e=>{var t;const s=void 0!==ue[e.key]?ue[e.key]:(null===(t=ce.permissions)||void 0===t?void 0:t[e.key])||!1;return(0,sa.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"font-medium text-gray-900",children:e.label}),(0,sa.jsx)("div",{className:"text-sm text-gray-500",children:e.desc})]}),(0,sa.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",checked:s,onChange:t=>he(s=>({...s,[e.key]:t.target.checked})),className:"sr-only"}),(0,sa.jsx)("div",{className:"relative inline-flex items-center h-6 rounded-full w-11 transition-colors "+(s?"bg-blue-600":"bg-gray-300"),children:(0,sa.jsx)("span",{className:"inline-block w-4 h-4 transform bg-white rounded-full transition-transform "+(s?"translate-x-6":"translate-x-1")})})]})]},e.key)})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,sa.jsx)("button",{onClick:()=>{de(null),he({})},className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Annuler"}),(0,sa.jsx)("button",{onClick:()=>{const e={...ce.permissions,...ue};et(ce.id,e),he({})},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"Sauvegarder"})]})]})}),W&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsxs)("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"R\xe9initialisation Base de Donn\xe9es"}),(0,sa.jsx)("button",{onClick:()=>q(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("p",{className:"text-red-600 text-sm mb-4",children:"\u26a0\ufe0f Attention: Cette action est IRR\xc9VERSIBLE"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Y.patients,onChange:e=>Q(t=>({...t,patients:e.target.checked})),className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm",children:"Patients"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Y.appointments,onChange:e=>Q(t=>({...t,appointments:e.target.checked})),className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm",children:"Rendez-vous"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Y.consultations,onChange:e=>Q(t=>({...t,consultations:e.target.checked})),className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm",children:"Consultations"})]}),(0,sa.jsxs)("label",{className:"flex items-center",children:[(0,sa.jsx)("input",{type:"checkbox",checked:Y.facturation,onChange:e=>Q(t=>({...t,facturation:e.target.checked})),className:"mr-2"}),(0,sa.jsx)("span",{className:"text-sm",children:"Facturation (Paiements + Caisse)"})]})]})]}),(0,sa.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,sa.jsx)("button",{onClick:()=>q(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg",children:"Annuler"}),(0,sa.jsx)("button",{onClick:async()=>{const e=Object.keys(Y).filter(e=>Y[e]);if(0===e.length)return void Pt.error("Veuillez s\xe9lectionner au moins une collection \xe0 r\xe9initialiser");const t=`\xcates-vous s\xfbr de vouloir r\xe9initialiser: ${e.join(", ")} ?\n\nCette action est IRR\xc9VERSIBLE !`;if(window.confirm(t))try{$(!0);for(const t of e)await Qn.delete(`/api/admin/database/${t}`);Pt.success(`Collections r\xe9initialis\xe9es: ${e.join(", ")}`),q(!1),Q({patients:!1,appointments:!1,consultations:!1,facturation:!1}),await nt()}catch(s){console.error("Error resetting database:",s),Pt.error("Erreur lors de la r\xe9initialisation")}finally{$(!1)}},disabled:F,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50",children:F?"R\xe9initialisation...":"Confirmer"})]})]})}),U&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[80vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Patients Inactifs (",B.length,")"]}),(0,sa.jsx)("button",{onClick:()=>H(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sa.jsx)(ha,{className:"w-5 h-5"})})]}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sa.jsx)("thead",{className:"bg-gray-50",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Patient"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"\xc2ge"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Derni\xe8re consultation"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(e=>(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sa.jsxs)("button",{className:"text-left hover:text-blue-600",onClick:()=>{window.location.href=`/patients?patient=${e.id}`},children:[(0,sa.jsxs)("div",{className:"text-sm font-medium text-gray-900 hover:text-blue-600",children:[e.prenom," ",e.nom]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.id]})]})}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.age}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.last_consultation_date?new Date(e.last_consultation_date).toLocaleDateString("fr-FR"):"Aucune"}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,sa.jsx)("div",{className:"flex items-center space-x-2",children:e.lien_whatsapp&&(0,sa.jsx)("a",{href:e.lien_whatsapp,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-900",title:"Contacter WhatsApp",children:(0,sa.jsx)(ca,{className:"w-4 h-4"})})})})]},e.id))})]})})]})})})]})},mh=Gn("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),ph=e=>{let{user:t,isOpen:s,onClose:n,phoneMessagesCount:a=0}=e;const r=te(),i=[{id:"dashboard",label:"Tableau de bord",icon:mh,path:"/dashboard",permission:"all"},{id:"patients",label:"Fiches Patients",icon:ia,path:"/patients",permission:"patients"},{id:"calendar",label:"Gestion RDV",icon:aa,path:"/calendar",permission:"appointments"},{id:"messages",label:"Messages Tel",icon:ca,path:"/messages",permission:"messages"},{id:"consultation",label:"Historique Consultations",icon:Xn,path:"/consultation",permission:"consultations"},{id:"billing",label:"Facturation",icon:Wa,path:"/billing",permission:"billing"},{id:"administration",label:"Administration",icon:ah,path:"/administration",permission:"admin"}].filter(e=>(e=>{var s,n,a,r,i;return"medecin"===(null===t||void 0===t?void 0:t.role)||"all"===e||("admin"===e?(null===t||void 0===t||null===(s=t.permissions)||void 0===s?void 0:s.administration)||!1:"billing"===e?(null===t||void 0===t||null===(n=t.permissions)||void 0===n?void 0:n.billing)||!1:"messages"===e||("patients"===e?(null===t||void 0===t||null===(a=t.permissions)||void 0===a?void 0:a.patients)||!0:"appointments"===e?(null===t||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.appointments)||!0:"consultations"===e&&((null===t||void 0===t||null===(i=t.permissions)||void 0===i?void 0:i.consultations)||!0)))})(e.permission));return(0,sa.jsxs)(sa.Fragment,{children:[s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:n}),(0,sa.jsxs)("div",{className:"responsive-sidebar "+(s?"translate-x-0":"responsive-sidebar-hidden"),children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between p-3 sm:p-4 border-b border-gray-200",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,sa.jsx)("div",{className:"bg-primary-500 p-1.5 sm:p-2 rounded-lg",children:(0,sa.jsx)(Xn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"font-bold text-gray-900 text-sm sm:text-base",children:"Cabinet"}),(0,sa.jsx)("p",{className:"text-xs sm:text-sm text-gray-500",children:"M\xe9dical"})]})]}),(0,sa.jsx)("button",{onClick:n,className:"p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 lg:hidden",children:(0,sa.jsx)(ha,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),(0,sa.jsx)("nav",{className:"p-3 sm:p-4 flex-1",children:(0,sa.jsx)("ul",{className:"space-y-1",children:i.map(e=>{const t=e.icon,s=r.pathname===e.path;return(0,sa.jsx)("li",{children:(0,sa.jsxs)(Pe,{to:e.path,onClick:n,className:"flex items-center justify-between space-x-2 sm:space-x-3 px-2 sm:px-3 py-2 sm:py-2.5 rounded-lg transition-all duration-200 text-xs sm:text-sm "+(s?"bg-primary-100 text-primary-700 font-medium shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"),children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,sa.jsx)(t,{className:"w-4 h-4 sm:w-5 sm:h-5"}),(0,sa.jsx)("span",{className:"hidden sm:inline lg:inline",children:e.label})]}),"messages"===e.id&&a>0&&(0,sa.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:a})]})},e.id)})})}),(0,sa.jsx)("div",{className:"p-3 sm:p-4 border-t border-gray-200",children:(0,sa.jsx)("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,sa.jsx)("div",{className:"bg-primary-100 p-1.5 sm:p-2 rounded-full",children:(0,sa.jsx)(Xn,{className:"w-3 h-3 sm:w-4 sm:h-4 text-primary-600"})}),(0,sa.jsxs)("div",{className:"hidden sm:block lg:block",children:[(0,sa.jsx)("p",{className:"font-medium text-gray-900 text-xs sm:text-sm",children:t.full_name}),(0,sa.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:t.role})]})]})})})]})]})},xh=Gn("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),fh=Gn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),gh=e=>{let{user:t,onLogout:s,onToggleSidebar:n}=e;return(0,sa.jsx)("header",{className:"responsive-header",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,sa.jsx)("button",{onClick:n,className:"p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 lg:hidden",children:(0,sa.jsx)(xh,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,sa.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[(0,sa.jsx)("div",{className:"bg-primary-100 p-1.5 sm:p-2 rounded-full",children:(0,sa.jsx)(Jn,{className:"w-3 h-3 sm:w-4 sm:h-4 text-primary-600"})}),(0,sa.jsxs)("div",{className:"hidden sm:block",children:[(0,sa.jsx)("h2",{className:"font-medium text-gray-900 text-xs sm:text-sm",children:t.full_name}),(0,sa.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:t.role})]})]})]}),(0,sa.jsxs)("div",{className:"hidden md:flex items-center space-x-2 text-xs sm:text-sm text-gray-600",children:[(0,sa.jsx)(ra,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,sa.jsx)("span",{className:"hidden lg:inline",children:(new Date).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,sa.jsx)("span",{className:"font-medium",children:(new Date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),(0,sa.jsxs)("button",{onClick:s,className:"flex items-center space-x-1 sm:space-x-2 px-2 sm:px-3 py-1.5 sm:py-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:[(0,sa.jsx)(fh,{className:"w-3 h-3 sm:w-4 sm:h-4"}),(0,sa.jsx)("span",{className:"hidden sm:inline text-xs sm:text-sm",children:"D\xe9connexion"})]})]})})};Qn.defaults.baseURL="https://0698237d-0754-4aa4-881e-3c8e5387d3e6.preview.emergentagent.com";const bh=function(){const[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(0);return(0,r.useEffect)(()=>{const e=localStorage.getItem("token")||localStorage.getItem("auth_token"),s=localStorage.getItem("user");if(e&&s)try{const n=JSON.parse(s);Qn.defaults.headers.common.Authorization=`Bearer ${e}`,t(n),console.log("\ud83d\udd04 RESTORED: Previous login session")}catch(a){console.error("Error parsing saved user data:",a),localStorage.removeItem("token"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),localStorage.removeItem("userRole")}n(!1)},[]),(0,r.useEffect)(()=>{(async()=>{try{await Qn.get("/api/init-demo"),console.log("Demo data initialized")}catch(e){console.error("Error initializing demo data:",e)}})()},[]),(0,r.useEffect)(()=>{const t=async()=>{if(e)try{const e=await Qn.get("/api/phone-messages/stats");o(e.data.nouveau||0)}catch(t){console.error("Error loading phone messages count:",t)}};t();const s=setInterval(t,3e4);return()=>clearInterval(s)},[e]),s?(0,sa.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-500"})}):(0,sa.jsx)(Ce,{children:(0,sa.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,sa.jsx)(Mt,{position:"top-right"}),e?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)(ph,{user:e,isOpen:a,onClose:()=>i(!1),phoneMessagesCount:l}),(0,sa.jsxs)("div",{className:"responsive-main-content",children:[(0,sa.jsx)(gh,{user:e,onLogout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),delete Qn.defaults.headers.common.Authorization,t(null)},onToggleSidebar:()=>{i(!a)}}),(0,sa.jsx)("main",{className:"responsive-padding max-w-7xl mx-auto",children:(0,sa.jsxs)(je,{children:[(0,sa.jsx)(ye,{path:"/",element:(0,sa.jsx)(be,{to:"/dashboard",replace:!0})}),(0,sa.jsx)(ye,{path:"/login",element:(0,sa.jsx)(be,{to:"/dashboard",replace:!0})}),(0,sa.jsx)(ye,{path:"/dashboard",element:(0,sa.jsx)(pa,{user:e})}),(0,sa.jsx)(ye,{path:"/patients",element:(0,sa.jsx)(_a,{user:e})}),(0,sa.jsx)(ye,{path:"/calendar",element:(0,sa.jsx)(Ja,{user:e})}),(0,sa.jsx)(ye,{path:"/messages",element:(0,sa.jsx)(ar,{user:e})}),(0,sa.jsx)(ye,{path:"/consultation",element:(0,sa.jsx)(ur,{user:e})}),(0,sa.jsx)(ye,{path:"/billing",element:(0,sa.jsx)(sh,{user:e})}),(0,sa.jsx)(ye,{path:"/administration",element:(0,sa.jsx)(hh,{user:e})})]})})]})]}):(0,sa.jsx)(na,{onLogin:(e,s)=>{Qn.defaults.headers.common.Authorization=`Bearer ${s}`,t(e)}})]})})};l.createRoot(document.getElementById("root")).render((0,sa.jsx)(r.StrictMode,{children:(0,sa.jsx)(bh,{})}))})();
//# sourceMappingURL=main.ca89ad4a.js.map